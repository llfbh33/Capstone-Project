function Ey(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cy={exports:{}},Aa={},by={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),ik=Symbol.for("react.portal"),ok=Symbol.for("react.fragment"),sk=Symbol.for("react.strict_mode"),lk=Symbol.for("react.profiler"),ak=Symbol.for("react.provider"),uk=Symbol.for("react.context"),ck=Symbol.for("react.forward_ref"),dk=Symbol.for("react.suspense"),fk=Symbol.for("react.memo"),hk=Symbol.for("react.lazy"),pp=Symbol.iterator;function pk(t){return t===null||typeof t!="object"?null:(t=pp&&t[pp]||t["@@iterator"],typeof t=="function"?t:null)}var My={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ny=Object.assign,Ty={};function go(t,e,n){this.props=t,this.context=e,this.refs=Ty,this.updater=n||My}go.prototype.isReactComponent={};go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Oy(){}Oy.prototype=go.prototype;function yf(t,e,n){this.props=t,this.context=e,this.refs=Ty,this.updater=n||My}var vf=yf.prototype=new Oy;vf.constructor=yf;Ny(vf,go.prototype);vf.isPureReactComponent=!0;var mp=Array.isArray,Py=Object.prototype.hasOwnProperty,xf={current:null},Ry={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Py.call(e,r)&&!Ry.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:$s,type:t,key:o,ref:s,props:i,_owner:xf.current}}function mk(t,e){return{$$typeof:$s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sf(t){return typeof t=="object"&&t!==null&&t.$$typeof===$s}function gk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gp=/\/+/g;function Ju(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gk(""+t.key):e.toString(36)}function Tl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case $s:case ik:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ju(s,0):r,mp(i)?(n="",t!=null&&(n=t.replace(gp,"$&/")+"/"),Tl(i,e,n,"",function(u){return u})):i!=null&&(Sf(i)&&(i=mk(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(gp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",mp(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Ju(o,l);s+=Tl(o,e,n,a,i)}else if(a=pk(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Ju(o,l++),s+=Tl(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function nl(t,e,n){if(t==null)return t;var r=[],i=0;return Tl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function yk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},Ol={transition:null},vk={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:xf};Z.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!Sf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=go;Z.Fragment=ok;Z.Profiler=lk;Z.PureComponent=yf;Z.StrictMode=sk;Z.Suspense=dk;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ny({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=xf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Py.call(e,a)&&!Ry.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:$s,type:t.type,key:i,ref:o,props:r,_owner:s}};Z.createContext=function(t){return t={$$typeof:uk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ak,_context:t},t.Consumer=t};Z.createElement=Dy;Z.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:ck,render:t}};Z.isValidElement=Sf;Z.lazy=function(t){return{$$typeof:hk,_payload:{_status:-1,_result:t},_init:yk}};Z.memo=function(t,e){return{$$typeof:fk,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Ol.transition;Ol.transition={};try{t()}finally{Ol.transition=e}};Z.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Z.useCallback=function(t,e){return yt.current.useCallback(t,e)};Z.useContext=function(t){return yt.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};Z.useEffect=function(t,e){return yt.current.useEffect(t,e)};Z.useId=function(){return yt.current.useId()};Z.useImperativeHandle=function(t,e,n){return yt.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return yt.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return yt.current.useReducer(t,e,n)};Z.useRef=function(t){return yt.current.useRef(t)};Z.useState=function(t){return yt.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return yt.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return yt.current.useTransition()};Z.version="18.2.0";by.exports=Z;var w=by.exports;const Ce=gf(w),xk=Ey({__proto__:null,default:Ce},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk=w,kk=Symbol.for("react.element"),wk=Symbol.for("react.fragment"),Ek=Object.prototype.hasOwnProperty,Ck=Sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bk={key:!0,ref:!0,__self:!0,__source:!0};function jy(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Ek.call(e,r)&&!bk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:kk,type:t,key:o,ref:s,props:i,_owner:Ck.current}}Aa.Fragment=wk;Aa.jsx=jy;Aa.jsxs=jy;Cy.exports=Aa;var p=Cy.exports,qc={},Ay={exports:{}},It={},Iy={exports:{}},Ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,$){var W=A.length;A.push($);e:for(;0<W;){var ue=W-1>>>1,se=A[ue];if(0<i(se,$))A[ue]=$,A[W]=se,W=ue;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var $=A[0],W=A.pop();if(W!==$){A[0]=W;e:for(var ue=0,se=A.length,Ft=se>>>1;ue<Ft;){var ut=2*(ue+1)-1,Lr=A[ut],Pn=ut+1,xi=A[Pn];if(0>i(Lr,W))Pn<se&&0>i(xi,Lr)?(A[ue]=xi,A[Pn]=W,ue=Pn):(A[ue]=Lr,A[ut]=W,ue=ut);else if(Pn<se&&0>i(xi,W))A[ue]=xi,A[Pn]=W,ue=Pn;else break e}}return $}function i(A,$){var W=A.sortIndex-$.sortIndex;return W!==0?W:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],u=[],c=1,d=null,f=3,m=!1,h=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(A){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=A)r(u),$.sortIndex=$.expirationTime,e(a,$);else break;$=n(u)}}function S(A){if(g=!1,k(A),!h)if(n(a)!==null)h=!0,Jn(b);else{var $=n(u);$!==null&&On(S,$.startTime-A)}}function b(A,$){h=!1,g&&(g=!1,y(R),R=-1),m=!0;var W=f;try{for(k($),d=n(a);d!==null&&(!(d.expirationTime>$)||A&&!ee());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,f=d.priorityLevel;var se=ue(d.expirationTime<=$);$=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(a)&&r(a),k($)}else r(a);d=n(a)}if(d!==null)var Ft=!0;else{var ut=n(u);ut!==null&&On(S,ut.startTime-$),Ft=!1}return Ft}finally{d=null,f=W,m=!1}}var N=!1,M=null,R=-1,D=5,F=-1;function ee(){return!(t.unstable_now()-F<D)}function Ae(){if(M!==null){var A=t.unstable_now();F=A;var $=!0;try{$=M(!0,A)}finally{$?ze():(N=!1,M=null)}}else N=!1}var ze;if(typeof v=="function")ze=function(){v(Ae)};else if(typeof MessageChannel<"u"){var Tn=new MessageChannel,Se=Tn.port2;Tn.port1.onmessage=Ae,ze=function(){Se.postMessage(null)}}else ze=function(){x(Ae,0)};function Jn(A){M=A,N||(N=!0,ze())}function On(A,$){R=x(function(){A(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){h||m||(h=!0,Jn(b))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var W=f;f=$;try{return A()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=f;f=A;try{return $()}finally{f=W}},t.unstable_scheduleCallback=function(A,$,W){var ue=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ue+W:ue):W=ue,A){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,A={id:c++,callback:$,priorityLevel:A,startTime:W,expirationTime:se,sortIndex:-1},W>ue?(A.sortIndex=W,e(u,A),n(a)===null&&A===n(u)&&(g?(y(R),R=-1):g=!0,On(S,W-ue))):(A.sortIndex=se,e(a,A),h||m||(h=!0,Jn(b))),A},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(A){var $=f;return function(){var W=f;f=$;try{return A.apply(this,arguments)}finally{f=W}}}})(Ly);Iy.exports=Ly;var Mk=Iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y=w,At=Mk;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zy=new Set,hs={};function gi(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(hs[t]=e,t=0;t<e.length;t++)zy.add(e[t])}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gc=Object.prototype.hasOwnProperty,Nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yp={},vp={};function Tk(t){return Gc.call(vp,t)?!0:Gc.call(yp,t)?!1:Nk.test(t)?vp[t]=!0:(yp[t]=!0,!1)}function Ok(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pk(t,e,n,r){if(e===null||typeof e>"u"||Ok(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var kf=/[\-:]([a-z])/g;function wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kf,wf);Ze[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kf,wf);Ze[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kf,wf);Ze[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ef(t,e,n,r){var i=Ze.hasOwnProperty(e)?Ze[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Pk(e,n,i,r)&&(n=null),r||i===null?Tk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Un=_y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),Ni=Symbol.for("react.portal"),Ti=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),Yc=Symbol.for("react.profiler"),Fy=Symbol.for("react.provider"),By=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),Qc=Symbol.for("react.suspense"),Xc=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),Zn=Symbol.for("react.lazy"),$y=Symbol.for("react.offscreen"),xp=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=xp&&t[xp]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,qu;function $o(t){if(qu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qu=e&&e[1]||""}return`
`+qu+t}var Gu=!1;function Yu(t,e){if(!t||Gu)return"";Gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{Gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$o(t):""}function Rk(t){switch(t.tag){case 5:return $o(t.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 2:case 15:return t=Yu(t.type,!1),t;case 11:return t=Yu(t.type.render,!1),t;case 1:return t=Yu(t.type,!0),t;default:return""}}function Zc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ti:return"Fragment";case Ni:return"Portal";case Yc:return"Profiler";case Cf:return"StrictMode";case Qc:return"Suspense";case Xc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case By:return(t.displayName||"Context")+".Consumer";case Fy:return(t._context.displayName||"Context")+".Provider";case bf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mf:return e=t.displayName||null,e!==null?e:Zc(t.type)||"Memo";case Zn:e=t._payload,t=t._init;try{return Zc(t(e))}catch{}}return null}function Dk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zc(e);case 8:return e===Cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jk(t){var e=Vy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function il(t){t._valueTracker||(t._valueTracker=jk(t))}function Hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ed(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Uy(t,e){e=e.checked,e!=null&&Ef(t,"checked",e,!1)}function td(t,e){Uy(t,e);var n=wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nd(t,e.type,n):e.hasOwnProperty("defaultValue")&&nd(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nd(t,e,n){(e!=="number"||Hl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vo=Array.isArray;function Vi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(Vo(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function Wy(t,e){var n=wr(e.value),r=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ep(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ky(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ky(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ol,Jy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ol=ol||document.createElement("div"),ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ps(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ak=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){Ak.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function qy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function Gy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=qy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ik=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(t,e){if(e){if(Ik[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function Nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ad=null,Hi=null,Ui=null;function Cp(t){if(t=Us(t)){if(typeof ad!="function")throw Error(P(280));var e=t.stateNode;e&&(e=Fa(e),ad(t.stateNode,t.type,e))}}function Yy(t){Hi?Ui?Ui.push(t):Ui=[t]:Hi=t}function Qy(){if(Hi){var t=Hi,e=Ui;if(Ui=Hi=null,Cp(t),e)for(t=0;t<e.length;t++)Cp(e[t])}}function Xy(t,e){return t(e)}function Zy(){}var Qu=!1;function e0(t,e,n){if(Qu)return t(e,n);Qu=!0;try{return Xy(t,e,n)}finally{Qu=!1,(Hi!==null||Ui!==null)&&(Zy(),Qy())}}function ms(t,e){var n=t.stateNode;if(n===null)return null;var r=Fa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var ud=!1;if(Bn)try{var To={};Object.defineProperty(To,"passive",{get:function(){ud=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{ud=!1}function Lk(t,e,n,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Yo=!1,Ul=null,Wl=!1,cd=null,_k={onError:function(t){Yo=!0,Ul=t}};function zk(t,e,n,r,i,o,s,l,a){Yo=!1,Ul=null,Lk.apply(_k,arguments)}function Fk(t,e,n,r,i,o,s,l,a){if(zk.apply(this,arguments),Yo){if(Yo){var u=Ul;Yo=!1,Ul=null}else throw Error(P(198));Wl||(Wl=!0,cd=u)}}function yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bp(t){if(yi(t)!==t)throw Error(P(188))}function Bk(t){var e=t.alternate;if(!e){if(e=yi(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return bp(i),t;if(o===r)return bp(i),e;o=o.sibling}throw Error(P(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function n0(t){return t=Bk(t),t!==null?r0(t):null}function r0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r0(t);if(e!==null)return e;t=t.sibling}return null}var i0=At.unstable_scheduleCallback,Mp=At.unstable_cancelCallback,$k=At.unstable_shouldYield,Vk=At.unstable_requestPaint,Ne=At.unstable_now,Hk=At.unstable_getCurrentPriorityLevel,Tf=At.unstable_ImmediatePriority,o0=At.unstable_UserBlockingPriority,Kl=At.unstable_NormalPriority,Uk=At.unstable_LowPriority,s0=At.unstable_IdlePriority,Ia=null,Cn=null;function Wk(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Ia,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:qk,Kk=Math.log,Jk=Math.LN2;function qk(t){return t>>>=0,t===0?32:31-(Kk(t)/Jk|0)|0}var sl=64,ll=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Ho(l):(o&=s,o!==0&&(r=Ho(o)))}else s=n&~i,s!==0?r=Ho(s):o!==0&&(r=Ho(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),i=1<<n,r|=t[n],e&=~i;return r}function Gk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-cn(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=Gk(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l0(){var t=sl;return sl<<=1,!(sl&4194240)&&(sl=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function Qk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Of(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ie=0;function a0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u0,Pf,c0,d0,f0,fd=!1,al=[],dr=null,fr=null,hr=null,gs=new Map,ys=new Map,rr=[],Xk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Np(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":gs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(e.pointerId)}}function Oo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Us(e),e!==null&&Pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Zk(t,e,n,r,i){switch(e){case"focusin":return dr=Oo(dr,t,e,n,r,i),!0;case"dragenter":return fr=Oo(fr,t,e,n,r,i),!0;case"mouseover":return hr=Oo(hr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return gs.set(o,Oo(gs.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ys.set(o,Oo(ys.get(o)||null,t,e,n,r,i)),!0}return!1}function h0(t){var e=Ur(t.target);if(e!==null){var n=yi(e);if(n!==null){if(e=n.tag,e===13){if(e=t0(n),e!==null){t.blockedOn=e,f0(t.priority,function(){c0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ld=r,n.target.dispatchEvent(r),ld=null}else return e=Us(n),e!==null&&Pf(e),t.blockedOn=n,!1;e.shift()}return!0}function Tp(t,e,n){Pl(t)&&n.delete(e)}function ew(){fd=!1,dr!==null&&Pl(dr)&&(dr=null),fr!==null&&Pl(fr)&&(fr=null),hr!==null&&Pl(hr)&&(hr=null),gs.forEach(Tp),ys.forEach(Tp)}function Po(t,e){t.blockedOn===e&&(t.blockedOn=null,fd||(fd=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,ew)))}function vs(t){function e(i){return Po(i,t)}if(0<al.length){Po(al[0],t);for(var n=1;n<al.length;n++){var r=al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dr!==null&&Po(dr,t),fr!==null&&Po(fr,t),hr!==null&&Po(hr,t),gs.forEach(e),ys.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)h0(n),n.blockedOn===null&&rr.shift()}var Wi=Un.ReactCurrentBatchConfig,ql=!0;function tw(t,e,n,r){var i=ie,o=Wi.transition;Wi.transition=null;try{ie=1,Rf(t,e,n,r)}finally{ie=i,Wi.transition=o}}function nw(t,e,n,r){var i=ie,o=Wi.transition;Wi.transition=null;try{ie=4,Rf(t,e,n,r)}finally{ie=i,Wi.transition=o}}function Rf(t,e,n,r){if(ql){var i=hd(t,e,n,r);if(i===null)ac(t,e,r,Gl,n),Np(t,r);else if(Zk(i,t,e,n,r))r.stopPropagation();else if(Np(t,r),e&4&&-1<Xk.indexOf(t)){for(;i!==null;){var o=Us(i);if(o!==null&&u0(o),o=hd(t,e,n,r),o===null&&ac(t,e,r,Gl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ac(t,e,r,null,n)}}var Gl=null;function hd(t,e,n,r){if(Gl=null,t=Nf(r),t=Ur(t),t!==null)if(e=yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gl=t,null}function p0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hk()){case Tf:return 1;case o0:return 4;case Kl:case Uk:return 16;case s0:return 536870912;default:return 16}default:return 16}}var sr=null,Df=null,Rl=null;function m0(){if(Rl)return Rl;var t,e=Df,n=e.length,r,i="value"in sr?sr.value:sr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Rl=i.slice(t,1<r?1-r:void 0)}function Dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ul(){return!0}function Op(){return!1}function Lt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ul:Op,this.isPropagationStopped=Op,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jf=Lt(yo),Hs=xe({},yo,{view:0,detail:0}),rw=Lt(Hs),Zu,ec,Ro,La=xe({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Af,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(Zu=t.screenX-Ro.screenX,ec=t.screenY-Ro.screenY):ec=Zu=0,Ro=t),Zu)},movementY:function(t){return"movementY"in t?t.movementY:ec}}),Pp=Lt(La),iw=xe({},La,{dataTransfer:0}),ow=Lt(iw),sw=xe({},Hs,{relatedTarget:0}),tc=Lt(sw),lw=xe({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),aw=Lt(lw),uw=xe({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cw=Lt(uw),dw=xe({},yo,{data:0}),Rp=Lt(dw),fw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pw[t])?!!e[t]:!1}function Af(){return mw}var gw=xe({},Hs,{key:function(t){if(t.key){var e=fw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Af,charCode:function(t){return t.type==="keypress"?Dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yw=Lt(gw),vw=xe({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dp=Lt(vw),xw=xe({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Af}),Sw=Lt(xw),kw=xe({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ww=Lt(kw),Ew=xe({},La,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cw=Lt(Ew),bw=[9,13,27,32],If=Bn&&"CompositionEvent"in window,Qo=null;Bn&&"documentMode"in document&&(Qo=document.documentMode);var Mw=Bn&&"TextEvent"in window&&!Qo,g0=Bn&&(!If||Qo&&8<Qo&&11>=Qo),jp=String.fromCharCode(32),Ap=!1;function y0(t,e){switch(t){case"keyup":return bw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oi=!1;function Nw(t,e){switch(t){case"compositionend":return v0(e);case"keypress":return e.which!==32?null:(Ap=!0,jp);case"textInput":return t=e.data,t===jp&&Ap?null:t;default:return null}}function Tw(t,e){if(Oi)return t==="compositionend"||!If&&y0(t,e)?(t=m0(),Rl=Df=sr=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g0&&e.locale!=="ko"?null:e.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ow[t.type]:e==="textarea"}function x0(t,e,n,r){Yy(r),e=Yl(e,"onChange"),0<e.length&&(n=new jf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xo=null,xs=null;function Pw(t){P0(t,0)}function _a(t){var e=Di(t);if(Hy(e))return t}function Rw(t,e){if(t==="change")return e}var S0=!1;if(Bn){var nc;if(Bn){var rc="oninput"in document;if(!rc){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),rc=typeof Lp.oninput=="function"}nc=rc}else nc=!1;S0=nc&&(!document.documentMode||9<document.documentMode)}function _p(){Xo&&(Xo.detachEvent("onpropertychange",k0),xs=Xo=null)}function k0(t){if(t.propertyName==="value"&&_a(xs)){var e=[];x0(e,xs,t,Nf(t)),e0(Pw,e)}}function Dw(t,e,n){t==="focusin"?(_p(),Xo=e,xs=n,Xo.attachEvent("onpropertychange",k0)):t==="focusout"&&_p()}function jw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _a(xs)}function Aw(t,e){if(t==="click")return _a(e)}function Iw(t,e){if(t==="input"||t==="change")return _a(e)}function Lw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:Lw;function Ss(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gc.call(e,i)||!hn(t[i],e[i]))return!1}return!0}function zp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fp(t,e){var n=zp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zp(n)}}function w0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?w0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function E0(){for(var t=window,e=Hl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hl(t.document)}return e}function Lf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _w(t){var e=E0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&w0(n.ownerDocument.documentElement,n)){if(r!==null&&Lf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Fp(n,o);var s=Fp(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zw=Bn&&"documentMode"in document&&11>=document.documentMode,Pi=null,pd=null,Zo=null,md=!1;function Bp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;md||Pi==null||Pi!==Hl(r)||(r=Pi,"selectionStart"in r&&Lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&Ss(Zo,r)||(Zo=r,r=Yl(pd,"onSelect"),0<r.length&&(e=new jf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pi)))}function cl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ri={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},ic={},C0={};Bn&&(C0=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function za(t){if(ic[t])return ic[t];if(!Ri[t])return t;var e=Ri[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C0)return ic[t]=e[n];return t}var b0=za("animationend"),M0=za("animationiteration"),N0=za("animationstart"),T0=za("transitionend"),O0=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){O0.set(t,e),gi(e,[t])}for(var oc=0;oc<$p.length;oc++){var sc=$p[oc],Fw=sc.toLowerCase(),Bw=sc[0].toUpperCase()+sc.slice(1);Mr(Fw,"on"+Bw)}Mr(b0,"onAnimationEnd");Mr(M0,"onAnimationIteration");Mr(N0,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(T0,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$w=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Vp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Fk(r,e,void 0,t),t.currentTarget=null}function P0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Vp(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Vp(i,l,u),o=a}}}if(Wl)throw t=cd,Wl=!1,cd=null,t}function he(t,e){var n=e[Sd];n===void 0&&(n=e[Sd]=new Set);var r=t+"__bubble";n.has(r)||(R0(e,t,2,!1),n.add(r))}function lc(t,e,n){var r=0;e&&(r|=4),R0(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function ks(t){if(!t[dl]){t[dl]=!0,zy.forEach(function(n){n!=="selectionchange"&&($w.has(n)||lc(n,!1,t),lc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,lc("selectionchange",!1,e))}}function R0(t,e,n,r){switch(p0(e)){case 1:var i=tw;break;case 4:i=nw;break;default:i=Rf}n=i.bind(null,e,n,t),i=void 0,!ud||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ac(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Ur(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}e0(function(){var u=o,c=Nf(n),d=[];e:{var f=O0.get(t);if(f!==void 0){var m=jf,h=t;switch(t){case"keypress":if(Dl(n)===0)break e;case"keydown":case"keyup":m=yw;break;case"focusin":h="focus",m=tc;break;case"focusout":h="blur",m=tc;break;case"beforeblur":case"afterblur":m=tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ow;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Sw;break;case b0:case M0:case N0:m=aw;break;case T0:m=ww;break;case"scroll":m=rw;break;case"wheel":m=Cw;break;case"copy":case"cut":case"paste":m=cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dp}var g=(e&4)!==0,x=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,k;v!==null;){k=v;var S=k.stateNode;if(k.tag===5&&S!==null&&(k=S,y!==null&&(S=ms(v,y),S!=null&&g.push(ws(v,S,k)))),x)break;v=v.return}0<g.length&&(f=new m(f,h,null,n,c),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==ld&&(h=n.relatedTarget||n.fromElement)&&(Ur(h)||h[$n]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(h=n.relatedTarget||n.toElement,m=u,h=h?Ur(h):null,h!==null&&(x=yi(h),h!==x||h.tag!==5&&h.tag!==6)&&(h=null)):(m=null,h=u),m!==h)){if(g=Pp,S="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Dp,S="onPointerLeave",y="onPointerEnter",v="pointer"),x=m==null?f:Di(m),k=h==null?f:Di(h),f=new g(S,v+"leave",m,n,c),f.target=x,f.relatedTarget=k,S=null,Ur(c)===u&&(g=new g(y,v+"enter",h,n,c),g.target=k,g.relatedTarget=x,S=g),x=S,m&&h)t:{for(g=m,y=h,v=0,k=g;k;k=wi(k))v++;for(k=0,S=y;S;S=wi(S))k++;for(;0<v-k;)g=wi(g),v--;for(;0<k-v;)y=wi(y),k--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=wi(g),y=wi(y)}g=null}else g=null;m!==null&&Hp(d,f,m,g,!1),h!==null&&x!==null&&Hp(d,x,h,g,!0)}}e:{if(f=u?Di(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var b=Rw;else if(Ip(f))if(S0)b=Iw;else{b=jw;var N=Dw}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Aw);if(b&&(b=b(t,u))){x0(d,b,n,c);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&nd(f,"number",f.value)}switch(N=u?Di(u):window,t){case"focusin":(Ip(N)||N.contentEditable==="true")&&(Pi=N,pd=u,Zo=null);break;case"focusout":Zo=pd=Pi=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,Bp(d,n,c);break;case"selectionchange":if(zw)break;case"keydown":case"keyup":Bp(d,n,c)}var M;if(If)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Oi?y0(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(g0&&n.locale!=="ko"&&(Oi||R!=="onCompositionStart"?R==="onCompositionEnd"&&Oi&&(M=m0()):(sr=c,Df="value"in sr?sr.value:sr.textContent,Oi=!0)),N=Yl(u,R),0<N.length&&(R=new Rp(R,t,null,n,c),d.push({event:R,listeners:N}),M?R.data=M:(M=v0(n),M!==null&&(R.data=M)))),(M=Mw?Nw(t,n):Tw(t,n))&&(u=Yl(u,"onBeforeInput"),0<u.length&&(c=new Rp("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=M))}P0(d,e)})}function ws(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ms(t,n),o!=null&&r.unshift(ws(t,o,i)),o=ms(t,e),o!=null&&r.push(ws(t,o,i))),t=t.return}return r}function wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hp(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ms(n,o),a!=null&&s.unshift(ws(n,a,l))):i||(a=ms(n,o),a!=null&&s.push(ws(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Vw=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function Up(t){return(typeof t=="string"?t:""+t).replace(Vw,`
`).replace(Hw,"")}function fl(t,e,n){if(e=Up(e),Up(t)!==e&&n)throw Error(P(425))}function Ql(){}var gd=null,yd=null;function vd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,Ww=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(t){return Wp.resolve(null).then(t).catch(Kw)}:xd;function Kw(t){setTimeout(function(){throw t})}function uc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vs(e)}function pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),Sn="__reactFiber$"+vo,Es="__reactProps$"+vo,$n="__reactContainer$"+vo,Sd="__reactEvents$"+vo,Jw="__reactListeners$"+vo,qw="__reactHandles$"+vo;function Ur(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kp(t);t!==null;){if(n=t[Sn])return n;t=Kp(t)}return e}t=n,n=t.parentNode}return null}function Us(t){return t=t[Sn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function Fa(t){return t[Es]||null}var kd=[],ji=-1;function Nr(t){return{current:t}}function pe(t){0>ji||(t.current=kd[ji],kd[ji]=null,ji--)}function fe(t,e){ji++,kd[ji]=t.current,t.current=e}var Er={},st=Nr(Er),wt=Nr(!1),si=Er;function eo(t,e){var n=t.type.contextTypes;if(!n)return Er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Et(t){return t=t.childContextTypes,t!=null}function Xl(){pe(wt),pe(st)}function Jp(t,e,n){if(st.current!==Er)throw Error(P(168));fe(st,e),fe(wt,n)}function D0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(P(108,Dk(t)||"Unknown",i));return xe({},n,r)}function Zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,si=st.current,fe(st,t),fe(wt,wt.current),!0}function qp(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=D0(t,e,si),r.__reactInternalMemoizedMergedChildContext=t,pe(wt),pe(st),fe(st,t)):pe(wt),fe(wt,n)}var An=null,Ba=!1,cc=!1;function j0(t){An===null?An=[t]:An.push(t)}function Gw(t){Ba=!0,j0(t)}function Tr(){if(!cc&&An!==null){cc=!0;var t=0,e=ie;try{var n=An;for(ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}An=null,Ba=!1}catch(i){throw An!==null&&(An=An.slice(t+1)),i0(Tf,Tr),i}finally{ie=e,cc=!1}}return null}var Ai=[],Ii=0,ea=null,ta=0,Ht=[],Ut=0,li=null,In=1,Ln="";function Fr(t,e){Ai[Ii++]=ta,Ai[Ii++]=ea,ea=t,ta=e}function A0(t,e,n){Ht[Ut++]=In,Ht[Ut++]=Ln,Ht[Ut++]=li,li=t;var r=In;t=Ln;var i=32-cn(r)-1;r&=~(1<<i),n+=1;var o=32-cn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,In=1<<32-cn(e)+i|n<<i|r,Ln=o+t}else In=1<<o|n<<i|r,Ln=t}function _f(t){t.return!==null&&(Fr(t,1),A0(t,1,0))}function zf(t){for(;t===ea;)ea=Ai[--Ii],Ai[Ii]=null,ta=Ai[--Ii],Ai[Ii]=null;for(;t===li;)li=Ht[--Ut],Ht[Ut]=null,Ln=Ht[--Ut],Ht[Ut]=null,In=Ht[--Ut],Ht[Ut]=null}var Dt=null,Rt=null,me=!1,ln=null;function I0(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=li!==null?{id:In,overflow:Ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Rt=null,!0):!1;default:return!1}}function wd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ed(t){if(me){var e=Rt;if(e){var n=e;if(!Gp(t,e)){if(wd(t))throw Error(P(418));e=pr(n.nextSibling);var r=Dt;e&&Gp(t,e)?I0(r,n):(t.flags=t.flags&-4097|2,me=!1,Dt=t)}}else{if(wd(t))throw Error(P(418));t.flags=t.flags&-4097|2,me=!1,Dt=t}}}function Yp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function hl(t){if(t!==Dt)return!1;if(!me)return Yp(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vd(t.type,t.memoizedProps)),e&&(e=Rt)){if(wd(t))throw L0(),Error(P(418));for(;e;)I0(t,e),e=pr(e.nextSibling)}if(Yp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Dt?pr(t.stateNode.nextSibling):null;return!0}function L0(){for(var t=Rt;t;)t=pr(t.nextSibling)}function to(){Rt=Dt=null,me=!1}function Ff(t){ln===null?ln=[t]:ln.push(t)}var Yw=Un.ReactCurrentBatchConfig;function rn(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var na=Nr(null),ra=null,Li=null,Bf=null;function $f(){Bf=Li=ra=null}function Vf(t){var e=na.current;pe(na),t._currentValue=e}function Cd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ki(t,e){ra=t,Bf=Li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(Bf!==t)if(t={context:t,memoizedValue:e,next:null},Li===null){if(ra===null)throw Error(P(308));Li=t,ra.dependencies={lanes:0,firstContext:t}}else Li=Li.next=t;return e}var Wr=null;function Hf(t){Wr===null?Wr=[t]:Wr.push(t)}function _0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var er=!1;function Uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vn(t,n)}return i=r.interleaved,i===null?(e.next=e,Hf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vn(t,n)}function jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}function Qp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ia(t,e,n,r){var i=t.updateQueue;er=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;s=0,c=u=a=null,l=o;do{var f=l.lane,m=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=t,g=l;switch(f=e,m=n,g.tag){case 1:if(h=g.payload,typeof h=="function"){d=h.call(m,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,f=typeof h=="function"?h.call(m,d,f):h,f==null)break e;d=xe({},d,f);break e;case 2:er=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=m,a=d):c=c.next=m,s|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ui|=s,t.lanes=s,t.memoizedState=d}}function Xp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(P(191,i));i.call(r)}}}var F0=new _y.Component().refs;function bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $a={isMounted:function(t){return(t=t._reactInternals)?yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ht(),i=yr(t),o=_n(r,i);o.payload=e,n!=null&&(o.callback=n),e=mr(t,o,i),e!==null&&(dn(e,t,i,r),jl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ht(),i=yr(t),o=_n(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=mr(t,o,i),e!==null&&(dn(e,t,i,r),jl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ht(),r=yr(t),i=_n(n,r);i.tag=2,e!=null&&(i.callback=e),e=mr(t,i,r),e!==null&&(dn(e,t,r,n),jl(e,t,r))}};function Zp(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ss(n,r)||!Ss(i,o):!0}function B0(t,e,n){var r=!1,i=Er,o=e.contextType;return typeof o=="object"&&o!==null?o=Gt(o):(i=Et(e)?si:st.current,r=e.contextTypes,o=(r=r!=null)?eo(t,i):Er),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$a,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function em(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$a.enqueueReplaceState(e,e.state,null)}function Md(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=F0,Uf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Gt(o):(o=Et(e)?si:st.current,i.context=eo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(bd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$a.enqueueReplaceState(i,i.state,null),ia(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Do(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;l===F0&&(l=i.refs={}),s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function pl(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tm(t){var e=t._init;return e(t._payload)}function $0(t){function e(y,v){if(t){var k=y.deletions;k===null?(y.deletions=[v],y.flags|=16):k.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=vr(y,v),y.index=0,y.sibling=null,y}function o(y,v,k){return y.index=k,t?(k=y.alternate,k!==null?(k=k.index,k<v?(y.flags|=2,v):k):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,v,k,S){return v===null||v.tag!==6?(v=yc(k,y.mode,S),v.return=y,v):(v=i(v,k),v.return=y,v)}function a(y,v,k,S){var b=k.type;return b===Ti?c(y,v,k.props.children,S,k.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Zn&&tm(b)===v.type)?(S=i(v,k.props),S.ref=Do(y,v,k),S.return=y,S):(S=Fl(k.type,k.key,k.props,null,y.mode,S),S.ref=Do(y,v,k),S.return=y,S)}function u(y,v,k,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==k.containerInfo||v.stateNode.implementation!==k.implementation?(v=vc(k,y.mode,S),v.return=y,v):(v=i(v,k.children||[]),v.return=y,v)}function c(y,v,k,S,b){return v===null||v.tag!==7?(v=Zr(k,y.mode,S,b),v.return=y,v):(v=i(v,k),v.return=y,v)}function d(y,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return v=yc(""+v,y.mode,k),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rl:return k=Fl(v.type,v.key,v.props,null,y.mode,k),k.ref=Do(y,null,v),k.return=y,k;case Ni:return v=vc(v,y.mode,k),v.return=y,v;case Zn:var S=v._init;return d(y,S(v._payload),k)}if(Vo(v)||No(v))return v=Zr(v,y.mode,k,null),v.return=y,v;pl(y,v)}return null}function f(y,v,k,S){var b=v!==null?v.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return b!==null?null:l(y,v,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case rl:return k.key===b?a(y,v,k,S):null;case Ni:return k.key===b?u(y,v,k,S):null;case Zn:return b=k._init,f(y,v,b(k._payload),S)}if(Vo(k)||No(k))return b!==null?null:c(y,v,k,S,null);pl(y,k)}return null}function m(y,v,k,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(k)||null,l(v,y,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rl:return y=y.get(S.key===null?k:S.key)||null,a(v,y,S,b);case Ni:return y=y.get(S.key===null?k:S.key)||null,u(v,y,S,b);case Zn:var N=S._init;return m(y,v,k,N(S._payload),b)}if(Vo(S)||No(S))return y=y.get(k)||null,c(v,y,S,b,null);pl(v,S)}return null}function h(y,v,k,S){for(var b=null,N=null,M=v,R=v=0,D=null;M!==null&&R<k.length;R++){M.index>R?(D=M,M=null):D=M.sibling;var F=f(y,M,k[R],S);if(F===null){M===null&&(M=D);break}t&&M&&F.alternate===null&&e(y,M),v=o(F,v,R),N===null?b=F:N.sibling=F,N=F,M=D}if(R===k.length)return n(y,M),me&&Fr(y,R),b;if(M===null){for(;R<k.length;R++)M=d(y,k[R],S),M!==null&&(v=o(M,v,R),N===null?b=M:N.sibling=M,N=M);return me&&Fr(y,R),b}for(M=r(y,M);R<k.length;R++)D=m(M,y,R,k[R],S),D!==null&&(t&&D.alternate!==null&&M.delete(D.key===null?R:D.key),v=o(D,v,R),N===null?b=D:N.sibling=D,N=D);return t&&M.forEach(function(ee){return e(y,ee)}),me&&Fr(y,R),b}function g(y,v,k,S){var b=No(k);if(typeof b!="function")throw Error(P(150));if(k=b.call(k),k==null)throw Error(P(151));for(var N=b=null,M=v,R=v=0,D=null,F=k.next();M!==null&&!F.done;R++,F=k.next()){M.index>R?(D=M,M=null):D=M.sibling;var ee=f(y,M,F.value,S);if(ee===null){M===null&&(M=D);break}t&&M&&ee.alternate===null&&e(y,M),v=o(ee,v,R),N===null?b=ee:N.sibling=ee,N=ee,M=D}if(F.done)return n(y,M),me&&Fr(y,R),b;if(M===null){for(;!F.done;R++,F=k.next())F=d(y,F.value,S),F!==null&&(v=o(F,v,R),N===null?b=F:N.sibling=F,N=F);return me&&Fr(y,R),b}for(M=r(y,M);!F.done;R++,F=k.next())F=m(M,y,R,F.value,S),F!==null&&(t&&F.alternate!==null&&M.delete(F.key===null?R:F.key),v=o(F,v,R),N===null?b=F:N.sibling=F,N=F);return t&&M.forEach(function(Ae){return e(y,Ae)}),me&&Fr(y,R),b}function x(y,v,k,S){if(typeof k=="object"&&k!==null&&k.type===Ti&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case rl:e:{for(var b=k.key,N=v;N!==null;){if(N.key===b){if(b=k.type,b===Ti){if(N.tag===7){n(y,N.sibling),v=i(N,k.props.children),v.return=y,y=v;break e}}else if(N.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Zn&&tm(b)===N.type){n(y,N.sibling),v=i(N,k.props),v.ref=Do(y,N,k),v.return=y,y=v;break e}n(y,N);break}else e(y,N);N=N.sibling}k.type===Ti?(v=Zr(k.props.children,y.mode,S,k.key),v.return=y,y=v):(S=Fl(k.type,k.key,k.props,null,y.mode,S),S.ref=Do(y,v,k),S.return=y,y=S)}return s(y);case Ni:e:{for(N=k.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===k.containerInfo&&v.stateNode.implementation===k.implementation){n(y,v.sibling),v=i(v,k.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=vc(k,y.mode,S),v.return=y,y=v}return s(y);case Zn:return N=k._init,x(y,v,N(k._payload),S)}if(Vo(k))return h(y,v,k,S);if(No(k))return g(y,v,k,S);pl(y,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,k),v.return=y,y=v):(n(y,v),v=yc(k,y.mode,S),v.return=y,y=v),s(y)):n(y,v)}return x}var no=$0(!0),V0=$0(!1),Ws={},bn=Nr(Ws),Cs=Nr(Ws),bs=Nr(Ws);function Kr(t){if(t===Ws)throw Error(P(174));return t}function Wf(t,e){switch(fe(bs,e),fe(Cs,t),fe(bn,Ws),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=id(e,t)}pe(bn),fe(bn,e)}function ro(){pe(bn),pe(Cs),pe(bs)}function H0(t){Kr(bs.current);var e=Kr(bn.current),n=id(e,t.type);e!==n&&(fe(Cs,t),fe(bn,n))}function Kf(t){Cs.current===t&&(pe(bn),pe(Cs))}var ye=Nr(0);function oa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dc=[];function Jf(){for(var t=0;t<dc.length;t++)dc[t]._workInProgressVersionPrimary=null;dc.length=0}var Al=Un.ReactCurrentDispatcher,fc=Un.ReactCurrentBatchConfig,ai=0,ve=null,Ie=null,Fe=null,sa=!1,es=!1,Ms=0,Qw=0;function tt(){throw Error(P(321))}function qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function Gf(t,e,n,r,i,o){if(ai=o,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Al.current=t===null||t.memoizedState===null?tE:nE,t=n(r,i),es){o=0;do{if(es=!1,Ms=0,25<=o)throw Error(P(301));o+=1,Fe=Ie=null,e.updateQueue=null,Al.current=rE,t=n(r,i)}while(es)}if(Al.current=la,e=Ie!==null&&Ie.next!==null,ai=0,Fe=Ie=ve=null,sa=!1,e)throw Error(P(300));return t}function Yf(){var t=Ms!==0;return Ms=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ve.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Yt(){if(Ie===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=Fe===null?ve.memoizedState:Fe.next;if(e!==null)Fe=e,Ie=t;else{if(t===null)throw Error(P(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Fe===null?ve.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Ns(t,e){return typeof e=="function"?e(t):e}function hc(t){var e=Yt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=Ie,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((ai&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,s=r):a=a.next=d,ve.lanes|=c,ui|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,hn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ve.lanes|=o,ui|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pc(t){var e=Yt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);hn(o,e.memoizedState)||(kt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function U0(){}function W0(t,e){var n=ve,r=Yt(),i=e(),o=!hn(r.memoizedState,i);if(o&&(r.memoizedState=i,kt=!0),r=r.queue,Qf(q0.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Ts(9,J0.bind(null,n,r,i,e),void 0,null),$e===null)throw Error(P(349));ai&30||K0(n,e,i)}return i}function K0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J0(t,e,n,r){e.value=n,e.getSnapshot=r,G0(e)&&Y0(t)}function q0(t,e,n){return n(function(){G0(e)&&Y0(t)})}function G0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function Y0(t){var e=Vn(t,1);e!==null&&dn(e,t,1,-1)}function nm(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},e.queue=t,t=t.dispatch=eE.bind(null,ve,t),[e.memoizedState,t]}function Ts(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Q0(){return Yt().memoizedState}function Il(t,e,n,r){var i=vn();ve.flags|=t,i.memoizedState=Ts(1|e,n,void 0,r===void 0?null:r)}function Va(t,e,n,r){var i=Yt();r=r===void 0?null:r;var o=void 0;if(Ie!==null){var s=Ie.memoizedState;if(o=s.destroy,r!==null&&qf(r,s.deps)){i.memoizedState=Ts(e,n,o,r);return}}ve.flags|=t,i.memoizedState=Ts(1|e,n,o,r)}function rm(t,e){return Il(8390656,8,t,e)}function Qf(t,e){return Va(2048,8,t,e)}function X0(t,e){return Va(4,2,t,e)}function Z0(t,e){return Va(4,4,t,e)}function e1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function t1(t,e,n){return n=n!=null?n.concat([t]):null,Va(4,4,e1.bind(null,e,t),n)}function Xf(){}function n1(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function r1(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function i1(t,e,n){return ai&21?(hn(n,e)||(n=l0(),ve.lanes|=n,ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function Xw(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var r=fc.transition;fc.transition={};try{t(!1),e()}finally{ie=n,fc.transition=r}}function o1(){return Yt().memoizedState}function Zw(t,e,n){var r=yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},s1(t))l1(e,n);else if(n=_0(t,e,n,r),n!==null){var i=ht();dn(n,t,r,i),a1(n,e,r)}}function eE(t,e,n){var r=yr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(s1(t))l1(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,hn(l,s)){var a=e.interleaved;a===null?(i.next=i,Hf(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=_0(t,e,i,r),n!==null&&(i=ht(),dn(n,t,r,i),a1(n,e,r))}}function s1(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function l1(t,e){es=sa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function a1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Of(t,n)}}var la={readContext:Gt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},tE={readContext:Gt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:rm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Il(4194308,4,e1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Il(4194308,4,t,e)},useInsertionEffect:function(t,e){return Il(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Zw.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:nm,useDebugValue:Xf,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=nm(!1),e=t[0];return t=Xw.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=vn();if(me){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),$e===null)throw Error(P(349));ai&30||K0(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,rm(q0.bind(null,r,o,t),[t]),r.flags|=2048,Ts(9,J0.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=vn(),e=$e.identifierPrefix;if(me){var n=Ln,r=In;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ms++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nE={readContext:Gt,useCallback:n1,useContext:Gt,useEffect:Qf,useImperativeHandle:t1,useInsertionEffect:X0,useLayoutEffect:Z0,useMemo:r1,useReducer:hc,useRef:Q0,useState:function(){return hc(Ns)},useDebugValue:Xf,useDeferredValue:function(t){var e=Yt();return i1(e,Ie.memoizedState,t)},useTransition:function(){var t=hc(Ns)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:U0,useSyncExternalStore:W0,useId:o1,unstable_isNewReconciler:!1},rE={readContext:Gt,useCallback:n1,useContext:Gt,useEffect:Qf,useImperativeHandle:t1,useInsertionEffect:X0,useLayoutEffect:Z0,useMemo:r1,useReducer:pc,useRef:Q0,useState:function(){return pc(Ns)},useDebugValue:Xf,useDeferredValue:function(t){var e=Yt();return Ie===null?e.memoizedState=t:i1(e,Ie.memoizedState,t)},useTransition:function(){var t=pc(Ns)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:U0,useSyncExternalStore:W0,useId:o1,unstable_isNewReconciler:!1};function io(t,e){try{var n="",r=e;do n+=Rk(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iE=typeof WeakMap=="function"?WeakMap:Map;function u1(t,e,n){n=_n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ua||(ua=!0,_d=r),Nd(t,e)},n}function c1(t,e,n){n=_n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Nd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nd(t,e),typeof r!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function im(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=vE.bind(null,t,e,n),e.then(t,t))}function om(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_n(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var oE=Un.ReactCurrentOwner,kt=!1;function dt(t,e,n,r){e.child=t===null?V0(e,null,n,r):no(e,t.child,n,r)}function lm(t,e,n,r,i){n=n.render;var o=e.ref;return Ki(e,i),r=Gf(t,e,n,r,o,i),n=Yf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hn(t,e,i)):(me&&n&&_f(e),e.flags|=1,dt(t,e,r,i),e.child)}function am(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!sh(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,d1(t,e,o,r,i)):(t=Fl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ss,n(s,r)&&t.ref===e.ref)return Hn(t,e,i)}return e.flags|=1,t=vr(o,r),t.ref=e.ref,t.return=e,e.child=t}function d1(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ss(o,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Hn(t,e,i)}return Td(t,e,n,r,i)}function f1(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(zi,Ot),Ot|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(zi,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,fe(zi,Ot),Ot|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,fe(zi,Ot),Ot|=r;return dt(t,e,i,n),e.child}function h1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Td(t,e,n,r,i){var o=Et(n)?si:st.current;return o=eo(e,o),Ki(e,i),n=Gf(t,e,n,r,o,i),r=Yf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hn(t,e,i)):(me&&r&&_f(e),e.flags|=1,dt(t,e,n,i),e.child)}function um(t,e,n,r,i){if(Et(n)){var o=!0;Zl(e)}else o=!1;if(Ki(e,i),e.stateNode===null)Ll(t,e),B0(e,n,r),Md(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gt(u):(u=Et(n)?si:st.current,u=eo(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&em(e,s,r,u),er=!1;var f=e.memoizedState;s.state=f,ia(e,r,s,i),a=e.memoizedState,l!==r||f!==a||wt.current||er?(typeof c=="function"&&(bd(e,n,c,r),a=e.memoizedState),(l=er||Zp(e,n,l,r,f,a,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,z0(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:rn(e.type,l),s.props=u,d=e.pendingProps,f=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Gt(a):(a=Et(n)?si:st.current,a=eo(e,a));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||f!==a)&&em(e,s,r,a),er=!1,f=e.memoizedState,s.state=f,ia(e,r,s,i);var h=e.memoizedState;l!==d||f!==h||wt.current||er?(typeof m=="function"&&(bd(e,n,m,r),h=e.memoizedState),(u=er||Zp(e,n,u,r,f,h,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,h,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,h,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Od(t,e,n,r,o,i)}function Od(t,e,n,r,i,o){h1(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&qp(e,n,!1),Hn(t,e,o);r=e.stateNode,oE.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=no(e,t.child,null,o),e.child=no(e,null,l,o)):dt(t,e,l,o),e.memoizedState=r.state,i&&qp(e,n,!0),e.child}function p1(t){var e=t.stateNode;e.pendingContext?Jp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jp(t,e.context,!1),Wf(t,e.containerInfo)}function cm(t,e,n,r,i){return to(),Ff(i),e.flags|=256,dt(t,e,n,r),e.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Rd(t){return{baseLanes:t,cachePool:null,transitions:null}}function m1(t,e,n){var r=e.pendingProps,i=ye.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fe(ye,i&1),t===null)return Ed(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Wa(s,r,0,null),t=Zr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Rd(n),e.memoizedState=Pd,t):Zf(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return sE(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=vr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=vr(l,o):(o=Zr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Rd(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Pd,r}return o=t.child,t=o.sibling,r=vr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zf(t,e){return e=Wa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ml(t,e,n,r){return r!==null&&Ff(r),no(e,t.child,null,n),t=Zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sE(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=mc(Error(P(422))),ml(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Wa({mode:"visible",children:r.children},i,0,null),o=Zr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&no(e,t.child,null,s),e.child.memoizedState=Rd(s),e.memoizedState=Pd,o);if(!(e.mode&1))return ml(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(P(419)),r=mc(o,r,void 0),ml(t,e,s,r)}if(l=(s&t.childLanes)!==0,kt||l){if(r=$e,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Vn(t,i),dn(r,t,i,-1))}return oh(),r=mc(Error(P(421))),ml(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=xE.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Rt=pr(i.nextSibling),Dt=e,me=!0,ln=null,t!==null&&(Ht[Ut++]=In,Ht[Ut++]=Ln,Ht[Ut++]=li,In=t.id,Ln=t.overflow,li=e),e=Zf(e,r.children),e.flags|=4096,e)}function dm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cd(t.return,e,n)}function gc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function g1(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(dt(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dm(t,n,e);else if(t.tag===19)dm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&oa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&oa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gc(e,!0,n,null,o);break;case"together":gc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lE(t,e,n){switch(e.tag){case 3:p1(e),to();break;case 5:H0(e);break;case 1:Et(e.type)&&Zl(e);break;case 4:Wf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fe(na,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?m1(t,e,n):(fe(ye,ye.current&1),t=Hn(t,e,n),t!==null?t.sibling:null);fe(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return g1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fe(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,f1(t,e,n)}return Hn(t,e,n)}var y1,Dd,v1,x1;y1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};v1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Kr(bn.current);var o=null;switch(n){case"input":i=ed(t,i),r=ed(t,r),o=[];break;case"select":i=xe({},i,{value:void 0}),r=xe({},r,{value:void 0}),o=[];break;case"textarea":i=rd(t,i),r=rd(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ql)}od(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hs.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hs.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&he("scroll",t),o||l===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};x1=function(t,e,n,r){n!==r&&(e.flags|=4)};function jo(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aE(t,e,n){var r=e.pendingProps;switch(zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return Et(e.type)&&Xl(),nt(e),null;case 3:return r=e.stateNode,ro(),pe(wt),pe(st),Jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(Bd(ln),ln=null))),Dd(t,e),nt(e),null;case 5:Kf(e);var i=Kr(bs.current);if(n=e.type,t!==null&&e.stateNode!=null)v1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return nt(e),null}if(t=Kr(bn.current),hl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Sn]=e,r[Es]=o,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<Uo.length;i++)he(Uo[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Sp(r,o),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},he("invalid",r);break;case"textarea":wp(r,o),he("invalid",r)}od(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&fl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&fl(r.textContent,l,t),i=["children",""+l]):hs.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&he("scroll",r)}switch(n){case"input":il(r),kp(r,o,!0);break;case"textarea":il(r),Ep(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ql)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ky(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Sn]=e,t[Es]=r,y1(t,e,!1,!1),e.stateNode=t;e:{switch(s=sd(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uo.length;i++)he(Uo[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":Sp(t,r),i=ed(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=xe({},r,{value:void 0}),he("invalid",t);break;case"textarea":wp(t,r),i=rd(t,r),he("invalid",t);break;default:i=r}od(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Gy(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Jy(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ps(t,a):typeof a=="number"&&ps(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(hs.hasOwnProperty(o)?a!=null&&o==="onScroll"&&he("scroll",t):a!=null&&Ef(t,o,a,s))}switch(n){case"input":il(t),kp(t,r,!1);break;case"textarea":il(t),Ep(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vi(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)x1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=Kr(bs.current),Kr(bn.current),hl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(o=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:fl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return nt(e),null;case 13:if(pe(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&Rt!==null&&e.mode&1&&!(e.flags&128))L0(),to(),e.flags|=98560,o=!1;else if(o=hl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(P(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(P(317));o[Sn]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),o=!1}else ln!==null&&(Bd(ln),ln=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?_e===0&&(_e=3):oh())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return ro(),Dd(t,e),t===null&&ks(e.stateNode.containerInfo),nt(e),null;case 10:return Vf(e.type._context),nt(e),null;case 17:return Et(e.type)&&Xl(),nt(e),null;case 19:if(pe(ye),o=e.memoizedState,o===null)return nt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)jo(o,!1);else{if(_e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=oa(t),s!==null){for(e.flags|=128,jo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(ye,ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ne()>oo&&(e.flags|=128,r=!0,jo(o,!1),e.lanes=4194304)}else{if(!r)if(t=oa(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!me)return nt(e),null}else 2*Ne()-o.renderingStartTime>oo&&n!==1073741824&&(e.flags|=128,r=!0,jo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ne(),e.sibling=null,n=ye.current,fe(ye,r?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return ih(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function uE(t,e){switch(zf(e),e.tag){case 1:return Et(e.type)&&Xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),pe(wt),pe(st),Jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kf(e),null;case 13:if(pe(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(ye),null;case 4:return ro(),null;case 10:return Vf(e.type._context),null;case 22:case 23:return ih(),null;case 24:return null;default:return null}}var gl=!1,ot=!1,cE=typeof WeakSet=="function"?WeakSet:Set,L=null;function _i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function jd(t,e,n){try{n()}catch(r){ke(t,e,r)}}var fm=!1;function dE(t,e){if(gd=ql,t=E0(),Lf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(a=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=s),f===o&&++c===r&&(a=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:t,selectionRange:n},ql=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,x=h.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:rn(e.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(S){ke(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return h=fm,fm=!1,h}function ts(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&jd(e,n,o)}i=i.next}while(i!==r)}}function Ha(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ad(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function S1(t){var e=t.alternate;e!==null&&(t.alternate=null,S1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[Es],delete e[Sd],delete e[Jw],delete e[qw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k1(t){return t.tag===5||t.tag===3||t.tag===4}function hm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ql));else if(r!==4&&(t=t.child,t!==null))for(Id(t,e,n),t=t.sibling;t!==null;)Id(t,e,n),t=t.sibling}function Ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ld(t,e,n),t=t.sibling;t!==null;)Ld(t,e,n),t=t.sibling}var qe=null,on=!1;function Yn(t,e,n){for(n=n.child;n!==null;)w1(t,e,n),n=n.sibling}function w1(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Ia,n)}catch{}switch(n.tag){case 5:ot||_i(n,e);case 6:var r=qe,i=on;qe=null,Yn(t,e,n),qe=r,on=i,qe!==null&&(on?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(on?(t=qe,n=n.stateNode,t.nodeType===8?uc(t.parentNode,n):t.nodeType===1&&uc(t,n),vs(t)):uc(qe,n.stateNode));break;case 4:r=qe,i=on,qe=n.stateNode.containerInfo,on=!0,Yn(t,e,n),qe=r,on=i;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&jd(n,e,s),i=i.next}while(i!==r)}Yn(t,e,n);break;case 1:if(!ot&&(_i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Yn(t,e,n),ot=r):Yn(t,e,n);break;default:Yn(t,e,n)}}function pm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cE),e.forEach(function(r){var i=SE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,on=!1;break e;case 3:qe=l.stateNode.containerInfo,on=!0;break e;case 4:qe=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(qe===null)throw Error(P(160));w1(o,s,i),qe=null,on=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ke(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E1(e,t),e=e.sibling}function E1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),yn(t),r&4){try{ts(3,t,t.return),Ha(3,t)}catch(g){ke(t,t.return,g)}try{ts(5,t,t.return)}catch(g){ke(t,t.return,g)}}break;case 1:nn(e,t),yn(t),r&512&&n!==null&&_i(n,n.return);break;case 5:if(nn(e,t),yn(t),r&512&&n!==null&&_i(n,n.return),t.flags&32){var i=t.stateNode;try{ps(i,"")}catch(g){ke(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Uy(i,o),sd(l,s);var u=sd(l,o);for(s=0;s<a.length;s+=2){var c=a[s],d=a[s+1];c==="style"?Gy(i,d):c==="dangerouslySetInnerHTML"?Jy(i,d):c==="children"?ps(i,d):Ef(i,c,d,u)}switch(l){case"input":td(i,o);break;case"textarea":Wy(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Vi(i,!!o.multiple,m,!1):f!==!!o.multiple&&(o.defaultValue!=null?Vi(i,!!o.multiple,o.defaultValue,!0):Vi(i,!!o.multiple,o.multiple?[]:"",!1))}i[Es]=o}catch(g){ke(t,t.return,g)}}break;case 6:if(nn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(P(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){ke(t,t.return,g)}}break;case 3:if(nn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vs(e.containerInfo)}catch(g){ke(t,t.return,g)}break;case 4:nn(e,t),yn(t);break;case 13:nn(e,t),yn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(nh=Ne())),r&4&&pm(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(u=ot)||c,nn(e,t),ot=u):nn(e,t),yn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(L=t,c=t.child;c!==null;){for(d=L=c;L!==null;){switch(f=L,m=f.child,f.tag){case 0:case 11:case 14:case 15:ts(4,f,f.return);break;case 1:_i(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(g){ke(r,n,g)}}break;case 5:_i(f,f.return);break;case 22:if(f.memoizedState!==null){gm(d);continue}}m!==null?(m.return=f,L=m):gm(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,a=d.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=qy("display",s))}catch(g){ke(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){ke(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nn(e,t),yn(t),r&4&&pm(t);break;case 21:break;default:nn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(k1(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ps(i,""),r.flags&=-33);var o=hm(t);Ld(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=hm(t);Id(t,l,s);break;default:throw Error(P(161))}}catch(a){ke(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fE(t,e,n){L=t,C1(t)}function C1(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var i=L,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||gl;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||ot;l=gl;var u=ot;if(gl=s,(ot=a)&&!u)for(L=i;L!==null;)s=L,a=s.child,s.tag===22&&s.memoizedState!==null?ym(i):a!==null?(a.return=s,L=a):ym(i);for(;o!==null;)L=o,C1(o),o=o.sibling;L=i,gl=l,ot=u}mm(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,L=o):mm(t)}}function mm(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||Ha(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Xp(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xp(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&vs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ot||e.flags&512&&Ad(e)}catch(f){ke(e,e.return,f)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function gm(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function ym(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ha(4,e)}catch(a){ke(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ke(e,i,a)}}var o=e.return;try{Ad(e)}catch(a){ke(e,o,a)}break;case 5:var s=e.return;try{Ad(e)}catch(a){ke(e,s,a)}}}catch(a){ke(e,e.return,a)}if(e===t){L=null;break}var l=e.sibling;if(l!==null){l.return=e.return,L=l;break}L=e.return}}var hE=Math.ceil,aa=Un.ReactCurrentDispatcher,eh=Un.ReactCurrentOwner,Jt=Un.ReactCurrentBatchConfig,ne=0,$e=null,Pe=null,Xe=0,Ot=0,zi=Nr(0),_e=0,Os=null,ui=0,Ua=0,th=0,ns=null,St=null,nh=0,oo=1/0,Dn=null,ua=!1,_d=null,gr=null,yl=!1,lr=null,ca=0,rs=0,zd=null,_l=-1,zl=0;function ht(){return ne&6?Ne():_l!==-1?_l:_l=Ne()}function yr(t){return t.mode&1?ne&2&&Xe!==0?Xe&-Xe:Yw.transition!==null?(zl===0&&(zl=l0()),zl):(t=ie,t!==0||(t=window.event,t=t===void 0?16:p0(t.type)),t):1}function dn(t,e,n,r){if(50<rs)throw rs=0,zd=null,Error(P(185));Vs(t,n,r),(!(ne&2)||t!==$e)&&(t===$e&&(!(ne&2)&&(Ua|=n),_e===4&&ir(t,Xe)),Ct(t,r),n===1&&ne===0&&!(e.mode&1)&&(oo=Ne()+500,Ba&&Tr()))}function Ct(t,e){var n=t.callbackNode;Yk(t,e);var r=Jl(t,t===$e?Xe:0);if(r===0)n!==null&&Mp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mp(n),e===1)t.tag===0?Gw(vm.bind(null,t)):j0(vm.bind(null,t)),Ww(function(){!(ne&6)&&Tr()}),n=null;else{switch(a0(r)){case 1:n=Tf;break;case 4:n=o0;break;case 16:n=Kl;break;case 536870912:n=s0;break;default:n=Kl}n=D1(n,b1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function b1(t,e){if(_l=-1,zl=0,ne&6)throw Error(P(327));var n=t.callbackNode;if(Ji()&&t.callbackNode!==n)return null;var r=Jl(t,t===$e?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=da(t,r);else{e=r;var i=ne;ne|=2;var o=N1();($e!==t||Xe!==e)&&(Dn=null,oo=Ne()+500,Xr(t,e));do try{gE();break}catch(l){M1(t,l)}while(1);$f(),aa.current=o,ne=i,Pe!==null?e=0:($e=null,Xe=0,e=_e)}if(e!==0){if(e===2&&(i=dd(t),i!==0&&(r=i,e=Fd(t,i))),e===1)throw n=Os,Xr(t,0),ir(t,r),Ct(t,Ne()),n;if(e===6)ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!pE(i)&&(e=da(t,r),e===2&&(o=dd(t),o!==0&&(r=o,e=Fd(t,o))),e===1))throw n=Os,Xr(t,0),ir(t,r),Ct(t,Ne()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Br(t,St,Dn);break;case 3:if(ir(t,r),(r&130023424)===r&&(e=nh+500-Ne(),10<e)){if(Jl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xd(Br.bind(null,t,St,Dn),e);break}Br(t,St,Dn);break;case 4:if(ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-cn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hE(r/1960))-r,10<r){t.timeoutHandle=xd(Br.bind(null,t,St,Dn),r);break}Br(t,St,Dn);break;case 5:Br(t,St,Dn);break;default:throw Error(P(329))}}}return Ct(t,Ne()),t.callbackNode===n?b1.bind(null,t):null}function Fd(t,e){var n=ns;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=da(t,e),t!==2&&(e=St,St=n,e!==null&&Bd(e)),t}function Bd(t){St===null?St=t:St.push.apply(St,t)}function pE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!hn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~th,e&=~Ua,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function vm(t){if(ne&6)throw Error(P(327));Ji();var e=Jl(t,0);if(!(e&1))return Ct(t,Ne()),null;var n=da(t,e);if(t.tag!==0&&n===2){var r=dd(t);r!==0&&(e=r,n=Fd(t,r))}if(n===1)throw n=Os,Xr(t,0),ir(t,e),Ct(t,Ne()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Br(t,St,Dn),Ct(t,Ne()),null}function rh(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(oo=Ne()+500,Ba&&Tr())}}function ci(t){lr!==null&&lr.tag===0&&!(ne&6)&&Ji();var e=ne;ne|=1;var n=Jt.transition,r=ie;try{if(Jt.transition=null,ie=1,t)return t()}finally{ie=r,Jt.transition=n,ne=e,!(ne&6)&&Tr()}}function ih(){Ot=zi.current,pe(zi)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Uw(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xl();break;case 3:ro(),pe(wt),pe(st),Jf();break;case 5:Kf(r);break;case 4:ro();break;case 13:pe(ye);break;case 19:pe(ye);break;case 10:Vf(r.type._context);break;case 22:case 23:ih()}n=n.return}if($e=t,Pe=t=vr(t.current,null),Xe=Ot=e,_e=0,Os=null,th=Ua=ui=0,St=ns=null,Wr!==null){for(e=0;e<Wr.length;e++)if(n=Wr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Wr=null}return t}function M1(t,e){do{var n=Pe;try{if($f(),Al.current=la,sa){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sa=!1}if(ai=0,Fe=Ie=ve=null,es=!1,Ms=0,eh.current=null,n===null||n.return===null){_e=1,Os=e,Pe=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Xe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=om(s);if(m!==null){m.flags&=-257,sm(m,s,l,o,e),m.mode&1&&im(o,u,e),e=m,a=u;var h=e.updateQueue;if(h===null){var g=new Set;g.add(a),e.updateQueue=g}else h.add(a);break e}else{if(!(e&1)){im(o,u,e),oh();break e}a=Error(P(426))}}else if(me&&l.mode&1){var x=om(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),sm(x,s,l,o,e),Ff(io(a,l));break e}}o=a=io(a,l),_e!==4&&(_e=2),ns===null?ns=[o]:ns.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=u1(o,a,e);Qp(o,y);break e;case 1:l=a;var v=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(gr===null||!gr.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=c1(o,l,e);Qp(o,S);break e}}o=o.return}while(o!==null)}O1(n)}catch(b){e=b,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(1)}function N1(){var t=aa.current;return aa.current=la,t===null?la:t}function oh(){(_e===0||_e===3||_e===2)&&(_e=4),$e===null||!(ui&268435455)&&!(Ua&268435455)||ir($e,Xe)}function da(t,e){var n=ne;ne|=2;var r=N1();($e!==t||Xe!==e)&&(Dn=null,Xr(t,e));do try{mE();break}catch(i){M1(t,i)}while(1);if($f(),ne=n,aa.current=r,Pe!==null)throw Error(P(261));return $e=null,Xe=0,_e}function mE(){for(;Pe!==null;)T1(Pe)}function gE(){for(;Pe!==null&&!$k();)T1(Pe)}function T1(t){var e=R1(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?O1(t):Pe=e,eh.current=null}function O1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uE(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_e=6,Pe=null;return}}else if(n=aE(n,e,Ot),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);_e===0&&(_e=5)}function Br(t,e,n){var r=ie,i=Jt.transition;try{Jt.transition=null,ie=1,yE(t,e,n,r)}finally{Jt.transition=i,ie=r}return null}function yE(t,e,n,r){do Ji();while(lr!==null);if(ne&6)throw Error(P(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Qk(t,o),t===$e&&(Pe=$e=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,D1(Kl,function(){return Ji(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Jt.transition,Jt.transition=null;var s=ie;ie=1;var l=ne;ne|=4,eh.current=null,dE(t,n),E1(n,t),_w(yd),ql=!!gd,yd=gd=null,t.current=n,fE(n),Vk(),ne=l,ie=s,Jt.transition=o}else t.current=n;if(yl&&(yl=!1,lr=t,ca=i),o=t.pendingLanes,o===0&&(gr=null),Wk(n.stateNode),Ct(t,Ne()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ua)throw ua=!1,t=_d,_d=null,t;return ca&1&&t.tag!==0&&Ji(),o=t.pendingLanes,o&1?t===zd?rs++:(rs=0,zd=t):rs=0,Tr(),null}function Ji(){if(lr!==null){var t=a0(ca),e=Jt.transition,n=ie;try{if(Jt.transition=null,ie=16>t?16:t,lr===null)var r=!1;else{if(t=lr,lr=null,ca=0,ne&6)throw Error(P(331));var i=ne;for(ne|=4,L=t.current;L!==null;){var o=L,s=o.child;if(L.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(L=u;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:ts(8,c,o)}var d=c.child;if(d!==null)d.return=c,L=d;else for(;L!==null;){c=L;var f=c.sibling,m=c.return;if(S1(c),c===u){L=null;break}if(f!==null){f.return=m,L=f;break}L=m}}}var h=o.alternate;if(h!==null){var g=h.child;if(g!==null){h.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}L=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,L=s;else e:for(;L!==null;){if(o=L,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ts(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,L=y;break e}L=o.return}}var v=t.current;for(L=v;L!==null;){s=L;var k=s.child;if(s.subtreeFlags&2064&&k!==null)k.return=s,L=k;else e:for(s=v;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ha(9,l)}}catch(b){ke(l,l.return,b)}if(l===s){L=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,L=S;break e}L=l.return}}if(ne=i,Tr(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Ia,t)}catch{}r=!0}return r}finally{ie=n,Jt.transition=e}}return!1}function xm(t,e,n){e=io(n,e),e=u1(t,e,1),t=mr(t,e,1),e=ht(),t!==null&&(Vs(t,1,e),Ct(t,e))}function ke(t,e,n){if(t.tag===3)xm(t,t,n);else for(;e!==null;){if(e.tag===3){xm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gr===null||!gr.has(r))){t=io(n,t),t=c1(e,t,1),e=mr(e,t,1),t=ht(),e!==null&&(Vs(e,1,t),Ct(e,t));break}}e=e.return}}function vE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Xe&n)===n&&(_e===4||_e===3&&(Xe&130023424)===Xe&&500>Ne()-nh?Xr(t,0):th|=n),Ct(t,e)}function P1(t,e){e===0&&(t.mode&1?(e=ll,ll<<=1,!(ll&130023424)&&(ll=4194304)):e=1);var n=ht();t=Vn(t,e),t!==null&&(Vs(t,e,n),Ct(t,n))}function xE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P1(t,n)}function SE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),P1(t,n)}var R1;R1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,lE(t,e,n);kt=!!(t.flags&131072)}else kt=!1,me&&e.flags&1048576&&A0(e,ta,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ll(t,e),t=e.pendingProps;var i=eo(e,st.current);Ki(e,n),i=Gf(null,e,r,t,i,n);var o=Yf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(o=!0,Zl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uf(e),i.updater=$a,e.stateNode=i,i._reactInternals=e,Md(e,r,t,n),e=Od(null,e,r,!0,o,n)):(e.tag=0,me&&o&&_f(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ll(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wE(r),t=rn(r,t),i){case 0:e=Td(null,e,r,t,n);break e;case 1:e=um(null,e,r,t,n);break e;case 11:e=lm(null,e,r,t,n);break e;case 14:e=am(null,e,r,rn(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Td(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),um(t,e,r,i,n);case 3:e:{if(p1(e),t===null)throw Error(P(387));r=e.pendingProps,o=e.memoizedState,i=o.element,z0(t,e),ia(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=io(Error(P(423)),e),e=cm(t,e,r,n,i);break e}else if(r!==i){i=io(Error(P(424)),e),e=cm(t,e,r,n,i);break e}else for(Rt=pr(e.stateNode.containerInfo.firstChild),Dt=e,me=!0,ln=null,n=V0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===i){e=Hn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return H0(e),t===null&&Ed(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,vd(r,i)?s=null:o!==null&&vd(r,o)&&(e.flags|=32),h1(t,e),dt(t,e,s,n),e.child;case 6:return t===null&&Ed(e),null;case 13:return m1(t,e,n);case 4:return Wf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),lm(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,fe(na,r._currentValue),r._currentValue=s,o!==null)if(hn(o.value,s)){if(o.children===i.children&&!wt.current){e=Hn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=_n(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Cd(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(P(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Cd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ki(e,n),i=Gt(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),am(t,e,r,i,n);case 15:return d1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Ll(t,e),e.tag=1,Et(r)?(t=!0,Zl(e)):t=!1,Ki(e,n),B0(e,r,i),Md(e,r,i,n),Od(null,e,r,!0,t,n);case 19:return g1(t,e,n);case 22:return f1(t,e,n)}throw Error(P(156,e.tag))};function D1(t,e){return i0(t,e)}function kE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new kE(t,e,n,r)}function sh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wE(t){if(typeof t=="function")return sh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bf)return 11;if(t===Mf)return 14}return 2}function vr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")sh(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Ti:return Zr(n.children,i,o,e);case Cf:s=8,i|=8;break;case Yc:return t=Wt(12,n,e,i|2),t.elementType=Yc,t.lanes=o,t;case Qc:return t=Wt(13,n,e,i),t.elementType=Qc,t.lanes=o,t;case Xc:return t=Wt(19,n,e,i),t.elementType=Xc,t.lanes=o,t;case $y:return Wa(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fy:s=10;break e;case By:s=9;break e;case bf:s=11;break e;case Mf:s=14;break e;case Zn:s=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Wt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Zr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Wa(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=$y,t.lanes=n,t.stateNode={isHidden:!1},t}function yc(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function vc(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lh(t,e,n,r,i,o,s,l,a){return t=new EE(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Wt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uf(o),t}function CE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function j1(t){if(!t)return Er;t=t._reactInternals;e:{if(yi(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(Et(n))return D0(t,n,e)}return e}function A1(t,e,n,r,i,o,s,l,a){return t=lh(n,r,!0,t,i,o,s,l,a),t.context=j1(null),n=t.current,r=ht(),i=yr(n),o=_n(r,i),o.callback=e??null,mr(n,o,i),t.current.lanes=i,Vs(t,i,r),Ct(t,r),t}function Ka(t,e,n,r){var i=e.current,o=ht(),s=yr(i);return n=j1(n),e.context===null?e.context=n:e.pendingContext=n,e=_n(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mr(i,e,s),t!==null&&(dn(t,i,s,o),jl(t,i,s)),s}function fa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ah(t,e){Sm(t,e),(t=t.alternate)&&Sm(t,e)}function bE(){return null}var I1=typeof reportError=="function"?reportError:function(t){console.error(t)};function uh(t){this._internalRoot=t}Ja.prototype.render=uh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Ka(t,e,null,null)};Ja.prototype.unmount=uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ci(function(){Ka(null,t,null,null)}),e[$n]=null}};function Ja(t){this._internalRoot=t}Ja.prototype.unstable_scheduleHydration=function(t){if(t){var e=d0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&h0(t)}};function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function km(){}function ME(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=fa(s);o.call(u)}}var s=A1(e,r,t,0,null,!1,!1,"",km);return t._reactRootContainer=s,t[$n]=s.current,ks(t.nodeType===8?t.parentNode:t),ci(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=fa(a);l.call(u)}}var a=lh(t,0,!1,null,null,!1,!1,"",km);return t._reactRootContainer=a,t[$n]=a.current,ks(t.nodeType===8?t.parentNode:t),ci(function(){Ka(e,a,n,r)}),a}function Ga(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=fa(s);l.call(a)}}Ka(e,s,t,i)}else s=ME(n,e,t,i,r);return fa(s)}u0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&(Of(e,n|1),Ct(e,Ne()),!(ne&6)&&(oo=Ne()+500,Tr()))}break;case 13:ci(function(){var r=Vn(t,1);if(r!==null){var i=ht();dn(r,t,1,i)}}),ah(t,1)}};Pf=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=ht();dn(e,t,134217728,n)}ah(t,134217728)}};c0=function(t){if(t.tag===13){var e=yr(t),n=Vn(t,e);if(n!==null){var r=ht();dn(n,t,e,r)}ah(t,e)}};d0=function(){return ie};f0=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};ad=function(t,e,n){switch(e){case"input":if(td(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fa(r);if(!i)throw Error(P(90));Hy(r),td(r,i)}}}break;case"textarea":Wy(t,n);break;case"select":e=n.value,e!=null&&Vi(t,!!n.multiple,e,!1)}};Xy=rh;Zy=ci;var NE={usingClientEntryPoint:!1,Events:[Us,Di,Fa,Yy,Qy,rh]},Ao={findFiberByHostInstance:Ur,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},TE={bundleType:Ao.bundleType,version:Ao.version,rendererPackageName:Ao.rendererPackageName,rendererConfig:Ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ao.findFiberByHostInstance||bE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{Ia=vl.inject(TE),Cn=vl}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NE;It.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ch(e))throw Error(P(200));return CE(t,e,null,n)};It.createRoot=function(t,e){if(!ch(t))throw Error(P(299));var n=!1,r="",i=I1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lh(t,1,!1,null,null,n,!1,r,i),t[$n]=e.current,ks(t.nodeType===8?t.parentNode:t),new uh(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=n0(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return ci(t)};It.hydrate=function(t,e,n){if(!qa(e))throw Error(P(200));return Ga(null,t,e,!0,n)};It.hydrateRoot=function(t,e,n){if(!ch(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=I1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=A1(e,null,t,1,n??null,i,!1,o,s),t[$n]=e.current,ks(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ja(e)};It.render=function(t,e,n){if(!qa(e))throw Error(P(200));return Ga(null,t,e,!1,n)};It.unmountComponentAtNode=function(t){if(!qa(t))throw Error(P(40));return t._reactRootContainer?(ci(function(){Ga(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};It.unstable_batchedUpdates=rh;It.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qa(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Ga(t,e,n,!1,r)};It.version="18.2.0-next-9e3b772b8-20220608";function L1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L1)}catch(t){console.error(t)}}L1(),Ay.exports=It;var Ks=Ay.exports;const dh=gf(Ks),OE=Ey({__proto__:null,default:dh},[Ks]);var wm=Ks;qc.createRoot=wm.createRoot,qc.hydrateRoot=wm.hydrateRoot;var _1={exports:{}},z1={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=w;function PE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var RE=typeof Object.is=="function"?Object.is:PE,DE=so.useState,jE=so.useEffect,AE=so.useLayoutEffect,IE=so.useDebugValue;function LE(t,e){var n=e(),r=DE({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return AE(function(){i.value=n,i.getSnapshot=e,xc(i)&&o({inst:i})},[t,n,e]),jE(function(){return xc(i)&&o({inst:i}),t(function(){xc(i)&&o({inst:i})})},[t]),IE(n),n}function xc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!RE(t,n)}catch{return!0}}function _E(t,e){return e()}var zE=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_E:LE;z1.useSyncExternalStore=so.useSyncExternalStore!==void 0?so.useSyncExternalStore:zE;_1.exports=z1;var FE=_1.exports,F1={exports:{}},B1={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=w,BE=FE;function $E(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var VE=typeof Object.is=="function"?Object.is:$E,HE=BE.useSyncExternalStore,UE=Ya.useRef,WE=Ya.useEffect,KE=Ya.useMemo,JE=Ya.useDebugValue;B1.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=UE(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=KE(function(){function a(m){if(!u){if(u=!0,c=m,m=r(m),i!==void 0&&s.hasValue){var h=s.value;if(i(h,m))return d=h}return d=m}if(h=d,VE(c,m))return h;var g=r(m);return i!==void 0&&i(h,g)?h:(c=m,d=g)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return a(e())},f===null?void 0:function(){return a(f())}]},[e,n,r,i]);var l=HE(t,o[0],o[1]);return WE(function(){s.hasValue=!0,s.value=l},[l]),JE(l),l};F1.exports=B1;var qE=F1.exports;function GE(t){t()}let $1=GE;const YE=t=>$1=t,QE=()=>$1,Em=Symbol.for("react-redux-context"),Cm=typeof globalThis<"u"?globalThis:{};function XE(){var t;if(!w.createContext)return{};const e=(t=Cm[Em])!=null?t:Cm[Em]=new Map;let n=e.get(w.createContext);return n||(n=w.createContext(null),e.set(w.createContext,n)),n}const Cr=XE();function fh(t=Cr){return function(){return w.useContext(t)}}const V1=fh(),ZE=()=>{throw new Error("uSES not initialized!")};let H1=ZE;const eC=t=>{H1=t},tC=(t,e)=>t===e;function nC(t=Cr){const e=t===Cr?V1:fh(t);return function(r,i={}){const{equalityFn:o=tC,stabilityCheck:s=void 0,noopCheck:l=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:c,stabilityCheck:d,noopCheck:f}=e();w.useRef(!0);const m=w.useCallback({[r.name](g){return r(g)}}[r.name],[r,d,s]),h=H1(u.addNestedSub,a.getState,c||a.getState,m,o);return w.useDebugValue(h),h}}const re=nC();var U1={exports:{}},oe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=typeof Symbol=="function"&&Symbol.for,hh=We?Symbol.for("react.element"):60103,ph=We?Symbol.for("react.portal"):60106,Qa=We?Symbol.for("react.fragment"):60107,Xa=We?Symbol.for("react.strict_mode"):60108,Za=We?Symbol.for("react.profiler"):60114,eu=We?Symbol.for("react.provider"):60109,tu=We?Symbol.for("react.context"):60110,mh=We?Symbol.for("react.async_mode"):60111,nu=We?Symbol.for("react.concurrent_mode"):60111,ru=We?Symbol.for("react.forward_ref"):60112,iu=We?Symbol.for("react.suspense"):60113,rC=We?Symbol.for("react.suspense_list"):60120,ou=We?Symbol.for("react.memo"):60115,su=We?Symbol.for("react.lazy"):60116,iC=We?Symbol.for("react.block"):60121,oC=We?Symbol.for("react.fundamental"):60117,sC=We?Symbol.for("react.responder"):60118,lC=We?Symbol.for("react.scope"):60119;function _t(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hh:switch(t=t.type,t){case mh:case nu:case Qa:case Za:case Xa:case iu:return t;default:switch(t=t&&t.$$typeof,t){case tu:case ru:case su:case ou:case eu:return t;default:return e}}case ph:return e}}}function W1(t){return _t(t)===nu}oe.AsyncMode=mh;oe.ConcurrentMode=nu;oe.ContextConsumer=tu;oe.ContextProvider=eu;oe.Element=hh;oe.ForwardRef=ru;oe.Fragment=Qa;oe.Lazy=su;oe.Memo=ou;oe.Portal=ph;oe.Profiler=Za;oe.StrictMode=Xa;oe.Suspense=iu;oe.isAsyncMode=function(t){return W1(t)||_t(t)===mh};oe.isConcurrentMode=W1;oe.isContextConsumer=function(t){return _t(t)===tu};oe.isContextProvider=function(t){return _t(t)===eu};oe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hh};oe.isForwardRef=function(t){return _t(t)===ru};oe.isFragment=function(t){return _t(t)===Qa};oe.isLazy=function(t){return _t(t)===su};oe.isMemo=function(t){return _t(t)===ou};oe.isPortal=function(t){return _t(t)===ph};oe.isProfiler=function(t){return _t(t)===Za};oe.isStrictMode=function(t){return _t(t)===Xa};oe.isSuspense=function(t){return _t(t)===iu};oe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qa||t===nu||t===Za||t===Xa||t===iu||t===rC||typeof t=="object"&&t!==null&&(t.$$typeof===su||t.$$typeof===ou||t.$$typeof===eu||t.$$typeof===tu||t.$$typeof===ru||t.$$typeof===oC||t.$$typeof===sC||t.$$typeof===lC||t.$$typeof===iC)};oe.typeOf=_t;U1.exports=oe;var aC=U1.exports,K1=aC,uC={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J1={};J1[K1.ForwardRef]=uC;J1[K1.Memo]=cC;var ae={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh=Symbol.for("react.element"),yh=Symbol.for("react.portal"),lu=Symbol.for("react.fragment"),au=Symbol.for("react.strict_mode"),uu=Symbol.for("react.profiler"),cu=Symbol.for("react.provider"),du=Symbol.for("react.context"),dC=Symbol.for("react.server_context"),fu=Symbol.for("react.forward_ref"),hu=Symbol.for("react.suspense"),pu=Symbol.for("react.suspense_list"),mu=Symbol.for("react.memo"),gu=Symbol.for("react.lazy"),fC=Symbol.for("react.offscreen"),q1;q1=Symbol.for("react.module.reference");function Xt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case gh:switch(t=t.type,t){case lu:case uu:case au:case hu:case pu:return t;default:switch(t=t&&t.$$typeof,t){case dC:case du:case fu:case gu:case mu:case cu:return t;default:return e}}case yh:return e}}}ae.ContextConsumer=du;ae.ContextProvider=cu;ae.Element=gh;ae.ForwardRef=fu;ae.Fragment=lu;ae.Lazy=gu;ae.Memo=mu;ae.Portal=yh;ae.Profiler=uu;ae.StrictMode=au;ae.Suspense=hu;ae.SuspenseList=pu;ae.isAsyncMode=function(){return!1};ae.isConcurrentMode=function(){return!1};ae.isContextConsumer=function(t){return Xt(t)===du};ae.isContextProvider=function(t){return Xt(t)===cu};ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===gh};ae.isForwardRef=function(t){return Xt(t)===fu};ae.isFragment=function(t){return Xt(t)===lu};ae.isLazy=function(t){return Xt(t)===gu};ae.isMemo=function(t){return Xt(t)===mu};ae.isPortal=function(t){return Xt(t)===yh};ae.isProfiler=function(t){return Xt(t)===uu};ae.isStrictMode=function(t){return Xt(t)===au};ae.isSuspense=function(t){return Xt(t)===hu};ae.isSuspenseList=function(t){return Xt(t)===pu};ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===lu||t===uu||t===au||t===hu||t===pu||t===fC||typeof t=="object"&&t!==null&&(t.$$typeof===gu||t.$$typeof===mu||t.$$typeof===cu||t.$$typeof===du||t.$$typeof===fu||t.$$typeof===q1||t.getModuleId!==void 0)};ae.typeOf=Xt;function hC(){const t=QE();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const bm={notify(){},get:()=>[]};function pC(t,e){let n,r=bm,i=0,o=!1;function s(g){c();const x=r.subscribe(g);let y=!1;return()=>{y||(y=!0,x(),d())}}function l(){r.notify()}function a(){h.onStateChange&&h.onStateChange()}function u(){return o}function c(){i++,n||(n=e?e.addNestedSub(a):t.subscribe(a),r=hC())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=bm)}function f(){o||(o=!0,c())}function m(){o&&(o=!1,d())}const h={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:a,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>r};return h}const mC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gC=mC?w.useLayoutEffect:w.useEffect;function yC({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:o="once"}){const s=w.useMemo(()=>{const u=pC(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:o}},[t,r,i,o]),l=w.useMemo(()=>t.getState(),[t]);gC(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,l]);const a=e||Cr;return w.createElement(a.Provider,{value:s},n)}function G1(t=Cr){const e=t===Cr?V1:fh(t);return function(){const{store:r}=e();return r}}const vC=G1();function xC(t=Cr){const e=t===Cr?vC:G1(t);return function(){return e().dispatch}}const je=xC();eC(qE.useSyncExternalStoreWithSelector);YE(Ks.unstable_batchedUpdates);/**
 * @remix-run/router v1.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},we.apply(this,arguments)}var be;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(be||(be={}));const Mm="popstate";function SC(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:l}=r.location;return Ps("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fi(i)}return wC(e,n,null,t)}function X(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function di(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kC(){return Math.random().toString(36).substr(2,8)}function Nm(t,e){return{usr:t.state,key:t.key,idx:e}}function Ps(t,e,n,r){return n===void 0&&(n=null),we({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wn(e):e,{state:n,key:e&&e.key||r||kC()})}function fi(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wn(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=be.Pop,a=null,u=c();u==null&&(u=0,s.replaceState(we({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function d(){l=be.Pop;let x=c(),y=x==null?null:x-u;u=x,a&&a({action:l,location:g.location,delta:y})}function f(x,y){l=be.Push;let v=Ps(g.location,x,y);n&&n(v,x),u=c()+1;let k=Nm(v,u),S=g.createHref(v);try{s.pushState(k,"",S)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(S)}o&&a&&a({action:l,location:g.location,delta:1})}function m(x,y){l=be.Replace;let v=Ps(g.location,x,y);n&&n(v,x),u=c();let k=Nm(v,u),S=g.createHref(v);s.replaceState(k,"",S),o&&a&&a({action:l,location:g.location,delta:0})}function h(x){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof x=="string"?x:fi(x);return X(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return l},get location(){return t(i,s)},listen(x){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Mm,d),a=x,()=>{i.removeEventListener(Mm,d),a=null}},createHref(x){return e(i,x)},createURL:h,encodeLocation(x){let y=h(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(x){return s.go(x)}};return g}var Me;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Me||(Me={}));const EC=new Set(["lazy","caseSensitive","path","id","index","children"]);function CC(t){return t.index===!0}function $d(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,o],l=typeof i.id=="string"?i.id:s.join("-");if(X(i.index!==!0||!i.children,"Cannot specify children on an index route"),X(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),CC(i)){let a=we({},i,e(i),{id:l});return r[l]=a,a}else{let a=we({},i,e(i),{id:l,children:void 0});return r[l]=a,i.children&&(a.children=$d(i.children,e,s,r)),a}})}function Fi(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Wn(e):e,i=xo(r.pathname||"/",n);if(i==null)return null;let o=Y1(t);MC(o);let s=null;for(let l=0;s==null&&l<o.length;++l)s=IC(o[l],zC(i));return s}function bC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Y1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let a={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};a.relativePath.startsWith("/")&&(X(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=zn([r,a.relativePath]),c=n.concat(a);o.children&&o.children.length>0&&(X(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Y1(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:jC(u,o.index),routesMeta:c})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let a of Q1(o.path))i(o,s,a)}),e}function Q1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Q1(r.join("/")),l=[];return l.push(...s.map(a=>a===""?o:[o,a].join("/"))),i&&l.push(...s),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function MC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const NC=/^:\w+$/,TC=3,OC=2,PC=1,RC=10,DC=-2,Tm=t=>t==="*";function jC(t,e){let n=t.split("/"),r=n.length;return n.some(Tm)&&(r+=DC),e&&(r+=OC),n.filter(i=>!Tm(i)).reduce((i,o)=>i+(NC.test(o)?TC:o===""?PC:RC),r)}function AC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function IC(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],a=s===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=LC({path:l.relativePath,caseSensitive:l.caseSensitive,end:a},u);if(!c)return null;Object.assign(r,c.params);let d=l.route;o.push({params:r,pathname:zn([i,c.pathname]),pathnameBase:VC(zn([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=zn([i,c.pathnameBase]))}return o}function LC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_C(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:m}=c;if(f==="*"){let g=l[d]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const h=l[d];return m&&!h?u[f]=void 0:u[f]=FC(h||"",f),u},{}),pathname:o,pathnameBase:s,pattern:t}}function _C(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),di(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(s,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zC(t){try{return decodeURI(t)}catch(e){return di(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function FC(t,e){try{return decodeURIComponent(t)}catch(n){return di(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function xo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function BC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wn(t):t;return{pathname:n?n.startsWith("/")?n:$C(n,e):e,search:HC(r),hash:UC(i)}}function $C(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vh(t){return X1(t).map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function xh(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wn(t):(i=we({},t),X(!i.pathname||!i.pathname.includes("?"),Sc("?","pathname","search",i)),X(!i.pathname||!i.pathname.includes("#"),Sc("#","pathname","hash",i)),X(!i.search||!i.search.includes("#"),Sc("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else if(r){let d=e[e.length-1].replace(/^\//,"").split("/");if(s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d.pop();i.pathname=f.join("/")}l="/"+d.join("/")}else{let d=e.length-1;if(s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=BC(i,l),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const zn=t=>t.join("/").replace(/\/\/+/g,"/"),VC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Sh{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Z1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ev=["post","put","patch","delete"],WC=new Set(ev),KC=["get",...ev],JC=new Set(KC),qC=new Set([301,302,303,307,308]),GC=new Set([307,308]),kc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},YC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Io={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},tv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QC=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),nv="remix-router-transitions";function XC(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;X(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let E=t.detectErrorBoundary;i=C=>({hasErrorBoundary:E(C)})}else i=QC;let o={},s=$d(t.routes,i,void 0,o),l,a=t.basename||"/",u=we({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),c=null,d=new Set,f=null,m=null,h=null,g=t.hydrationData!=null,x=Fi(s,t.history.location,a),y=null;if(x==null){let E=$t(404,{pathname:t.history.location.pathname}),{matches:C,route:T}=Lm(s);x=C,y={[T.id]:E}}let v=!x.some(E=>E.route.lazy)&&(!x.some(E=>E.route.loader)||t.hydrationData!=null),k,S={historyAction:t.history.action,location:t.history.location,matches:x,initialized:v,navigation:kc,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},b=be.Pop,N=!1,M,R=!1,D=new Map,F=null,ee=!1,Ae=!1,ze=[],Tn=[],Se=new Map,Jn=0,On=-1,A=new Map,$=new Set,W=new Map,ue=new Map,se=new Set,Ft=new Map,ut=new Map,Lr=!1;function Pn(){if(c=t.history.listen(E=>{let{action:C,location:T,delta:j}=E;if(Lr){Lr=!1;return}di(ut.size===0||j!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let z=cp({currentLocation:S.location,nextLocation:T,historyAction:C});if(z&&j!=null){Lr=!0,t.history.go(j*-1),el(z,{state:"blocked",location:T,proceed(){el(z,{state:"proceeding",proceed:void 0,reset:void 0,location:T}),t.history.go(j)},reset(){let G=new Map(S.blockers);G.set(z,Io),Tt({blockers:G})}});return}return _r(C,T)}),n){ub(e,D);let E=()=>cb(e,D);e.addEventListener("pagehide",E),F=()=>e.removeEventListener("pagehide",E)}return S.initialized||_r(be.Pop,S.location),k}function xi(){c&&c(),F&&F(),d.clear(),M&&M.abort(),S.fetchers.forEach((E,C)=>Zs(C)),S.blockers.forEach((E,C)=>up(C))}function WS(E){return d.add(E),()=>d.delete(E)}function Tt(E,C){C===void 0&&(C={}),S=we({},S,E);let T=[],j=[];u.v7_fetcherPersist&&S.fetchers.forEach((z,G)=>{z.state==="idle"&&(se.has(G)?j.push(G):T.push(G))}),[...d].forEach(z=>z(S,{deletedFetchers:j,unstable_viewTransitionOpts:C.viewTransitionOpts,unstable_flushSync:C.flushSync===!0})),u.v7_fetcherPersist&&(T.forEach(z=>S.fetchers.delete(z)),j.forEach(z=>Zs(z)))}function Eo(E,C,T){var j,z;let{flushSync:G}=T===void 0?{}:T,U=S.actionData!=null&&S.navigation.formMethod!=null&&sn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((j=E.state)==null?void 0:j._isRedirect)!==!0,H;C.actionData?Object.keys(C.actionData).length>0?H=C.actionData:H=null:U?H=S.actionData:H=null;let B=C.loaderData?Im(S.loaderData,C.loaderData,C.matches||[],C.errors):S.loaderData,te=S.blockers;te.size>0&&(te=new Map(te),te.forEach((ce,ge)=>te.set(ge,Io)));let Je=N===!0||S.navigation.formMethod!=null&&sn(S.navigation.formMethod)&&((z=E.state)==null?void 0:z._isRedirect)!==!0;l&&(s=l,l=void 0),ee||b===be.Pop||(b===be.Push?t.history.push(E,E.state):b===be.Replace&&t.history.replace(E,E.state));let Y;if(b===be.Pop){let ce=D.get(S.location.pathname);ce&&ce.has(E.pathname)?Y={currentLocation:S.location,nextLocation:E}:D.has(E.pathname)&&(Y={currentLocation:E,nextLocation:S.location})}else if(R){let ce=D.get(S.location.pathname);ce?ce.add(E.pathname):(ce=new Set([E.pathname]),D.set(S.location.pathname,ce)),Y={currentLocation:S.location,nextLocation:E}}Tt(we({},C,{actionData:H,loaderData:B,historyAction:b,location:E,initialized:!0,navigation:kc,revalidation:"idle",restoreScrollPosition:fp(E,C.matches||S.matches),preventScrollReset:Je,blockers:te}),{viewTransitionOpts:Y,flushSync:G===!0}),b=be.Pop,N=!1,R=!1,ee=!1,Ae=!1,ze=[],Tn=[]}async function rp(E,C){if(typeof E=="number"){t.history.go(E);return}let T=Vd(S.location,S.matches,a,u.v7_prependBasename,E,C==null?void 0:C.fromRouteId,C==null?void 0:C.relative),{path:j,submission:z,error:G}=Om(u.v7_normalizeFormMethod,!1,T,C),U=S.location,H=Ps(S.location,j,C&&C.state);H=we({},H,t.history.encodeLocation(H));let B=C&&C.replace!=null?C.replace:void 0,te=be.Push;B===!0?te=be.Replace:B===!1||z!=null&&sn(z.formMethod)&&z.formAction===S.location.pathname+S.location.search&&(te=be.Replace);let Je=C&&"preventScrollReset"in C?C.preventScrollReset===!0:void 0,Y=(C&&C.unstable_flushSync)===!0,ce=cp({currentLocation:U,nextLocation:H,historyAction:te});if(ce){el(ce,{state:"blocked",location:H,proceed(){el(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),rp(E,C)},reset(){let ge=new Map(S.blockers);ge.set(ce,Io),Tt({blockers:ge})}});return}return await _r(te,H,{submission:z,pendingError:G,preventScrollReset:Je,replace:C&&C.replace,enableViewTransition:C&&C.unstable_viewTransition,flushSync:Y})}function KS(){if($u(),Tt({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){_r(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}_r(b||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation})}}async function _r(E,C,T){M&&M.abort(),M=null,b=E,ee=(T&&T.startUninterruptedRevalidation)===!0,tk(S.location,S.matches),N=(T&&T.preventScrollReset)===!0,R=(T&&T.enableViewTransition)===!0;let j=l||s,z=T&&T.overrideNavigation,G=Fi(j,C,a),U=(T&&T.flushSync)===!0;if(!G){let ge=$t(404,{pathname:C.pathname}),{matches:ct,route:gn}=Lm(j);Vu(),Eo(C,{matches:ct,loaderData:{},errors:{[gn.id]:ge}},{flushSync:U});return}if(S.initialized&&!Ae&&rb(S.location,C)&&!(T&&T.submission&&sn(T.submission.formMethod))){Eo(C,{matches:G},{flushSync:U});return}M=new AbortController;let H=_o(t.history,C,M.signal,T&&T.submission),B,te;if(T&&T.pendingError)te={[is(G).route.id]:T.pendingError};else if(T&&T.submission&&sn(T.submission.formMethod)){let ge=await JS(H,C,T.submission,G,{replace:T.replace,flushSync:U});if(ge.shortCircuited)return;B=ge.pendingActionData,te=ge.pendingActionError,z=wc(C,T.submission),U=!1,H=new Request(H.url,{signal:H.signal})}let{shortCircuited:Je,loaderData:Y,errors:ce}=await qS(H,C,G,z,T&&T.submission,T&&T.fetcherSubmission,T&&T.replace,U,B,te);Je||(M=null,Eo(C,we({matches:G},B?{actionData:B}:{},{loaderData:Y,errors:ce})))}async function JS(E,C,T,j,z){z===void 0&&(z={}),$u();let G=lb(C,T);Tt({navigation:G},{flushSync:z.flushSync===!0});let U,H=Ud(j,C);if(!H.route.action&&!H.route.lazy)U={type:Me.error,error:$t(405,{method:E.method,pathname:C.pathname,routeId:H.route.id})};else if(U=await Lo("action",E,H,j,o,i,a),E.signal.aborted)return{shortCircuited:!0};if(qi(U)){let B;return z&&z.replace!=null?B=z.replace:B=U.location===S.location.pathname+S.location.search,await Co(S,U,{submission:T,replace:B}),{shortCircuited:!0}}if(ss(U)){let B=is(j,H.route.id);return(z&&z.replace)!==!0&&(b=be.Push),{pendingActionData:{},pendingActionError:{[B.route.id]:U.error}}}if(Jr(U))throw $t(400,{type:"defer-action"});return{pendingActionData:{[H.route.id]:U.data}}}async function qS(E,C,T,j,z,G,U,H,B,te){let Je=j||wc(C,z),Y=z||G||Fm(Je),ce=l||s,[ge,ct]=Pm(t.history,S,T,Y,C,Ae,ze,Tn,se,W,$,ce,a,B,te);if(Vu(de=>!(T&&T.some(Bt=>Bt.route.id===de))||ge&&ge.some(Bt=>Bt.route.id===de)),On=++Jn,ge.length===0&&ct.length===0){let de=lp();return Eo(C,we({matches:T,loaderData:{},errors:te||null},B?{actionData:B}:{},de?{fetchers:new Map(S.fetchers)}:{}),{flushSync:H}),{shortCircuited:!0}}if(!ee){ct.forEach(Bt=>{let Oe=S.fetchers.get(Bt.key),zr=zo(void 0,Oe?Oe.data:void 0);S.fetchers.set(Bt.key,zr)});let de=B||S.actionData;Tt(we({navigation:Je},de?Object.keys(de).length===0?{actionData:null}:{actionData:de}:{},ct.length>0?{fetchers:new Map(S.fetchers)}:{}),{flushSync:H})}ct.forEach(de=>{Se.has(de.key)&&Gn(de.key),de.controller&&Se.set(de.key,de.controller)});let gn=()=>ct.forEach(de=>Gn(de.key));M&&M.signal.addEventListener("abort",gn);let{results:Mo,loaderResults:Hu,fetcherResults:Si}=await ip(S.matches,T,ge,ct,E);if(E.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",gn),ct.forEach(de=>Se.delete(de.key));let tn=_m(Mo);if(tn){if(tn.idx>=ge.length){let de=ct[tn.idx-ge.length].key;$.add(de)}return await Co(S,tn.result,{replace:U}),{shortCircuited:!0}}let{loaderData:tl,errors:Uu}=Am(S,T,ge,Hu,te,ct,Si,Ft);Ft.forEach((de,Bt)=>{de.subscribe(Oe=>{(Oe||de.done)&&Ft.delete(Bt)})});let Wu=lp(),Ku=ap(On),ki=Wu||Ku||ct.length>0;return we({loaderData:tl,errors:Uu},ki?{fetchers:new Map(S.fetchers)}:{})}function GS(E,C,T,j){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Se.has(E)&&Gn(E);let z=(j&&j.unstable_flushSync)===!0,G=l||s,U=Vd(S.location,S.matches,a,u.v7_prependBasename,T,C,j==null?void 0:j.relative),H=Fi(G,U,a);if(!H){bo(E,C,$t(404,{pathname:U}),{flushSync:z});return}let{path:B,submission:te,error:Je}=Om(u.v7_normalizeFormMethod,!0,U,j);if(Je){bo(E,C,Je,{flushSync:z});return}let Y=Ud(H,B);if(N=(j&&j.preventScrollReset)===!0,te&&sn(te.formMethod)){YS(E,C,B,Y,H,z,te);return}W.set(E,{routeId:C,path:B}),QS(E,C,B,Y,H,z,te)}async function YS(E,C,T,j,z,G,U){if($u(),W.delete(E),!j.route.action&&!j.route.lazy){let Oe=$t(405,{method:U.formMethod,pathname:T,routeId:C});bo(E,C,Oe,{flushSync:G});return}let H=S.fetchers.get(E);qn(E,ab(U,H),{flushSync:G});let B=new AbortController,te=_o(t.history,T,B.signal,U);Se.set(E,B);let Je=Jn,Y=await Lo("action",te,j,z,o,i,a);if(te.signal.aborted){Se.get(E)===B&&Se.delete(E);return}if(se.has(E)){qn(E,Qn(void 0));return}if(qi(Y))if(Se.delete(E),On>Je){qn(E,Qn(void 0));return}else return $.add(E),qn(E,zo(U)),Co(S,Y,{fetcherSubmission:U});if(ss(Y)){bo(E,C,Y.error);return}if(Jr(Y))throw $t(400,{type:"defer-action"});let ce=S.navigation.location||S.location,ge=_o(t.history,ce,B.signal),ct=l||s,gn=S.navigation.state!=="idle"?Fi(ct,S.navigation.location,a):S.matches;X(gn,"Didn't find any matches after fetcher action");let Mo=++Jn;A.set(E,Mo);let Hu=zo(U,Y.data);S.fetchers.set(E,Hu);let[Si,tn]=Pm(t.history,S,gn,U,ce,Ae,ze,Tn,se,W,$,ct,a,{[j.route.id]:Y.data},void 0);tn.filter(Oe=>Oe.key!==E).forEach(Oe=>{let zr=Oe.key,hp=S.fetchers.get(zr),rk=zo(void 0,hp?hp.data:void 0);S.fetchers.set(zr,rk),Se.has(zr)&&Gn(zr),Oe.controller&&Se.set(zr,Oe.controller)}),Tt({fetchers:new Map(S.fetchers)});let tl=()=>tn.forEach(Oe=>Gn(Oe.key));B.signal.addEventListener("abort",tl);let{results:Uu,loaderResults:Wu,fetcherResults:Ku}=await ip(S.matches,gn,Si,tn,ge);if(B.signal.aborted)return;B.signal.removeEventListener("abort",tl),A.delete(E),Se.delete(E),tn.forEach(Oe=>Se.delete(Oe.key));let ki=_m(Uu);if(ki){if(ki.idx>=Si.length){let Oe=tn[ki.idx-Si.length].key;$.add(Oe)}return Co(S,ki.result)}let{loaderData:de,errors:Bt}=Am(S,S.matches,Si,Wu,void 0,tn,Ku,Ft);if(S.fetchers.has(E)){let Oe=Qn(Y.data);S.fetchers.set(E,Oe)}ap(Mo),S.navigation.state==="loading"&&Mo>On?(X(b,"Expected pending action"),M&&M.abort(),Eo(S.navigation.location,{matches:gn,loaderData:de,errors:Bt,fetchers:new Map(S.fetchers)})):(Tt({errors:Bt,loaderData:Im(S.loaderData,de,gn,Bt),fetchers:new Map(S.fetchers)}),Ae=!1)}async function QS(E,C,T,j,z,G,U){let H=S.fetchers.get(E);qn(E,zo(U,H?H.data:void 0),{flushSync:G});let B=new AbortController,te=_o(t.history,T,B.signal);Se.set(E,B);let Je=Jn,Y=await Lo("loader",te,j,z,o,i,a);if(Jr(Y)&&(Y=await ov(Y,te.signal,!0)||Y),Se.get(E)===B&&Se.delete(E),!te.signal.aborted){if(se.has(E)){qn(E,Qn(void 0));return}if(qi(Y))if(On>Je){qn(E,Qn(void 0));return}else{$.add(E),await Co(S,Y);return}if(ss(Y)){bo(E,C,Y.error);return}X(!Jr(Y),"Unhandled fetcher deferred data"),qn(E,Qn(Y.data))}}async function Co(E,C,T){let{submission:j,fetcherSubmission:z,replace:G}=T===void 0?{}:T;C.revalidate&&(Ae=!0);let U=Ps(E.location,C.location,{_isRedirect:!0});if(X(U,"Expected a location on the redirect navigation"),n){let ce=!1;if(C.reloadDocument)ce=!0;else if(tv.test(C.location)){const ge=t.history.createURL(C.location);ce=ge.origin!==e.location.origin||xo(ge.pathname,a)==null}if(ce){G?e.location.replace(C.location):e.location.assign(C.location);return}}M=null;let H=G===!0?be.Replace:be.Push,{formMethod:B,formAction:te,formEncType:Je}=E.navigation;!j&&!z&&B&&te&&Je&&(j=Fm(E.navigation));let Y=j||z;if(GC.has(C.status)&&Y&&sn(Y.formMethod))await _r(H,U,{submission:we({},Y,{formAction:C.location}),preventScrollReset:N});else{let ce=wc(U,j);await _r(H,U,{overrideNavigation:ce,fetcherSubmission:z,preventScrollReset:N})}}async function ip(E,C,T,j,z){let G=await Promise.all([...T.map(B=>Lo("loader",z,B,C,o,i,a)),...j.map(B=>B.matches&&B.match&&B.controller?Lo("loader",_o(t.history,B.path,B.controller.signal),B.match,B.matches,o,i,a):{type:Me.error,error:$t(404,{pathname:B.path})})]),U=G.slice(0,T.length),H=G.slice(T.length);return await Promise.all([zm(E,T,U,U.map(()=>z.signal),!1,S.loaderData),zm(E,j.map(B=>B.match),H,j.map(B=>B.controller?B.controller.signal:null),!0)]),{results:G,loaderResults:U,fetcherResults:H}}function $u(){Ae=!0,ze.push(...Vu()),W.forEach((E,C)=>{Se.has(C)&&(Tn.push(C),Gn(C))})}function qn(E,C,T){T===void 0&&(T={}),S.fetchers.set(E,C),Tt({fetchers:new Map(S.fetchers)},{flushSync:(T&&T.flushSync)===!0})}function bo(E,C,T,j){j===void 0&&(j={});let z=is(S.matches,C);Zs(E),Tt({errors:{[z.route.id]:T},fetchers:new Map(S.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function op(E){return u.v7_fetcherPersist&&(ue.set(E,(ue.get(E)||0)+1),se.has(E)&&se.delete(E)),S.fetchers.get(E)||YC}function Zs(E){let C=S.fetchers.get(E);Se.has(E)&&!(C&&C.state==="loading"&&A.has(E))&&Gn(E),W.delete(E),A.delete(E),$.delete(E),se.delete(E),S.fetchers.delete(E)}function XS(E){if(u.v7_fetcherPersist){let C=(ue.get(E)||0)-1;C<=0?(ue.delete(E),se.add(E)):ue.set(E,C)}else Zs(E);Tt({fetchers:new Map(S.fetchers)})}function Gn(E){let C=Se.get(E);X(C,"Expected fetch controller: "+E),C.abort(),Se.delete(E)}function sp(E){for(let C of E){let T=op(C),j=Qn(T.data);S.fetchers.set(C,j)}}function lp(){let E=[],C=!1;for(let T of $){let j=S.fetchers.get(T);X(j,"Expected fetcher: "+T),j.state==="loading"&&($.delete(T),E.push(T),C=!0)}return sp(E),C}function ap(E){let C=[];for(let[T,j]of A)if(j<E){let z=S.fetchers.get(T);X(z,"Expected fetcher: "+T),z.state==="loading"&&(Gn(T),A.delete(T),C.push(T))}return sp(C),C.length>0}function ZS(E,C){let T=S.blockers.get(E)||Io;return ut.get(E)!==C&&ut.set(E,C),T}function up(E){S.blockers.delete(E),ut.delete(E)}function el(E,C){let T=S.blockers.get(E)||Io;X(T.state==="unblocked"&&C.state==="blocked"||T.state==="blocked"&&C.state==="blocked"||T.state==="blocked"&&C.state==="proceeding"||T.state==="blocked"&&C.state==="unblocked"||T.state==="proceeding"&&C.state==="unblocked","Invalid blocker state transition: "+T.state+" -> "+C.state);let j=new Map(S.blockers);j.set(E,C),Tt({blockers:j})}function cp(E){let{currentLocation:C,nextLocation:T,historyAction:j}=E;if(ut.size===0)return;ut.size>1&&di(!1,"A router only supports one blocker at a time");let z=Array.from(ut.entries()),[G,U]=z[z.length-1],H=S.blockers.get(G);if(!(H&&H.state==="proceeding")&&U({currentLocation:C,nextLocation:T,historyAction:j}))return G}function Vu(E){let C=[];return Ft.forEach((T,j)=>{(!E||E(j))&&(T.cancel(),C.push(j),Ft.delete(j))}),C}function ek(E,C,T){if(f=E,h=C,m=T||null,!g&&S.navigation===kc){g=!0;let j=fp(S.location,S.matches);j!=null&&Tt({restoreScrollPosition:j})}return()=>{f=null,h=null,m=null}}function dp(E,C){return m&&m(E,C.map(j=>bC(j,S.loaderData)))||E.key}function tk(E,C){if(f&&h){let T=dp(E,C);f[T]=h()}}function fp(E,C){if(f){let T=dp(E,C),j=f[T];if(typeof j=="number")return j}return null}function nk(E){o={},l=$d(E,i,void 0,o)}return k={get basename(){return a},get state(){return S},get routes(){return s},get window(){return e},initialize:Pn,subscribe:WS,enableScrollRestoration:ek,navigate:rp,fetch:GS,revalidate:KS,createHref:E=>t.history.createHref(E),encodeLocation:E=>t.history.encodeLocation(E),getFetcher:op,deleteFetcher:XS,dispose:xi,getBlocker:ZS,deleteBlocker:up,_internalFetchControllers:Se,_internalActiveDeferreds:Ft,_internalSetRoutes:nk},k}function ZC(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Vd(t,e,n,r,i,o,s){let l,a;if(o){l=[];for(let c of e)if(l.push(c),c.route.id===o){a=c;break}}else l=e,a=e[e.length-1];let u=xh(i||".",vh(l),xo(t.pathname,n)||t.pathname,s==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&a&&a.route.index&&!kh(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:zn([n,u.pathname])),fi(u)}function Om(t,e,n,r){if(!r||!ZC(r))return{path:n};if(r.formMethod&&!sb(r.formMethod))return{path:n,error:$t(405,{method:r.formMethod})};let i=()=>({path:n,error:$t(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),l=iv(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!sn(s))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,h)=>{let[g,x]=h;return""+m+g+"="+x+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!sn(s))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}X(typeof FormData=="function","FormData is not available in this environment");let a,u;if(r.formData)a=Hd(r.formData),u=r.formData;else if(r.body instanceof FormData)a=Hd(r.body),u=r.body;else if(r.body instanceof URLSearchParams)a=r.body,u=jm(a);else if(r.body==null)a=new URLSearchParams,u=new FormData;else try{a=new URLSearchParams(r.body),u=jm(a)}catch{return i()}let c={formMethod:s,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(sn(c.formMethod))return{path:n,submission:c};let d=Wn(n);return e&&d.search&&kh(d.search)&&a.append("index",""),d.search="?"+a,{path:fi(d),submission:c}}function eb(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function Pm(t,e,n,r,i,o,s,l,a,u,c,d,f,m,h){let g=h?Object.values(h)[0]:m?Object.values(m)[0]:void 0,x=t.createURL(e.location),y=t.createURL(i),v=h?Object.keys(h)[0]:void 0,S=eb(n,v).filter((N,M)=>{if(N.route.lazy)return!0;if(N.route.loader==null)return!1;if(tb(e.loaderData,e.matches[M],N)||s.some(F=>F===N.route.id))return!0;let R=e.matches[M],D=N;return Rm(N,we({currentUrl:x,currentParams:R.params,nextUrl:y,nextParams:D.params},r,{actionResult:g,defaultShouldRevalidate:o||x.pathname+x.search===y.pathname+y.search||x.search!==y.search||rv(R,D)}))}),b=[];return u.forEach((N,M)=>{if(!n.some(Ae=>Ae.route.id===N.routeId)||a.has(M))return;let R=Fi(d,N.path,f);if(!R){b.push({key:M,routeId:N.routeId,path:N.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(M),F=Ud(R,N.path),ee=!1;c.has(M)?ee=!1:l.includes(M)?ee=!0:D&&D.state!=="idle"&&D.data===void 0?ee=o:ee=Rm(F,we({currentUrl:x,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:g,defaultShouldRevalidate:o})),ee&&b.push({key:M,routeId:N.routeId,path:N.path,matches:R,match:F,controller:new AbortController})}),[S,b]}function tb(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function rv(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Rm(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Dm(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];X(i,"No route found in manifest");let o={};for(let s in r){let a=i[s]!==void 0&&s!=="hasErrorBoundary";di(!a,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!a&&!EC.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,we({},e(i),{lazy:void 0}))}async function Lo(t,e,n,r,i,o,s,l){l===void 0&&(l={});let a,u,c,d=h=>{let g,x=new Promise((y,v)=>g=v);return c=()=>g(),e.signal.addEventListener("abort",c),Promise.race([h({request:e,params:n.params,context:l.requestContext}),x])};try{let h=n.route[t];if(n.route.lazy)if(h){let g,x=await Promise.all([d(h).catch(y=>{g=y}),Dm(n.route,o,i)]);if(g)throw g;u=x[0]}else if(await Dm(n.route,o,i),h=n.route[t],h)u=await d(h);else if(t==="action"){let g=new URL(e.url),x=g.pathname+g.search;throw $t(405,{method:e.method,pathname:x,routeId:n.route.id})}else return{type:Me.data,data:void 0};else if(h)u=await d(h);else{let g=new URL(e.url),x=g.pathname+g.search;throw $t(404,{pathname:x})}X(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){a=Me.error,u=h}finally{c&&e.signal.removeEventListener("abort",c)}if(ob(u)){let h=u.status;if(qC.has(h)){let y=u.headers.get("Location");if(X(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!tv.test(y))y=Vd(new URL(e.url),r.slice(0,r.indexOf(n)+1),s,!0,y);else if(!l.isStaticRequest){let v=new URL(e.url),k=y.startsWith("//")?new URL(v.protocol+y):new URL(y),S=xo(k.pathname,s)!=null;k.origin===v.origin&&S&&(y=k.pathname+k.search+k.hash)}if(l.isStaticRequest)throw u.headers.set("Location",y),u;return{type:Me.redirect,status:h,location:y,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:a===Me.error?Me.error:Me.data,response:u};let g,x=u.headers.get("Content-Type");return x&&/\bapplication\/json\b/.test(x)?g=await u.json():g=await u.text(),a===Me.error?{type:a,error:new Sh(h,u.statusText,g),headers:u.headers}:{type:Me.data,data:g,statusCode:u.status,headers:u.headers}}if(a===Me.error)return{type:a,error:u};if(ib(u)){var f,m;return{type:Me.deferred,deferredData:u,statusCode:(f=u.init)==null?void 0:f.status,headers:((m=u.init)==null?void 0:m.headers)&&new Headers(u.init.headers)}}return{type:Me.data,data:u}}function _o(t,e,n,r){let i=t.createURL(iv(e)).toString(),o={signal:n};if(r&&sn(r.formMethod)){let{formMethod:s,formEncType:l}=r;o.method=s.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=Hd(r.formData):o.body=r.formData}return new Request(i,o)}function Hd(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function jm(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function nb(t,e,n,r,i){let o={},s=null,l,a=!1,u={};return n.forEach((c,d)=>{let f=e[d].route.id;if(X(!qi(c),"Cannot handle redirect results in processLoaderData"),ss(c)){let m=is(t,f),h=c.error;r&&(h=Object.values(r)[0],r=void 0),s=s||{},s[m.route.id]==null&&(s[m.route.id]=h),o[f]=void 0,a||(a=!0,l=Z1(c.error)?c.error.status:500),c.headers&&(u[f]=c.headers)}else Jr(c)?(i.set(f,c.deferredData),o[f]=c.deferredData.data):o[f]=c.data,c.statusCode!=null&&c.statusCode!==200&&!a&&(l=c.statusCode),c.headers&&(u[f]=c.headers)}),r&&(s=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:s,statusCode:l||200,loaderHeaders:u}}function Am(t,e,n,r,i,o,s,l){let{loaderData:a,errors:u}=nb(e,n,r,i,l);for(let c=0;c<o.length;c++){let{key:d,match:f,controller:m}=o[c];X(s!==void 0&&s[c]!==void 0,"Did not find corresponding fetcher result");let h=s[c];if(!(m&&m.signal.aborted))if(ss(h)){let g=is(t.matches,f==null?void 0:f.route.id);u&&u[g.route.id]||(u=we({},u,{[g.route.id]:h.error})),t.fetchers.delete(d)}else if(qi(h))X(!1,"Unhandled fetcher revalidation redirect");else if(Jr(h))X(!1,"Unhandled fetcher deferred data");else{let g=Qn(h.data);t.fetchers.set(d,g)}}return{loaderData:a,errors:u}}function Im(t,e,n,r){let i=we({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function is(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Lm(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $t(t,e){let{pathname:n,routeId:r,method:i,type:o}=e===void 0?{}:e,s="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(s="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?l="defer() is not supported in actions":o==="invalid-body"&&(l="Unable to encode submission body")):t===403?(s="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(s="Not Found",l='No route matches URL "'+n+'"'):t===405&&(s="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Sh(t||500,s,new Error(l),!0)}function _m(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(qi(n))return{result:n,idx:e}}}function iv(t){let e=typeof t=="string"?Wn(t):t;return fi(we({},e,{hash:""}))}function rb(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Jr(t){return t.type===Me.deferred}function ss(t){return t.type===Me.error}function qi(t){return(t&&t.type)===Me.redirect}function ib(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function ob(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function sb(t){return JC.has(t.toLowerCase())}function sn(t){return WC.has(t.toLowerCase())}async function zm(t,e,n,r,i,o){for(let s=0;s<n.length;s++){let l=n[s],a=e[s];if(!a)continue;let u=t.find(d=>d.route.id===a.route.id),c=u!=null&&!rv(u,a)&&(o&&o[a.route.id])!==void 0;if(Jr(l)&&(i||c)){let d=r[s];X(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await ov(l,d,i).then(f=>{f&&(n[s]=f||n[s])})}}}async function ov(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Me.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Me.error,error:i}}return{type:Me.data,data:t.deferredData.data}}}function kh(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ud(t,e){let n=typeof e=="string"?Wn(e).search:e.search;if(t[t.length-1].route.index&&kh(n||""))return t[t.length-1];let r=X1(t);return r[r.length-1]}function Fm(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function wc(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lb(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function zo(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ab(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Qn(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ub(t,e){try{let n=t.sessionStorage.getItem(nv);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function cb(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(nv,JSON.stringify(n))}catch(r){di(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ha.apply(this,arguments)}const yu=w.createContext(null),sv=w.createContext(null),So=w.createContext(null),vu=w.createContext(null),Kn=w.createContext({outlet:null,matches:[],isDataRoute:!1}),lv=w.createContext(null);function db(t,e){let{relative:n}=e===void 0?{}:e;Js()||X(!1);let{basename:r,navigator:i}=w.useContext(So),{hash:o,pathname:s,search:l}=uv(t,{relative:n}),a=s;return r!=="/"&&(a=s==="/"?r:zn([r,s])),i.createHref({pathname:a,search:l,hash:o})}function Js(){return w.useContext(vu)!=null}function xu(){return Js()||X(!1),w.useContext(vu).location}function av(t){w.useContext(So).static||w.useLayoutEffect(t)}function zt(){let{isDataRoute:t}=w.useContext(Kn);return t?bb():fb()}function fb(){Js()||X(!1);let t=w.useContext(yu),{basename:e,navigator:n}=w.useContext(So),{matches:r}=w.useContext(Kn),{pathname:i}=xu(),o=JSON.stringify(vh(r)),s=w.useRef(!1);return av(()=>{s.current=!0}),w.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){n.go(a);return}let c=xh(a,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:zn([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,o,i,t])}const hb=w.createContext(null);function pb(t){let e=w.useContext(Kn).outlet;return e&&w.createElement(hb.Provider,{value:t},e)}function ko(){let{matches:t}=w.useContext(Kn),e=t[t.length-1];return e?e.params:{}}function uv(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=w.useContext(Kn),{pathname:i}=xu(),o=JSON.stringify(vh(r));return w.useMemo(()=>xh(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function mb(t,e,n){Js()||X(!1);let{navigator:r}=w.useContext(So),{matches:i}=w.useContext(Kn),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let a=xu(),u;if(e){var c;let g=typeof e=="string"?Wn(e):e;l==="/"||(c=g.pathname)!=null&&c.startsWith(l)||X(!1),u=g}else u=a;let d=u.pathname||"/",f=l==="/"?d:d.slice(l.length)||"/",m=Fi(t,{pathname:f}),h=Sb(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:zn([l,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:zn([l,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n);return e&&h?w.createElement(vu.Provider,{value:{location:ha({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:be.Pop}},h):h}function gb(){let t=Cb(),e=Z1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,o)}const yb=w.createElement(gb,null);class vb extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?w.createElement(Kn.Provider,{value:this.props.routeContext},w.createElement(lv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xb(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(yu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Kn.Provider,{value:e},r)}function Sb(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(r=n)==null?void 0:r.errors;if(s!=null){let l=o.findIndex(a=>a.route.id&&(s==null?void 0:s[a.route.id]));l>=0||X(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((l,a,u)=>{let c=a.route.id?s==null?void 0:s[a.route.id]:null,d=null;n&&(d=a.route.errorElement||yb);let f=e.concat(o.slice(0,u+1)),m=()=>{let h;return c?h=d:a.route.Component?h=w.createElement(a.route.Component,null):a.route.element?h=a.route.element:h=l,w.createElement(xb,{match:a,routeContext:{outlet:l,matches:f,isDataRoute:n!=null},children:h})};return n&&(a.route.ErrorBoundary||a.route.errorElement||u===0)?w.createElement(vb,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}var cv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cv||{}),pa=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pa||{});function kb(t){let e=w.useContext(yu);return e||X(!1),e}function wb(t){let e=w.useContext(sv);return e||X(!1),e}function Eb(t){let e=w.useContext(Kn);return e||X(!1),e}function dv(t){let e=Eb(),n=e.matches[e.matches.length-1];return n.route.id||X(!1),n.route.id}function Cb(){var t;let e=w.useContext(lv),n=wb(pa.UseRouteError),r=dv(pa.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function bb(){let{router:t}=kb(cv.UseNavigateStable),e=dv(pa.UseNavigateStable),n=w.useRef(!1);return av(()=>{n.current=!0}),w.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ha({fromRouteId:e},o)))},[t,e])}function Mb(t){return pb(t.context)}function Nb(t){let{basename:e="/",children:n=null,location:r,navigationType:i=be.Pop,navigator:o,static:s=!1}=t;Js()&&X(!1);let l=e.replace(/^\/*/,"/"),a=w.useMemo(()=>({basename:l,navigator:o,static:s}),[l,o,s]);typeof r=="string"&&(r=Wn(r));let{pathname:u="/",search:c="",hash:d="",state:f=null,key:m="default"}=r,h=w.useMemo(()=>{let g=xo(u,l);return g==null?null:{location:{pathname:g,search:c,hash:d,state:f,key:m},navigationType:i}},[l,u,c,d,f,m,i]);return h==null?null:w.createElement(So.Provider,{value:a},w.createElement(vu.Provider,{children:n,value:h}))}new Promise(()=>{});function Tb(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:w.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:w.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rs.apply(this,arguments)}function Ob(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Pb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Rb(t,e){return t.button===0&&(!e||e==="_self")&&!Pb(t)}const Db=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function jb(t,e){return XC({basename:e==null?void 0:e.basename,future:Rs({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:SC({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||Ab(),routes:t,mapRouteProperties:Tb,window:e==null?void 0:e.window}).initialize()}function Ab(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Rs({},e,{errors:Ib(e.errors)})),e}function Ib(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Sh(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const Lb=w.createContext({isTransitioning:!1}),_b=w.createContext(new Map),zb="startTransition",Bm=xk[zb],Fb="flushSync",$m=OE[Fb];function Bb(t){Bm?Bm(t):t()}function Fo(t){$m?$m(t):t()}class $b{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function Vb(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=w.useState(n.state),[s,l]=w.useState(),[a,u]=w.useState({isTransitioning:!1}),[c,d]=w.useState(),[f,m]=w.useState(),[h,g]=w.useState(),x=w.useRef(new Map),{v7_startTransition:y}=r||{},v=w.useCallback(M=>{y?Bb(M):M()},[y]),k=w.useCallback((M,R)=>{let{deletedFetchers:D,unstable_flushSync:F,unstable_viewTransitionOpts:ee}=R;D.forEach(ze=>x.current.delete(ze)),M.fetchers.forEach((ze,Tn)=>{ze.data!==void 0&&x.current.set(Tn,ze.data)});let Ae=n.window==null||typeof n.window.document.startViewTransition!="function";if(!ee||Ae){F?Fo(()=>o(M)):v(()=>o(M));return}if(F){Fo(()=>{f&&(c&&c.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation})});let ze=n.window.document.startViewTransition(()=>{Fo(()=>o(M))});ze.finished.finally(()=>{Fo(()=>{d(void 0),m(void 0),l(void 0),u({isTransitioning:!1})})}),Fo(()=>m(ze));return}f?(c&&c.resolve(),f.skipTransition(),g({state:M,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation})):(l(M),u({isTransitioning:!0,flushSync:!1,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation}))},[n.window,f,c,x,v]);w.useLayoutEffect(()=>n.subscribe(k),[n,k]),w.useEffect(()=>{a.isTransitioning&&!a.flushSync&&d(new $b)},[a]),w.useEffect(()=>{if(c&&s&&n.window){let M=s,R=c.promise,D=n.window.document.startViewTransition(async()=>{v(()=>o(M)),await R});D.finished.finally(()=>{d(void 0),m(void 0),l(void 0),u({isTransitioning:!1})}),m(D)}},[v,s,c,n.window]),w.useEffect(()=>{c&&s&&i.location.key===s.location.key&&c.resolve()},[c,f,i.location,s]),w.useEffect(()=>{!a.isTransitioning&&h&&(l(h.state),u({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}),g(void 0))},[a.isTransitioning,h]);let S=w.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:M=>n.navigate(M),push:(M,R,D)=>n.navigate(M,{state:R,preventScrollReset:D==null?void 0:D.preventScrollReset}),replace:(M,R,D)=>n.navigate(M,{replace:!0,state:R,preventScrollReset:D==null?void 0:D.preventScrollReset})}),[n]),b=n.basename||"/",N=w.useMemo(()=>({router:n,navigator:S,static:!1,basename:b}),[n,S,b]);return w.createElement(w.Fragment,null,w.createElement(yu.Provider,{value:N},w.createElement(sv.Provider,{value:i},w.createElement(_b.Provider,{value:x.current},w.createElement(Lb.Provider,{value:a},w.createElement(Nb,{basename:b,location:i.location,navigationType:i.historyAction,navigator:S},i.initialized?w.createElement(Hb,{routes:n.routes,state:i}):e))))),null)}function Hb(t){let{routes:e,state:n}=t;return mb(e,void 0,n)}const Ub=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vm=w.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:a,to:u,preventScrollReset:c,unstable_viewTransition:d}=e,f=Ob(e,Db),{basename:m}=w.useContext(So),h,g=!1;if(typeof u=="string"&&Wb.test(u)&&(h=u,Ub))try{let k=new URL(window.location.href),S=u.startsWith("//")?new URL(k.protocol+u):new URL(u),b=xo(S.pathname,m);S.origin===k.origin&&b!=null?u=b+S.search+S.hash:g=!0}catch{}let x=db(u,{relative:i}),y=Kb(u,{replace:s,state:l,target:a,preventScrollReset:c,relative:i,unstable_viewTransition:d});function v(k){r&&r(k),k.defaultPrevented||y(k)}return w.createElement("a",Rs({},f,{href:h||x,onClick:g||o?r:v,ref:n,target:a}))});var Hm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hm||(Hm={}));var Um;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Um||(Um={}));function Kb(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:l}=e===void 0?{}:e,a=zt(),u=xu(),c=uv(t,{relative:s});return w.useCallback(d=>{if(Rb(d,n)){d.preventDefault();let f=r!==void 0?r:fi(u)===fi(c);a(t,{replace:f,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:l})}},[u,a,c,r,i,n,t,o,s,l])}function Ds(t){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ds(t)}function Jb(t,e){if(Ds(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ds(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qb(t){var e=Jb(t,"string");return Ds(e)==="symbol"?e:String(e)}function Gb(t,e,n){return e=qb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Km(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wm(Object(n),!0).forEach(function(r){Gb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wm(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Jm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ec=function(){return Math.random().toString(36).substring(7).split("").join(".")},ma={INIT:"@@redux/INIT"+Ec(),REPLACE:"@@redux/REPLACE"+Ec(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ec()}};function Yb(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function fv(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(rt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(rt(1));return n(fv)(t,e)}if(typeof t!="function")throw new Error(rt(2));var i=t,o=e,s=[],l=s,a=!1;function u(){l===s&&(l=s.slice())}function c(){if(a)throw new Error(rt(3));return o}function d(g){if(typeof g!="function")throw new Error(rt(4));if(a)throw new Error(rt(5));var x=!0;return u(),l.push(g),function(){if(x){if(a)throw new Error(rt(6));x=!1,u();var v=l.indexOf(g);l.splice(v,1),s=null}}}function f(g){if(!Yb(g))throw new Error(rt(7));if(typeof g.type>"u")throw new Error(rt(8));if(a)throw new Error(rt(9));try{a=!0,o=i(o,g)}finally{a=!1}for(var x=s=l,y=0;y<x.length;y++){var v=x[y];v()}return g}function m(g){if(typeof g!="function")throw new Error(rt(10));i=g,f({type:ma.REPLACE})}function h(){var g,x=d;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(rt(11));function k(){v.next&&v.next(c())}k();var S=x(k);return{unsubscribe:S}}},g[Jm]=function(){return this},g}return f({type:ma.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:m},r[Jm]=h,r}var Qb=fv;function Xb(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:ma.INIT});if(typeof r>"u")throw new Error(rt(12));if(typeof n(void 0,{type:ma.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(rt(13))})}function Zb(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var o=Object.keys(n),s;try{Xb(n)}catch(l){s=l}return function(a,u){if(a===void 0&&(a={}),s)throw s;for(var c=!1,d={},f=0;f<o.length;f++){var m=o[f],h=n[m],g=a[m],x=h(g,u);if(typeof x>"u")throw u&&u.type,new Error(rt(14));d[m]=x,c=c||x!==g}return c=c||o.length!==Object.keys(a).length,c?d:a}}function eM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function tM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(rt(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=e.map(function(a){return a(s)});return o=eM.apply(void 0,l)(i.dispatch),Km(Km({},i),{},{dispatch:o})}}}function hv(t){var e=function(r){var i=r.dispatch,o=r.getState;return function(s){return function(l){return typeof l=="function"?l(i,o,t):s(l)}}};return e}var pv=hv();pv.withExtraArgument=hv;const nM=pv,mv="entries/LOAD_USER_ENTRIES",gv="entry/CREATE_ENTRY",yv="entry/EDIT_ENTRY",vv="entry/DELETE_ENTRY",xv="entries/CLEAR_ENTRIES",Sv="comment/CREATE_COMMENT",kv="comment/EDIT_COMMENT",wv="comment/DELETE_COMMENT",Ev="post/CREATE_POST",Cv="post/EDIT_POST",bv="post/DELETE_POST",rM=t=>({type:mv,entries:t}),iM=t=>({type:gv,entry:t}),oM=t=>({type:yv,entry:t}),sM=t=>({type:vv,entryId:t}),lM=()=>({type:xv}),aM=t=>({type:Sv,comment:t}),uM=t=>({type:kv,comment:t}),cM=t=>({type:wv,comment:t}),dM=t=>({type:Ev,post:t}),fM=t=>({type:Cv,post:t}),hM=t=>({type:bv,post:t}),Or=()=>async t=>{const e=await fetch("/api/entries");if(e.ok){const n=await e.json();return t(rM(n))}else return{server:"Something went wrong. Please try again"}},pM=t=>async e=>{const n=await fetch("/api/entries/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.userId,notebook_id:t.notebookId,name:t.name,content:t.content})});if(n.ok){const r=await n.json();return e(iM(r))}else return await n.json()},wh=t=>async e=>{console.log("entry obj ----->",t);const n=await fetch(`/api/entries/${t.id}/edit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.userId,notebook_id:t.notebookId,name:t.name,content:t.content,is_public:t.isPublic})});if(n.ok){const r=await n.json();return e(oM(r))}else return await n.json()},mM=t=>async e=>{console.log(t);const n=await fetch(`/api/entries/${t}/delete`);return n.ok?e(sM(t)):await n.json()},gM=t=>async e=>{const n=await fetch("/api/comments/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.userId,entry_id:t.entryId,comment:t.comment})});if(n.ok){const r=await n.json();return e(aM(r))}else return await n.json()},yM=t=>async e=>{const n=await fetch(`/api/comments/${t.id}/edit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.userId,entry_id:t.entryId,comment:t.comment})});if(n.ok){const r=await n.json();return e(uM(r))}else return await n.json()},vM=t=>async e=>{const n=await fetch(`/api/comments/${t.id}/delete`);return n.ok?e(cM(t)):await n.json()},xM=t=>async e=>{const n=await fetch("/api/posts/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entry_id:t.entryId,message:t.message})});if(n.ok){const r=await n.json();return e(dM(r))}else return await n.json()},SM=t=>async e=>{const n=await fetch(`/api/posts/${t.entryId}/edit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entry_id:t.entryId,message:t.message})});if(n.ok){const r=await n.json();return e(fM(r))}else return await n.json()},kM=t=>async e=>{const n=await fetch(`/api/posts/${t.id}/delete`);return n.ok?e(hM(t)):await n.json()},qm={};function wM(t=qm,e){switch(e.type){case mv:{const n={...t};return e.entries.forEach(r=>{n[r.id]=r}),n}case gv:{const n={...t};return n[e.entry.id]=e.entry,n}case yv:{const n={...t};return n[e.entry.id]=e.entry,n}case vv:{const n={...t};return delete n[e.entryId],n}case Sv:{const n={...t};return n[e.comment.entry_id].comments.push(e.comment),n}case kv:{const n={...t},r=n[e.comment.entry_id].comments,i=r.find(o=>o.id=e.comment.id);return r.splice(r.indexOf(i),1,e.comment),n[e.comment.entry_id].comments=r,n}case wv:{const n={...t},r=n[e.comment.entry_id].comments;return n[e.comment.entry_id].comments.splice(r.indexOf(e.comment),1),n}case Ev:{const n={...t};return n[e.post.id]=e.post,n}case Cv:{const n={...t};return n[e.post.entry_id].post=e.post,n}case bv:{const n={...t};let r=n[e.post.entry_id];return r=Object.keys(r).filter(i=>i!=="post").reduce((i,o)=>(i[o]=r[o],i),{}),n[r.id]=r,n[r.id].is_public=!1,n}case xv:return qm;default:return t}}const Mv="notebooks/LOAD_USER_NOTEBOOKS",Nv="notebooks/CREATE_NOTEBOOK",Tv="notebook/EDIT_NOTEBOOK",Ov="notebooks/DELETE_NOTEBOOK",Pv="notebooks/CLEAR_NOTEBOOKS",EM=t=>({type:Mv,payload:t}),CM=t=>({type:Nv,notebook:t}),bM=t=>({type:Tv,notebook:t}),MM=t=>({type:Ov,notebookId:t}),NM=()=>({type:Pv}),Rv=()=>async t=>{const e=await fetch("/api/notebooks");if(e.ok){const n=await e.json();return t(EM(n.notebooks))}else return{server:"Something went wrong. Please try again"}},TM=t=>async e=>{const n=await fetch("/api/notebooks/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.userId,name:t.name,about:t.about})});if(n.ok){const r=await n.json();return console.log(r),e(CM(r))}else return await n.json()},OM=t=>async e=>{console.log(t);const n=await fetch(`/api/notebooks/${t.id}/edit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.userId,name:t.name,about:t.about})});if(n.ok){const r=await n.json();return console.log(r),e(bM(r))}else{const r=await n.json();return console.log(r),r}},PM=t=>async e=>{const n=await fetch(`/api/notebooks/${t}/delete`);return n.ok?e(MM(t)):await n.json()},Gm={};function RM(t=Gm,e){switch(e.type){case Mv:{const n={...t};return e.payload.forEach(r=>{n[r.id]=r}),n}case Nv:{const n={...t};return n[e.notebook.id]=e.notebook,n}case Tv:{const n={...t};return n[e.notebook.id]=e.notebook,n}case Ov:{const n={...t};return delete n[e.notebookId],n}case Pv:return Gm;default:return t}}const Dv="users/LOAD_USERS",DM=({users:t})=>({type:Dv,users:t}),jv=()=>async t=>{const e=await fetch("/api/users");if(e.ok){const n=await e.json();return t(DM(n))}else return{server:"Something went wrong. Please try again"}},jM={};function AM(t=jM,e){switch(e.type){case Dv:{const n={...t};return e.users.forEach(r=>{n[r.id]=r}),n}default:return t}}const Av=async t=>{await t(Rv()),await t(Or()),await t(jv())},Iv="session/setUser",Lv="session/removeUser",Eh=t=>({type:Iv,payload:t}),IM=()=>({type:Lv}),_v=()=>async t=>{const e=await fetch("/api/auth/");if(e.ok){const n=await e.json();if(n.errors)return;t(Eh(n))}},zv=t=>async e=>{const n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok){const r=await n.json();Av(e),e(Eh(r))}else return n.status<500?await n.json():{server:"Something went wrong. Please try again"}},LM=t=>async e=>{const n=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok){const r=await n.json();e(Eh(r))}else return n.status<500?await n.json():{server:"Something went wrong. Please try again"}},_M=()=>async t=>{await fetch("/api/auth/logout"),await t(NM()),await t(lM()),t(IM())},zM={user:null};function FM(t=zM,e){switch(e.type){case Iv:return{...t,user:e.payload};case Lv:return{...t,user:null};default:return t}}const BM=Zb({session:FM,users:AM,notebooks:RM,entries:wM});let Fv;Fv=tM(nM);const $M=t=>Qb(BM,t,Fv);const Ch=w.createContext();function Bv({children:t}){const e=w.useRef(),[n,r]=w.useState(null),[i,o]=w.useState(null),l={modalRef:e,modalContent:n,setModalContent:r,setOnModalClose:o,closeModal:()=>{r(null),typeof i=="function"&&(o(null),i())}};return p.jsxs(p.Fragment,{children:[p.jsx(Ch.Provider,{value:l,children:t}),p.jsx("div",{ref:e})]})}function $v(){const{modalRef:t,modalContent:e,closeModal:n}=w.useContext(Ch);return!t||!t.current||!e?null:dh.createPortal(p.jsxs("div",{id:"modal",children:[p.jsx("div",{id:"modal-background",onClick:n}),p.jsx("div",{id:"modal-content",children:e})]}),t.current)}const Ke=()=>w.useContext(Ch);function VM(){const t=je(),e=zt(),n=re(h=>h.session.user),r=re(h=>h.notebooks),[i,o]=w.useState(""),[s,l]=w.useState(""),[a,u]=w.useState(""),c=h=>{o(i!==h?h:i===h?"":h),h==="/comments"&&e("/comments")},d=h=>{l(h),u(""),h==="notebooks"?e("/"):h==="all-posts"?e("/public"):h==="user-posts"&&e("/public/user")},f=h=>{u(h),e(`/notebook/${h}`)},m=async h=>{h.preventDefault(),await t(_M()),e("/")};return p.jsxs("div",{id:"main-left-nav-container",children:[p.jsxs("div",{children:[p.jsx("div",{id:"left-nav-user-info",children:p.jsxs("div",{id:"left-nav-user-info-inner",children:[p.jsx("img",{src:n==null?void 0:n.profile_image,className:"profile-image"}),p.jsxs("div",{id:"left-nav-user-name",children:[p.jsx("div",{children:`Hello ${n==null?void 0:n.name}`}),p.jsx("div",{children:n==null?void 0:n.username})]})]})}),p.jsxs("div",{id:"navigation-container",children:[p.jsxs("div",{children:[p.jsx("div",{className:i==="/"?"left-nav-main-ele-selected":"left-nav-main-ele",onClick:()=>c("/"),children:"Home"}),p.jsxs("div",{hidden:i!=="/",children:[p.jsx("div",{className:"left-nav-mid-line"}),p.jsx("div",{className:s==="notebooks"?"left-nav-mid-ele-selected":"left-nav-mid-ele",onClick:()=>d("notebooks"),children:"Notebooks"}),p.jsxs("div",{hidden:s!=="notebooks",children:[p.jsx("div",{className:"left-nav-small-line"}),p.jsx("div",{className:"left-nav-small-ele",children:r?Object.values(r).map(h=>p.jsx("div",{className:a===h.id?"left-nav-sml-ele-selected":"left-nav-sml-ele",onClick:()=>f(h.id),children:p.jsx("div",{children:h==null?void 0:h.name})},h==null?void 0:h.id)):""})]}),p.jsx("div",{className:s==="theme"?"left-nav-mid-ele-selected":"left-nav-mid-ele",onClick:()=>d("theme"),children:"Theme"}),p.jsxs("div",{hidden:s!=="theme",children:[p.jsx("div",{className:"left-nav-small-line"}),p.jsx("div",{className:"left-nav-small-ele",children:p.jsx("div",{className:"left-nav-sml-ele-selected",children:"PenCrafted (default)"})})]})]})]}),p.jsxs("div",{children:[p.jsx("div",{className:i==="/public"?"left-nav-main-ele-selected":"left-nav-main-ele",onClick:()=>c("/public"),children:"Public Feed"}),p.jsxs("div",{hidden:i!=="/public",children:[p.jsx("div",{className:"left-nav-mid-line"}),p.jsx("div",{className:s==="all-posts"?"left-nav-mid-ele-selected":"left-nav-mid-ele",onClick:()=>d("all-posts"),children:"All Posts"}),p.jsx("div",{className:s==="user-posts"?"left-nav-mid-ele-selected":"left-nav-mid-ele",onClick:()=>d("user-posts"),children:"Your Posts"})]})]}),p.jsx("div",{children:p.jsx("div",{className:i==="/comments"?"left-nav-main-ele-selected":"left-nav-main-ele",onClick:()=>c("/comments"),children:"Comments"})})]})]}),p.jsx("div",{id:"left-nav-signout-container",children:p.jsx("div",{id:"left-nav-signout",onClick:m,children:`Sign out ${n==null?void 0:n.username}`})})]})}function HM(){const t=je();return w.useEffect(()=>{t(_v()).then(()=>Av(t)).then(()=>t(jv())).catch(e=>console.log(e))},[t]),p.jsx(p.Fragment,{children:p.jsxs(Bv,{children:[p.jsxs("div",{className:"main-insite-container",children:[p.jsx("div",{className:"left-hand-nav-container",children:p.jsx(VM,{})}),p.jsx("div",{className:"main-insite-content-container",children:p.jsx(Mb,{})})]}),p.jsx($v,{})]})})}function qr({modalComponent:t,buttonText:e,onButtonClick:n,onModalClose:r}){const{setModalContent:i,setOnModalClose:o}=Ke(),s=()=>{r&&o(r),i(t),typeof n=="function"&&n()};return p.jsx("button",{onClick:s,children:e})}function Vv(){const t=je(),e=zt(),[n,r]=w.useState(""),[i,o]=w.useState(""),[s,l]=w.useState(!1),{closeModal:a}=Ke(),u=async c=>{c.preventDefault();const d=await t(zv({username:n,password:i}));d?l(d):(r(""),o(""),a(),e("/"))};return p.jsxs("div",{className:"modal login-form-container",children:[p.jsx("h1",{className:"modal-form-title",children:"Log In"}),p.jsx("form",{onSubmit:u,children:p.jsxs("div",{className:"modal login-form-elements",children:[p.jsx("label",{children:"User Name"}),p.jsx("input",{type:"text",value:n,onChange:c=>r(c.target.value),required:!0}),p.jsx("p",{className:s?"login-error-validation":"regular-string",children:s.username}),p.jsx("label",{children:"Password"}),p.jsx("input",{className:"password-input",type:"password",value:i,onChange:c=>o(c.target.value),required:!0}),p.jsx("p",{className:s?"login-error-validation":"regular-string",children:s.password}),p.jsx("button",{className:"modal-button login-button",type:"submit",children:"Log In"})]})})]})}function UM(){const t=je(),e=zt(),[n,r]=w.useState(""),[i,o]=w.useState(""),[s,l]=w.useState(""),[a,u]=w.useState(""),[c,d]=w.useState({}),{closeModal:f}=Ke();w.useEffect(()=>{let h={};n.length<4&&(h.name="Name must be 4 or more characters"),n.length>50&&(h.name="Name must be less than 50 characters"),i.length<8&&(h.username="Username must be 8 or more characters"),i.length>50&&(h.username="Username must be less than 50 characters"),s.length<8&&(h.password="Password must be 8 or more characters"),s.length>50&&(h.password="Password must be less than 50 characters"),a!==s&&(h.confirmPassword="Password and confirmed password must match"),d(h)},[n,i,s,a]);const m=async h=>{if(h.preventDefault(),Object.values(c).length)return;const g=await t(LM({name:n,username:i,password:s}));g?d(g):(f(),e("/"))};return p.jsxs("div",{className:"modal signup-form-container",children:[p.jsx("h1",{className:"modal-form-title",children:"Sign Up"}),p.jsx("form",{onSubmit:m,children:p.jsxs("div",{className:"modal",children:[p.jsx("label",{children:"Name"}),p.jsx("input",{type:"text",value:n,onChange:h=>r(h.target.value),required:!0}),p.jsx("p",{className:c.name?"error-validation":"",children:`${n.length}/50`}),p.jsx("label",{children:"Username"}),p.jsx("input",{type:"text",value:i,onChange:h=>o(h.target.value),required:!0}),p.jsx("p",{className:c.username?"error-validation":"",children:`${i.length}/50`}),p.jsx("label",{children:"Password"}),p.jsx("input",{type:"password",value:s,onChange:h=>l(h.target.value),required:!0}),p.jsx("p",{className:c.password?"error-validation":"",children:`${s.length}/50`}),p.jsx("label",{children:"Confirm Password"}),p.jsx("input",{type:"password",value:a,onChange:h=>u(h.target.value),required:!0}),p.jsx("p",{className:c.confirmPassword?"error-validation":"signup-invisible-validation",children:c.confirmPassword}),p.jsx("button",{className:"modal-button signup-button",type:"submit",children:"Sign Up"})]})})]})}function WM(){const[t,e]=w.useState(!1),n=w.useRef();w.useEffect(()=>{if(!t)return;const i=o=>{n.current&&!n.current.contains(o.target)&&e(!1)};return document.addEventListener("click",i),()=>document.removeEventListener("click",i)},[t]);const r=()=>e(!1);return p.jsxs("div",{id:"landingpage-navigation-container",children:[p.jsx("img",{src:"https://profile-images-pencrafted-capstone.s3.us-west-2.amazonaws.com/nav-title-00366B.png"}),p.jsxs("div",{id:"landingpage-navigation-in-out-container",children:[p.jsx(qr,{buttonText:"Log In",onItemClick:r,modalComponent:p.jsx(Vv,{})}),p.jsx(qr,{buttonText:"Sign Up",onItemClick:r,modalComponent:p.jsx(UM,{})})]})]})}function KM(){const t=je(),e=async n=>{n.preventDefault(),await t(zv({username:"demo-user",password:"password"}))};return p.jsx("div",{children:p.jsxs(Bv,{children:[p.jsxs("div",{id:"main-landingpage-container",children:[p.jsx(WM,{}),p.jsxs("div",{id:"landingpage-section1-3-container",children:[p.jsxs("section",{id:"landingpage-section-1",children:[p.jsx("img",{src:"https://profile-images-pencrafted-capstone.s3.us-west-2.amazonaws.com/landing-page-title-image.png"}),p.jsx("div",{className:"landingpage-section-1-midtitle",children:"Your Writing Journey Starts Here: Create, Share, Improve! Sign in now!"})]}),p.jsxs("section",{id:"landingpage-section-2",children:[p.jsx(qr,{buttonText:"Continue",modalComponent:p.jsx(Vv,{})}),p.jsx("button",{className:"button landingpage-demo-login-btn",onClick:e,children:"Login as Demo User"})]}),p.jsx("section",{id:"landingpage-section-3"})]}),p.jsxs("section",{id:"landingpage-section-4",children:[p.jsx("h2",{id:"landingpage-section4-title",children:"Welcome to PenCrafted, where your creativity takes flight!"}),p.jsx("div",{id:"landingpage-section4-minititle",children:"At PenCrafted, we believe that every writer has a unique voice and story to tell. Our platform is designed to provide you a safe space to express yourself!  Compose your works privately or help you refine your craft through constructive feedback and community support. Here’s how it works:"}),p.jsxs("ul",{id:"landingpage-minititle-list-container",children:[p.jsx("li",{children:"Organize and create: Sign up and create notebooks centered on the topic you will write about. Whether it’s a short story, poem, or novel excerpt, you can organize your ideas within different entries and take note of important sections."}),p.jsx("li",{children:"Get Constructive Criticism: Post your creations live to receive insightful feedback from fellow writers and experienced reviewers. Our community thrives on mutual respect and helpful critiques, ensuring that every piece gets the attention it deserves."}),p.jsx("li",{children:"Support Others: Read and critique the works of other members. Offering feedback not only helps others but also sharpens your own critical eye and writing skills"})]})]}),p.jsxs("footer",{id:"landingpage-footer",children:[p.jsxs("div",{id:"landingpage-footer-subsection",children:[p.jsx(Vm,{to:"https://github.com/llfbh33",className:"landingpage-footer-link",target:"_blank",children:"Github"}),p.jsx(Vm,{className:"landingpage-footer-link",onClick:()=>alert("Linked in coming soon"),children:"Contact Us"})]}),p.jsx("div",{children:"PenCrafted by Aubrie Woodbine"})]})]}),p.jsx($v,{})]})})}function JM(){const t=re(n=>n.session.user),e=je();return w.useEffect(()=>{e(_v())},[e]),t?p.jsx(HM,{}):p.jsx(KM,{})}var Hv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ym=Ce.createContext&&Ce.createContext(Hv),qM=["attr","size","title"];function GM(t,e){if(t==null)return{};var n=YM(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YM(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ga(){return ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ga.apply(this,arguments)}function Qm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qm(Object(n),!0).forEach(function(r){QM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QM(t,e,n){return e=XM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XM(t){var e=ZM(t,"string");return typeof e=="symbol"?e:e+""}function ZM(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uv(t){return t&&t.map((e,n)=>Ce.createElement(e.tag,ya({key:n},e.attr),Uv(e.child)))}function Zt(t){return e=>Ce.createElement(eN,ga({attr:ya({},t.attr)},e),Uv(t.child))}function eN(t){var e=n=>{var{attr:r,size:i,title:o}=t,s=GM(t,qM),l=i||n.size||"1em",a;return n.className&&(a=n.className),t.className&&(a=(a?a+" ":"")+t.className),Ce.createElement("svg",ga({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:a,style:ya(ya({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&Ce.createElement("title",null,o),t.children)};return Ym!==void 0?Ce.createElement(Ym.Consumer,null,n=>e(n)):e(Hv)}function vi(t){return Zt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"},child:[]}]})(t)}function tN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M333.49 238a122 122 0 0 0 27-65.21C367.87 96.49 308 32 233.42 32H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h31.87v288H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h209.32c70.8 0 134.14-51.75 141-122.4 4.74-48.45-16.39-92.06-50.83-119.6zM145.66 112h87.76a48 48 0 0 1 0 96h-87.76zm87.76 288h-87.76V288h87.76a56 56 0 0 1 0 112z"},child:[]}]})(t)}function qs(t){return Zt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function nN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 96v320h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H320a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V288H160v128h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V96H32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-32v128h192V96h-32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16z"},child:[]}]})(t)}function rN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M320 48v32a16 16 0 0 1-16 16h-62.76l-80 320H208a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h62.76l80-320H112a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16z"},child:[]}]})(t)}function iN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"},child:[]}]})(t)}function oN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function sN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function lN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function aN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 224H293.9l-87.17-26.83A43.55 43.55 0 0 1 219.55 112h66.79A49.89 49.89 0 0 1 331 139.58a16 16 0 0 0 21.46 7.15l42.94-21.47a16 16 0 0 0 7.16-21.46l-.53-1A128 128 0 0 0 287.51 32h-68a123.68 123.68 0 0 0-123 135.64c2 20.89 10.1 39.83 21.78 56.36H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h480a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-180.24 96A43 43 0 0 1 336 356.45 43.59 43.59 0 0 1 292.45 400h-66.79A49.89 49.89 0 0 1 181 372.42a16 16 0 0 0-21.46-7.15l-42.94 21.47a16 16 0 0 0-7.16 21.46l.53 1A128 128 0 0 0 224.49 480h68a123.68 123.68 0 0 0 123-135.64 114.25 114.25 0 0 0-5.34-24.36z"},child:[]}]})(t)}function uN(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function cN(){const t=je(),e=zt(),n=re(d=>d.session.user),[r,i]=w.useState(""),[o,s]=w.useState(" "),[l,a]=w.useState({}),{closeModal:u}=Ke();w.useEffect(()=>{const d={};r.length<=0&&(d.name="Notebook name is required"),r.length>100&&(d.name="Notebook name can not be over 100 characters"),o.length>400&&(d.about="Notebook about section can not be over 400 characters"),a(d)},[r,o]),w.useEffect(()=>{o===""&&s(" ")},[o]);const c=async d=>{if(d.preventDefault(),Object.values(l).length)return;const f=await t(TM({userId:n.id,name:r,about:o}));f.name?a(f):(i(""),s(""),u(),e("/"))};return p.jsxs("div",{children:[p.jsx("h1",{className:"notebook-modal-title",children:"New Notebook"}),p.jsxs("form",{onSubmit:c,children:[p.jsxs("div",{className:"notebook-modal-info-1",children:[p.jsx("label",{className:"notebook-modal-label",children:"What would you like to name your new notebook?"}),p.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),required:!0}),p.jsx("p",{className:l.name?"notebook-modal-errors":"notebook-modal-no-errors",children:`${r.length}/100`})]}),p.jsxs("div",{className:"notebook-modal-info-2",children:[p.jsx("div",{className:"notebook-modal-label",children:"Write a little about what you will use this notebook for!"}),p.jsx("div",{children:"This is not required but it is a helpful way to keep your writing organized."}),p.jsx("textarea",{value:o,rows:12,cols:60,onChange:d=>s(d.target.value),required:!0}),p.jsx("p",{className:"notebook-modal-no-errors",children:`${o.length}/400`})]}),p.jsx("div",{className:"notebook-modal-button-container",children:p.jsx("button",{type:"submit",className:"modal-button notebook-modal-button",children:"Submit Changes"})})]})]})}function dN({notebook:t}){const e=je(),n=re(d=>d.session.user),[r,i]=w.useState(t.name),[o,s]=w.useState(t.about),[l,a]=w.useState({}),{closeModal:u}=Ke();w.useEffect(()=>{const d={};r<=0&&(d.name="Notebook name is required"),r.length>100&&(d.name="Notebook name can not be over 100 characters"),o.length>400&&(d.about="Notebook about section can not be over 400 characters"),a(d)},[r,o]),w.useEffect(()=>{o===""&&s(" ")},[o]);const c=async d=>{if(d.preventDefault(),Object.values(l).length)return;const f=await e(OM({id:t.id,userId:n.id,name:r,about:o}));f.name?a(f):(await e(Rv()),i(""),s(""),await u())};return p.jsxs("div",{children:[p.jsx("h1",{className:"notebook-modal-title",children:"Edit Notebook"}),p.jsxs("form",{onSubmit:c,children:[p.jsxs("div",{className:"notebook-modal-info-1",children:[p.jsx("label",{className:"notebook-modal-label",children:"Do you want to change the name of your notebook?"}),p.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),required:!0}),p.jsx("p",{className:l.name?"notebook-modal-errors":"notebook-modal-no-errors",children:`${r.length}/100`})]}),p.jsxs("div",{className:"notebook-modal-info-2",children:[p.jsx("div",{className:"notebook-modal-label",children:"Write a little about what you will use this notebook for!"}),p.jsx("div",{children:"This is not required but it is a helpful way to keep your writing organized."}),p.jsx("textarea",{value:o,rows:12,cols:60,onChange:d=>s(d.target.value),required:!0}),p.jsx("p",{className:"notebook-modal-no-errors",children:`${o.length}/400`})]}),p.jsx("div",{className:"notebook-modal-button-container",children:p.jsx("button",{type:"submit",className:"modal-button notebook-modal-button",children:"Submit Changes"})})]})]})}function jt({modalComponent:t,itemText:e,onItemClick:n,onModalClose:r}){const{setModalContent:i,setOnModalClose:o}=Ke(),s=()=>{r&&o(r),i(t),typeof n=="function"&&n()};return p.jsx("li",{onClick:s,children:e})}function fN({notebook:t}){const e=je(),{closeModal:n}=Ke(),r=async()=>{await e(PM(t.id)),await n()},i=()=>{n()};return p.jsxs("div",{id:"post-remove-modal-container",children:[p.jsx("h2",{children:`Are you sure you want to delete "${t.name}" ?`}),p.jsx("h4",{className:"post-remove-disclaimer",children:"Deleting your notebook will also delete all of the entries within. Are you sure?."}),p.jsxs("div",{id:"remove-post-button-container",children:[p.jsx("button",{className:"modal-button delete-comment-button",onClick:r,children:"Yes, Delete Notebook"}),p.jsx("button",{className:"modal-button delete-comment-button",onClick:i,children:"No, Keep My Notebook"})]})]})}function hN(){const t=re(i=>i.session.user),e=re(i=>i.notebooks),n=zt(),r=i=>{n(`/notebook/${i}`)};return p.jsxs("div",{children:[p.jsx("p",{className:"mini-page-title",children:"Ready to write? Create a notebook to get started!"}),p.jsx("h1",{id:"homepage-user-title",children:`${t==null?void 0:t.name}'s Home`}),p.jsx("p",{className:"page-title-blocks",children:"Your Notebooks"}),p.jsxs("div",{id:"homepage-notebook-card-container",children:[Object.values(e).map(i=>p.jsx("div",{children:p.jsxs("div",{className:"homepage-notebook-card",children:[p.jsxs("div",{className:"homepage-notebook-card-details",onClick:()=>r(i.id),children:[p.jsx("div",{children:p.jsx("div",{children:i==null?void 0:i.name})}),p.jsx("div",{className:"notebook-about-section-container",children:p.jsx("div",{children:`${i==null?void 0:i.about.slice(0,120)}...`})})]}),p.jsxs("div",{className:"notebook-edit-delete-container",children:[p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(qs,{}),modalComponent:p.jsx(dN,{notebook:i})})}),p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(vi,{}),modalComponent:p.jsx(fN,{notebook:i})})})]})]})},i==null?void 0:i.id)),p.jsx("div",{id:"homepage-new-notebook-card",children:p.jsx("div",{id:"create-notebook-title",children:p.jsx(jt,{itemText:"Click here to create a new Notebook",modalComponent:p.jsx(cN,{})})})})]})]})}function pN(){const{notebookId:t}=ko(),e=zt(),n=je(),r=re(c=>c.session.user),[i,o]=w.useState(""),[s,l]=w.useState({}),{closeModal:a}=Ke();w.useEffect(()=>{const c={};i<=0&&(c.name="Please provide a name for your entry"),i.length>100&&(c.name="Name must be 100 characters or less"),l(c)},[i]);const u=async c=>{if(c.preventDefault(),s.name)return;const d=await n(pM({userId:r.id,notebookId:t,name:i,content:"",isPublic:!1}));d.name?l(d):(await n(Or()),o(""),e(`/notebook/${t}/entries/${d.entry.id}`),a())};return p.jsxs("div",{className:"entry-modal-main-container",children:[p.jsx("h1",{className:"entry-modal-titles",children:"Create an Entry"}),p.jsxs("form",{onSubmit:u,children:[p.jsxs("div",{className:"entry-modal-form-container",children:[p.jsx("label",{className:"entry-modal-label",children:"What is a good name for this entry?"}),p.jsx("input",{type:"text",value:i,onChange:c=>o(c.target.value),required:!0}),p.jsx("p",{className:s.name?"entry-modal-errors":"entry-modal-no-errors",children:`${i.length}/100`})]}),p.jsx("div",{className:"entry-modal-conformation-btn-container",children:p.jsx("button",{type:"submit",className:"modal-button conformation-btn",children:"Submit Changes"})})]})]})}function Wv({entry:t}){const e=je(),n=zt(),{closeModal:r}=Ke(),i=async()=>{await e(mM(t.id)),await r(),n(`notebook/${t.notebook_id}`)},o=()=>{r()};return p.jsxs("div",{className:"entry-modal-main-container",children:[p.jsx("h1",{className:"entry-modal-titles",children:"Are you sure you want to delete:"}),p.jsx("h1",{className:"entry-modal-titles",children:`"${t.name}" ?`}),p.jsx("div",{className:"entry-modal-errors"}),p.jsxs("div",{className:"entry-modal-conformation-btn-container",children:[p.jsx("button",{className:"modal-button conformation-btn",onClick:i,children:"Yes, Delete"}),p.jsx("button",{className:"modal-button conformation-btn",onClick:o,children:"No, Keep"})]})]})}function mN(){const{notebookId:t}=ko(),e=zt(),n=re(u=>u.entries),r=re(u=>u.notebooks[t]),[i,o]=w.useState(""),{setModalContent:s}=Ke();w.useEffect(()=>{let u=Object.values(n).filter(c=>c.notebook_id===parseInt(t));o(u)},[t,n]);const l=u=>{e(`/notebook/${t}/entries/${u.id}`)},a=()=>{s(p.jsx(pN,{}))};return p.jsxs("div",{children:[p.jsx("div",{className:"top-statement-bar",children:p.jsx("p",{className:"mini-page-title",children:"Create an entry in your notebook or keep working on one you have already made."})}),p.jsx("h1",{id:"homepage-user-title",children:`Notebook: ${r==null?void 0:r.name}`}),p.jsx("div",{id:"notebookpage-about-section-container",children:p.jsx("div",{className:"notebookpage-about-section",children:r==null?void 0:r.about})}),p.jsx("h1",{id:"homepage-underline"}),p.jsx("p",{className:"page-title-blocks",children:"Your Entries"}),p.jsxs("div",{id:"homepage-notebook-card-container",children:[n?Object.values(i).map(u=>p.jsx("div",{children:p.jsxs("div",{className:"homepage-notebook-card",children:[p.jsx("div",{className:"homepage-notebook-card-details",onClick:()=>l(u),children:p.jsx("div",{children:u==null?void 0:u.name})}),p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(vi,{}),modalComponent:p.jsx(Wv,{entry:u})})})]})},u.id)):"",p.jsx("div",{id:"homepage-new-notebook-card",onClick:a,children:p.jsx("div",{id:"create-notebook-title",children:"Click here to create a new Entry"})})]})]})}function gN({entry:t}){const e=je(),n=re(u=>u.session.user),[r,i]=w.useState(t.name),[o,s]=w.useState({}),{closeModal:l}=Ke();w.useEffect(()=>{const u={};r<=0&&(u.name="Please provide a name for your entry"),r.length>100&&(u.name="Name must be 100 characters or less"),s(u)},[r]);const a=async u=>{u.preventDefault();const c=await e(wh({id:t.id,userId:n.id,notebookId:t.notebook_id,name:r,content:t.content,isPublic:t.is_public}));c.name?s(c):(i(""),l())};return p.jsxs("div",{className:"entry-modal-main-container",children:[p.jsx("h1",{className:"entry-modal-titles",children:"Edit Entries Name"}),p.jsxs("form",{onSubmit:a,children:[p.jsxs("div",{className:"entry-modal-form-container",children:[p.jsx("label",{className:"entry-modal-label",children:"Do you want to change the name of your Entry?"}),p.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),required:!0}),p.jsx("p",{className:o.name?"entry-modal-errors":"entry-modal-no-errors",children:`${r.length}/100`})]}),p.jsx("div",{className:"entry-modal-conformation-btn-container",children:p.jsx("button",{type:"submit",className:"modal-button conformation-btn",children:"Submit Changes"})})]})]})}var Kv={},bh={},Mh={};Object.defineProperty(Mh,"__esModule",{value:!0});var Xm="html",Zm="head",xl="body",yN=/<([a-zA-Z]+[0-9]?)/,eg=/<head[^]*>/i,tg=/<body[^]*>/i,va=function(t,e){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},Wd=function(t,e){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},ng=typeof window=="object"&&window.DOMParser;if(typeof ng=="function"){var vN=new ng,xN="text/html";Wd=function(t,e){return e&&(t="<".concat(e,">").concat(t,"</").concat(e,">")),vN.parseFromString(t,xN)},va=Wd}if(typeof document=="object"&&document.implementation){var Sl=document.implementation.createHTMLDocument();va=function(t,e){if(e){var n=Sl.documentElement.querySelector(e);return n&&(n.innerHTML=t),Sl}return Sl.documentElement.innerHTML=t,Sl}}var kl=typeof document=="object"&&document.createElement("template"),Kd;kl&&kl.content&&(Kd=function(t){return kl.innerHTML=t,kl.content.childNodes});function SN(t){var e,n,r=t.match(yN),i=r&&r[1]?r[1].toLowerCase():"";switch(i){case Xm:{var o=Wd(t);if(!eg.test(t)){var s=o.querySelector(Zm);(e=s==null?void 0:s.parentNode)===null||e===void 0||e.removeChild(s)}if(!tg.test(t)){var s=o.querySelector(xl);(n=s==null?void 0:s.parentNode)===null||n===void 0||n.removeChild(s)}return o.querySelectorAll(Xm)}case Zm:case xl:{var l=va(t).querySelectorAll(i);return tg.test(t)&&eg.test(t)?l[0].parentNode.childNodes:l}default:{if(Kd)return Kd(t);var s=va(t,xl).querySelector(xl);return s.childNodes}}}Mh.default=SN;var lo={},Nh={},Th={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function n(r){return r.type===e.Tag||r.type===e.Script||r.type===e.Style}t.isTag=n,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype})(Th);var Q={},Pr=Re&&Re.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ls=Re&&Re.__assign||function(){return ls=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ls.apply(this,arguments)};Object.defineProperty(Q,"__esModule",{value:!0});Q.cloneNode=Q.hasChildren=Q.isDocument=Q.isDirective=Q.isComment=Q.isText=Q.isCDATA=Q.isTag=Q.Element=Q.Document=Q.CDATA=Q.NodeWithChildren=Q.ProcessingInstruction=Q.Comment=Q.Text=Q.DataNode=Q.Node=void 0;var bt=Th,Oh=function(){function t(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(e){return e===void 0&&(e=!1),Ph(this,e)},t}();Q.Node=Oh;var Su=function(t){Pr(e,t);function e(n){var r=t.call(this)||this;return r.data=n,r}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),e}(Oh);Q.DataNode=Su;var Jv=function(t){Pr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=bt.ElementType.Text,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(Su);Q.Text=Jv;var qv=function(t){Pr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=bt.ElementType.Comment,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(Su);Q.Comment=qv;var Gv=function(t){Pr(e,t);function e(n,r){var i=t.call(this,r)||this;return i.name=n,i.type=bt.ElementType.Directive,i}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(Su);Q.ProcessingInstruction=Gv;var ku=function(t){Pr(e,t);function e(n){var r=t.call(this)||this;return r.children=n,r}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),e}(Oh);Q.NodeWithChildren=ku;var Yv=function(t){Pr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=bt.ElementType.CDATA,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(ku);Q.CDATA=Yv;var Qv=function(t){Pr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=bt.ElementType.Root,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(ku);Q.Document=Qv;var Xv=function(t){Pr(e,t);function e(n,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?bt.ElementType.Script:n==="style"?bt.ElementType.Style:bt.ElementType.Tag);var s=t.call(this,i)||this;return s.name=n,s.attribs=r,s.type=o,s}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,o;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[r]}})},enumerable:!1,configurable:!0}),e}(ku);Q.Element=Xv;function Zv(t){return(0,bt.isTag)(t)}Q.isTag=Zv;function ex(t){return t.type===bt.ElementType.CDATA}Q.isCDATA=ex;function tx(t){return t.type===bt.ElementType.Text}Q.isText=tx;function nx(t){return t.type===bt.ElementType.Comment}Q.isComment=nx;function rx(t){return t.type===bt.ElementType.Directive}Q.isDirective=rx;function ix(t){return t.type===bt.ElementType.Root}Q.isDocument=ix;function kN(t){return Object.prototype.hasOwnProperty.call(t,"children")}Q.hasChildren=kN;function Ph(t,e){e===void 0&&(e=!1);var n;if(tx(t))n=new Jv(t.data);else if(nx(t))n=new qv(t.data);else if(Zv(t)){var r=e?Cc(t.children):[],i=new Xv(t.name,ls({},t.attribs),r);r.forEach(function(a){return a.parent=i}),t.namespace!=null&&(i.namespace=t.namespace),t["x-attribsNamespace"]&&(i["x-attribsNamespace"]=ls({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(i["x-attribsPrefix"]=ls({},t["x-attribsPrefix"])),n=i}else if(ex(t)){var r=e?Cc(t.children):[],o=new Yv(r);r.forEach(function(u){return u.parent=o}),n=o}else if(ix(t)){var r=e?Cc(t.children):[],s=new Qv(r);r.forEach(function(u){return u.parent=s}),t["x-mode"]&&(s["x-mode"]=t["x-mode"]),n=s}else if(rx(t)){var l=new Gv(t.name,t.data);t["x-name"]!=null&&(l["x-name"]=t["x-name"],l["x-publicId"]=t["x-publicId"],l["x-systemId"]=t["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(t.type));return n.startIndex=t.startIndex,n.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(n.sourceCodeLocation=t.sourceCodeLocation),n}Q.cloneNode=Ph;function Cc(t){for(var e=t.map(function(r){return Ph(r,!0)}),n=1;n<e.length;n++)e[n].prev=e[n-1],e[n-1].next=e[n];return e}(function(t){var e=Re&&Re.__createBinding||(Object.create?function(l,a,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(a,u);(!d||("get"in d?!a.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return a[u]}}),Object.defineProperty(l,c,d)}:function(l,a,u,c){c===void 0&&(c=u),l[c]=a[u]}),n=Re&&Re.__exportStar||function(l,a){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,l,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var r=Th,i=Q;n(Q,t);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function l(a,u,c){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(c=u,u=o),typeof a=="object"&&(u=a,a=void 0),this.callback=a??null,this.options=u??o,this.elementCB=c??null}return l.prototype.onparserinit=function(a){this.parser=a},l.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(a){this.handleCallback(a)},l.prototype.onclosetag=function(){this.lastNode=null;var a=this.tagStack.pop();this.options.withEndIndices&&(a.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(a)},l.prototype.onopentag=function(a,u){var c=this.options.xmlMode?r.ElementType.Tag:void 0,d=new i.Element(a,u,void 0,c);this.addNode(d),this.tagStack.push(d)},l.prototype.ontext=function(a){var u=this.lastNode;if(u&&u.type===r.ElementType.Text)u.data+=a,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var c=new i.Text(a);this.addNode(c),this.lastNode=c}},l.prototype.oncomment=function(a){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=a;return}var u=new i.Comment(a);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var a=new i.Text(""),u=new i.CDATA([a]);this.addNode(u),a.parent=u,this.lastNode=a},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(a,u){var c=new i.ProcessingInstruction(a,u);this.addNode(c)},l.prototype.handleCallback=function(a){if(typeof this.callback=="function")this.callback(a,this.dom);else if(a)throw a},l.prototype.addNode=function(a){var u=this.tagStack[this.tagStack.length-1],c=u.children[u.children.length-1];this.options.withStartIndices&&(a.startIndex=this.parser.startIndex),this.options.withEndIndices&&(a.endIndex=this.parser.endIndex),u.children.push(a),c&&(a.prev=c,c.next=a),a.parent=u,this.lastNode=null},l}();t.DomHandler=s,t.default=s})(Nh);var ox={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES=void 0,t.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,n){return e[n.toLowerCase()]=n,e},{})})(ox);Object.defineProperty(lo,"__esModule",{value:!0});lo.formatDOM=lo.formatAttributes=void 0;var wl=Nh,wN=ox;function EN(t){return wN.CASE_SENSITIVE_TAG_NAMES_MAP[t]}function sx(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];e[i.name]=i.value}return e}lo.formatAttributes=sx;function CN(t){t=t.toLowerCase();var e=EN(t);return e||t}function lx(t,e,n){e===void 0&&(e=null);for(var r=[],i,o=0,s=t.length;o<s;o++){var l=t[o];switch(l.nodeType){case 1:{var a=CN(l.nodeName);i=new wl.Element(a,sx(l.attributes)),i.children=lx(a==="template"?l.content.childNodes:l.childNodes,i);break}case 3:i=new wl.Text(l.nodeValue);break;case 8:i=new wl.Comment(l.nodeValue);break;default:continue}var u=r[o-1]||null;u&&(u.next=i),i.parent=e,i.prev=u,i.next=null,r.push(i)}return n&&(i=new wl.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=r[0]||null,i.parent=e,r.unshift(i),r[1]&&(r[1].prev=r[0])),r}lo.formatDOM=lx;var bN=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bh,"__esModule",{value:!0});var MN=bN(Mh),NN=lo,TN=/<(![a-zA-Z\s]+)>/;function ON(t){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];var e=t.match(TN),n=e?e[1]:void 0;return(0,NN.formatDOM)((0,MN.default)(t),null,n)}bh.default=ON;var wu={},mn={},Eu={},PN=0;Eu.SAME=PN;var RN=1;Eu.CAMELCASE=RN;Eu.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const ax=0,Rr=1,Cu=2,bu=3,Rh=4,ux=5,cx=6;function DN(t){return et.hasOwnProperty(t)?et[t]:null}function xt(t,e,n,r,i,o,s){this.acceptsBooleans=e===Cu||e===bu||e===Rh,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}const et={},jN=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];jN.forEach(t=>{et[t]=new xt(t,ax,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([t,e])=>{et[t]=new xt(t,Rr,!1,e,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(t=>{et[t]=new xt(t,Cu,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(t=>{et[t]=new xt(t,Cu,!1,t,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(t=>{et[t]=new xt(t,bu,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(t=>{et[t]=new xt(t,bu,!0,t,null,!1,!1)});["capture","download"].forEach(t=>{et[t]=new xt(t,Rh,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(t=>{et[t]=new xt(t,cx,!1,t,null,!1,!1)});["rowSpan","start"].forEach(t=>{et[t]=new xt(t,ux,!1,t.toLowerCase(),null,!1,!1)});const Dh=/[\-\:]([a-z])/g,jh=t=>t[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(t=>{const e=t.replace(Dh,jh);et[e]=new xt(e,Rr,!1,t,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(t=>{const e=t.replace(Dh,jh);et[e]=new xt(e,Rr,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(t=>{const e=t.replace(Dh,jh);et[e]=new xt(e,Rr,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(t=>{et[t]=new xt(t,Rr,!1,t.toLowerCase(),null,!1,!1)});const AN="xlinkHref";et[AN]=new xt("xlinkHref",Rr,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(t=>{et[t]=new xt(t,Rr,!1,t.toLowerCase(),null,!0,!0)});const{CAMELCASE:IN,SAME:LN,possibleStandardNames:rg}=Eu,_N=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",zN=_N+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",FN=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+zN+"]*$")),BN=Object.keys(rg).reduce((t,e)=>{const n=rg[e];return n===LN?t[e]=e:n===IN?t[e.toLowerCase()]=e:t[e]=n,t},{});mn.BOOLEAN=bu;mn.BOOLEANISH_STRING=Cu;mn.NUMERIC=ux;mn.OVERLOADED_BOOLEAN=Rh;mn.POSITIVE_NUMERIC=cx;mn.RESERVED=ax;mn.STRING=Rr;mn.getPropertyInfo=DN;mn.isCustomAttribute=FN;mn.possibleStandardNames=BN;var Ah={},Ih={},ig=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,$N=/\n/g,VN=/^\s*/,HN=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,UN=/^:\s*/,WN=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,KN=/^[;\s]*/,JN=/^\s+|\s+$/g,qN=`
`,og="/",sg="*",$r="",GN="comment",YN="declaration",QN=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(h){var g=h.match($N);g&&(n+=g.length);var x=h.lastIndexOf(qN);r=~x?h.length-x:r+h.length}function o(){var h={line:n,column:r};return function(g){return g.position=new s(h),u(),g}}function s(h){this.start=h,this.end={line:n,column:r},this.source=e.source}s.prototype.content=t;function l(h){var g=new Error(e.source+":"+n+":"+r+": "+h);if(g.reason=h,g.filename=e.source,g.line=n,g.column=r,g.source=t,!e.silent)throw g}function a(h){var g=h.exec(t);if(g){var x=g[0];return i(x),t=t.slice(x.length),g}}function u(){a(VN)}function c(h){var g;for(h=h||[];g=d();)g!==!1&&h.push(g);return h}function d(){var h=o();if(!(og!=t.charAt(0)||sg!=t.charAt(1))){for(var g=2;$r!=t.charAt(g)&&(sg!=t.charAt(g)||og!=t.charAt(g+1));)++g;if(g+=2,$r===t.charAt(g-1))return l("End of comment missing");var x=t.slice(2,g-2);return r+=2,i(x),t=t.slice(g),r+=2,h({type:GN,comment:x})}}function f(){var h=o(),g=a(HN);if(g){if(d(),!a(UN))return l("property missing ':'");var x=a(WN),y=h({type:YN,property:lg(g[0].replace(ig,$r)),value:x?lg(x[0].replace(ig,$r)):$r});return a(KN),y}}function m(){var h=[];c(h);for(var g;g=f();)g!==!1&&(h.push(g),c(h));return h}return u(),m()};function lg(t){return t?t.replace(JN,$r):$r}var XN=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ih,"__esModule",{value:!0});var ZN=XN(QN);function eT(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,ZN.default)(t),i=typeof e=="function";return r.forEach(function(o){if(o.type==="declaration"){var s=o.property,l=o.value;i?e(s,l,o):l&&(n=n||{},n[s]=l)}}),n}Ih.default=eT;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.camelCase=void 0;var tT=/^--[a-zA-Z0-9-]+$/,nT=/-([a-z])/g,rT=/^[^-]+$/,iT=/^-(webkit|moz|ms|o|khtml)-/,oT=/^-(ms)-/,sT=function(t){return!t||rT.test(t)||tT.test(t)},lT=function(t,e){return e.toUpperCase()},ag=function(t,e){return"".concat(e,"-")},aT=function(t,e){return e===void 0&&(e={}),sT(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(oT,ag):t=t.replace(iT,ag),t.replace(nT,lT))};Mu.camelCase=aT;var uT=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},cT=uT(Ih),dT=Mu;function Jd(t,e){var n={};return!t||typeof t!="string"||(0,cT.default)(t,function(r,i){r&&i&&(n[(0,dT.camelCase)(r,e)]=i)}),n}Jd.default=Jd;var fT=Jd;(function(t){var e=Re&&Re.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.returnFirstArg=t.canTextBeChildOfNode=t.ELEMENTS_WITH_NO_TEXT_CHILDREN=t.PRESERVE_CUSTOM_ATTRIBUTES=t.setStyleProp=t.isCustomComponent=void 0;var n=w,r=e(fT),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(c,d){return c.includes("-")?!i.has(c):!!(d&&typeof d.is=="string")}t.isCustomComponent=o;var s={reactCompat:!0};function l(c,d){if(typeof c=="string"){if(!c.trim()){d.style={};return}try{d.style=(0,r.default)(c,s)}catch{d.style={}}}}t.setStyleProp=l,t.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,t.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var a=function(c){return!t.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(c.name)};t.canTextBeChildOfNode=a;var u=function(c){return c};t.returnFirstArg=u})(Ah);Object.defineProperty(wu,"__esModule",{value:!0});var Wo=mn,ug=Ah,hT=["checked","value"],pT=["input","select","textarea"],mT={reset:!0,submit:!0};function gT(t,e){t===void 0&&(t={});var n={},r=!!(t.type&&mT[t.type]);for(var i in t){var o=t[i];if((0,Wo.isCustomAttribute)(i)){n[i]=o;continue}var s=i.toLowerCase(),l=cg(s);if(l){var a=(0,Wo.getPropertyInfo)(l);switch(hT.includes(l)&&pT.includes(e)&&!r&&(l=cg("default"+s)),n[l]=o,a&&a.type){case Wo.BOOLEAN:n[l]=!0;break;case Wo.OVERLOADED_BOOLEAN:o===""&&(n[l]=!0);break}continue}ug.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=o)}return(0,ug.setStyleProp)(t.style,n),n}wu.default=gT;function cg(t){return Wo.possibleStandardNames[t]}var Lh={},yT=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lh,"__esModule",{value:!0});var bc=w,vT=yT(wu),as=Ah,xT={cloneElement:bc.cloneElement,createElement:bc.createElement,isValidElement:bc.isValidElement};function dx(t,e){e===void 0&&(e={});for(var n=[],r=typeof e.replace=="function",i=e.transform||as.returnFirstArg,o=e.library||xT,s=o.cloneElement,l=o.createElement,a=o.isValidElement,u=t.length,c=0;c<u;c++){var d=t[c];if(r){var f=e.replace(d,c);if(a(f)){u>1&&(f=s(f,{key:f.key||c})),n.push(i(f,d,c));continue}}if(d.type==="text"){var m=!d.data.trim().length;if(m&&d.parent&&!(0,as.canTextBeChildOfNode)(d.parent)||e.trim&&m)continue;n.push(i(d.data,d,c));continue}var h=d,g={};ST(h)?((0,as.setStyleProp)(h.attribs.style,h.attribs),g=h.attribs):h.attribs&&(g=(0,vT.default)(h.attribs,h.name));var x=void 0;switch(d.type){case"script":case"style":d.children[0]&&(g.dangerouslySetInnerHTML={__html:d.children[0].data});break;case"tag":d.name==="textarea"&&d.children[0]?g.defaultValue=d.children[0].data:d.children&&d.children.length&&(x=dx(d.children,e));break;default:continue}u>1&&(g.key=c),n.push(i(l(d.name,g,x),d,c))}return n.length===1?n[0]:n}Lh.default=dx;function ST(t){return as.PRESERVE_CUSTOM_ATTRIBUTES&&t.type==="tag"&&(0,as.isCustomComponent)(t.name,t.attribs)}(function(t){var e=Re&&Re.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToDOM=t.domToReact=t.attributesToProps=t.Text=t.ProcessingInstruction=t.Element=t.Comment=void 0;var n=e(bh);t.htmlToDOM=n.default;var r=e(wu);t.attributesToProps=r.default;var i=e(Lh);t.domToReact=i.default;var o=Nh;Object.defineProperty(t,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(t,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(t,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return o.Text}});var s={lowerCaseAttributeNames:!1};function l(a,u){if(typeof a!="string")throw new TypeError("First argument must be a string");return a?(0,i.default)((0,n.default)(a,(u==null?void 0:u.htmlparser2)||s),u):[]}t.default=l})(Kv);const dg=gf(Kv),_h=dg.default||dg;function fx({comment:t}){const e=je(),{closeModal:n}=Ke(),r=async o=>{o.preventDefault(),await e(vM(t)),await e(Or()),n()},i=()=>{n()};return p.jsxs("div",{className:"comment-modal-main-container",children:[p.jsx("h3",{className:"comment-modal-titles",children:"Are you sure you want to delete this comment?"}),p.jsxs("div",{className:"comment-modal",children:[p.jsx("button",{className:"modal-button delete-comment",onClick:r,children:"Yes, delete"}),p.jsx("button",{className:"modal-button delete-comment",onClick:i,children:"No, do not delete"})]})]})}function hx({comment:t}){const e=je(),{closeModal:n}=Ke(),[r,i]=w.useState(t.comment),o=async s=>{if(s.preventDefault(),r.length>600||r<=0)return;const l={id:t.id,userId:t.user_id,entryId:t.entry_id,comment:r};await e(yM(l)),await e(Or()),n()};return p.jsx("div",{id:"edit-comment-modal",children:p.jsx("form",{onSubmit:o,children:p.jsxs("div",{className:"edit-comment-inner-form",children:[p.jsx("label",{className:"edit-comment-label",children:"Edit Comment:"}),p.jsx("textarea",{className:"edit-comment-input",rows:16,type:"text",value:r,onChange:s=>i(s.target.value)}),p.jsxs("div",{className:"comment-validation-and-button",children:[p.jsx("p",{className:r.length>600||r.length<=0?"comment-error":"comment-length",children:`Comment must be under: ${r.length}/600`}),p.jsx("button",{className:" edit-comment-button modal-button",type:"submit",children:"Edit Comment"})]})]})})})}function kT(){const{entryId:t}=ko(),e=re(s=>s.entries[t]),n=re(s=>s.users),r=re(s=>s.session.user),[i,o]=w.useState(!1);if(w.useEffect(()=>{e&&o(!0)},[e]),i)return p.jsxs("div",{className:"entry-preview-content-container",children:[e!=null&&e.content?p.jsx("div",{className:"entry-preview-content-container",children:p.jsx("div",{id:"entry-preview-content",type:"HTML",children:e.content?_h(e.content):""})}):p.jsx("p",{id:"entry-preview-content",children:"It looks like you havn't written anything yet.  Click on the edit entry button to get started!"}),(e==null?void 0:e.content)==="<p></p>"&&p.jsx("p",{children:"It looks like you havn't written anything yet.  Click on the edit entry button to get started!"}),p.jsx("h1",{className:"entrypage-underline"}),p.jsx("div",{children:e!=null&&e.comments?p.jsxs("div",{children:[p.jsx("h2",{children:"Comments on your Entry:"}),e==null?void 0:e.comments.map(s=>{var l,a;return p.jsxs("div",{children:[p.jsxs("div",{className:"entrypage-comment-title",children:[p.jsxs("div",{className:"post-user-container",children:[p.jsx("img",{src:(l=n[s.user_id])==null?void 0:l.profile_image}),p.jsx("div",{children:(a=n[s.user_id])==null?void 0:a.username})]}),p.jsxs("div",{children:[s.user_id===r.id?p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(qs,{}),modalComponent:p.jsx(hx,{comment:s})})}):"",p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(vi,{}),modalComponent:p.jsx(fx,{comment:s})})})]})]}),p.jsx("div",{className:"entrypage-comment",children:s.comment})]},s.id)})]}):p.jsx("h3",{children:"You have no comments on this entry"})}),p.jsx("h1",{className:"entrypage-underline"})]})}function Ge(t){this.content=t}Ge.prototype={constructor:Ge,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Ge(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ge(n)},addToStart:function(t,e){return new Ge([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ge(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Ge(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ge.from(t),t.size?new Ge(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ge.from(t),t.size?new Ge(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ge.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ge.from=function(t){if(t instanceof Ge)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ge(e)};function px(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=px(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function mx(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let u=mx(s.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class O{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new O(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new O(r,i)}cutByIndex(e,n){return e==n?O.empty:e==0&&n==this.content.length?this:new O(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new O(i,o)}addToStart(e){return new O([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new O(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return px(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return mx(this,e,n,r)}findIndex(e,n=-1){if(e==0)return El(0,e);if(e==this.size)return El(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?El(r+1,s):El(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return O.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new O(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return O.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new O(n||e,r)}static from(e){if(!e)return O.empty;if(e instanceof O)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new O([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}O.empty=new O([],0);const Mc={index:0,offset:0};function El(t,e){return Mc.index=t,Mc.offset=e,Mc}function xa(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!xa(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!xa(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let le=class qd{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&xa(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return qd.none;if(e instanceof qd)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};le.none=[];class Sa extends Error{}class I{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=yx(this.content,e+this.openStart,n);return r&&new I(r,this.openStart,this.openEnd)}removeBetween(e,n){return new I(gx(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return I.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new I(O.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new I(e,r,i)}}I.empty=new I(O.empty,0,0);function gx(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(gx(o.content,e-i-1,n-i-1)))}function yx(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=yx(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function wT(t,e,n){if(n.openStart>t.depth)throw new Sa("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Sa("Inconsistent open depths");return vx(t,e,n,0)}function vx(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=vx(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return ti(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=ET(n,t);return ti(o,Sx(t,s,l,e,r))}else return ti(o,ka(t,e,r))}function xx(t,e){if(!e.type.compatibleContent(t.type))throw new Sa("Cannot join "+e.type.name+" onto "+t.type.name)}function Gd(t,e,n){let r=t.node(n);return xx(r,e.node(n)),r}function ei(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function us(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(ei(t.nodeAfter,r),o++));for(let l=o;l<s;l++)ei(i.child(l),r);e&&e.depth==n&&e.textOffset&&ei(e.nodeBefore,r)}function ti(t,e){return t.type.checkContent(e),t.copy(e)}function Sx(t,e,n,r,i){let o=t.depth>i&&Gd(t,e,i+1),s=r.depth>i&&Gd(n,r,i+1),l=[];return us(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(xx(o,s),ei(ti(o,Sx(t,e,n,r,i+1)),l)):(o&&ei(ti(o,ka(t,e,i+1)),l),us(e,n,i,l),s&&ei(ti(s,ka(n,r,i+1)),l)),us(r,null,i,l),new O(l)}function ka(t,e,n){let r=[];if(us(null,t,n,r),t.depth>n){let i=Gd(t,e,n+1);ei(ti(i,ka(t,e,n+1)),r)}return us(e,null,n,r),new O(r)}function ET(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(O.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class js{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return le.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new wa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new js(n,r,o)}static resolveCached(e,n){for(let i=0;i<Nc.length;i++){let o=Nc[i];if(o.pos==n&&o.doc==e)return o}let r=Nc[Tc]=js.resolve(e,n);return Tc=(Tc+1)%CT,r}}let Nc=[],Tc=0,CT=12;class wa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const bT=Object.create(null);let ni=class Yd{constructor(e,n,r,i=le.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||O.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&xa(this.attrs,n||e.defaultAttrs||bT)&&le.sameSet(this.marks,r||le.none)}copy(e=null){return e==this.content?this:new Yd(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Yd(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return I.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new I(u,i.depth-s,o.depth-s)}replace(e,n,r){return wT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return js.resolveCached(this,e)}resolveNoCache(e){return js.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),kx(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=O.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=le.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!le.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=O.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};ni.prototype.text=void 0;class Ea extends ni{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):kx(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ea(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ea(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function kx(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class hi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new MT(e,n);if(r.next==null)return hi.empty;let i=wx(r);r.next&&r.err("Unexpected trailing text");let o=jT(DT(i));return AT(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return O.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:d}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,l.concat(c));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}hi.empty=new hi(!0);class MT{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function wx(t){let e=[];do e.push(NT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function NT(t){let e=[];do e.push(TT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function TT(t){let e=RT(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=OT(t,e);else break;return e}function fg(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function OT(t,e){let n=fg(t),r=n;return t.eat(",")&&(t.next!="}"?r=fg(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function PT(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function RT(t){if(t.eat("(")){let e=wx(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=PT(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function DT(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=n();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Ex(t,e){return e-t}function hg(t,e){let n=[];return r(e),n.sort(Ex);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function jT(t){let e=Object.create(null);return n(hg(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);hg(t,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new hi(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(Ex);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function AT(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Cx(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function bx(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Mx(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new IT(t[n]);return e}let pg=class Nx{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Mx(r.attrs),this.defaultAttrs=Cx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==hi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:bx(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ni(this,this.computeAttrs(e),O.from(n),le.setFrom(r))}createChecked(e=null,n,r){return n=O.from(n),this.checkContent(n),new ni(this,this.computeAttrs(e),n,le.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=O.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(O.empty,!0);return o?new ni(this,e,n.append(o),le.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:le.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Nx(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class IT{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Nu{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Mx(i.attrs),this.excluded=null;let o=Cx(this.attrs);this.instance=o?new le(this,o):null}create(e=null){return!e&&this.instance?this.instance:new le(this,bx(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Nu(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class LT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ge.from(e.nodes),n.marks=Ge.from(e.marks||{}),this.nodes=pg.compile(this.spec.nodes,this),this.marks=Nu.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=hi.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?mg(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:mg(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof pg){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ea(r,r.defaultAttrs,e,le.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return ni.fromJSON(this,e)}markFromJSON(e){return le.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function mg(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function _T(t){return t.tag!=null}function zT(t){return t.style!=null}class ao{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{_T(r)?this.tags.push(r):zT(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new yg(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new yg(this,n,!0);return r.addAll(e,n.from,n.to),I.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if($T(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=vg(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=vg(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ao(e,ao.schemaRules(e)))}}const Tx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},FT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ox={ol:!0,ul:!0},Ca=1,ba=2,cs=4;function gg(t,e,n){return e!=null?(e?Ca:0)|(e==="full"?ba:0):t&&t.whitespace=="pre"?Ca|ba:n&~cs}class Cl{constructor(e,n,r,i,o,s,l){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=l,this.content=[],this.activeMarks=le.none,this.stashMarks=[],this.match=s||(l&cs?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(O.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ca)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=O.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(O.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):VT(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Tx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class yg{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=gg(null,n.preserveWhitespace,0)|(r?cs:0);i?o=new Cl(i.type,i.attrs,le.none,le.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Cl(null,null,le.none,le.none,!0,null,s):o=new Cl(e.schema.topNodeType,null,le.none,le.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.style;if(!r||!r.length)return n();let i=this.readStyles(e.style);if(!i)return;let[o,s]=i,l=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],l);for(let a=0;a<o.length;a++)this.addPendingMark(o[a]);n();for(let a=0;a<o.length;a++)this.removePendingMark(o[a],l);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&ba||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Ca)r.options&ba?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;Ox.hasOwnProperty(r)&&this.parser.normalizeLists&&BT(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:FT.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,l=this.top,a=this.needsBlock;if(Tx.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),s=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(l),this.needsBlock=a}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=le.none,r=le.none;for(let i=0,o=e.length;i<o;i++){let s=e.item(i);for(let l=void 0;;){let a=this.parser.matchStyle(s,e.getPropertyValue(s),this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(u=>{a.clearMark(u)&&(r=u.addToSet(r))}):n=this.parser.schema.marks[a.mark].create(a.attrs).addToSet(n),a.consuming===!1)l=a;else break}}return[n,r]}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a)}i&&this.sync(l)&&this.open--,s&&this.removePendingMark(s,l)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=gg(e,i,o.options);o.options&cs&&o.content.length==0&&(s|=cs),this.nodes.push(new Cl(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=HT(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}}function BT(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Ox.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function $T(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function vg(t){let e={};for(let n in t)e[n]=t[n];return e}function VT(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function HT(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class wn{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Oc(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=wn.renderSpec(Oc(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&wn.renderSpec(Oc(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,l=r?e.createElementNS(r,i):e.createElement(i),a=n[1],u=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){u=2;for(let c in a)if(a[c]!=null){let d=c.indexOf(" ");d>0?l.setAttributeNS(c.slice(0,d),c.slice(d+1),a[c]):l.setAttribute(c,a[c])}}for(let c=u;c<n.length;c++){let d=n[c];if(d===0){if(c<n.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:m}=wn.renderSpec(e,d,r);if(l.appendChild(f),m){if(s)throw new RangeError("Multiple content holes");s=m}}}return{dom:l,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new wn(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=xg(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return xg(e.marks)}}function xg(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Oc(t){return t.document||window.document}const Px=65535,Rx=Math.pow(2,16);function UT(t,e){return t+e*Rx}function Sg(t){return t&Px}function WT(t){return(t-(t&Px))/Rx}const Dx=1,jx=2,Bl=4,Ax=8;class Qd{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Ax)>0}get deletedBefore(){return(this.delInfo&(Dx|Bl))>0}get deletedAfter(){return(this.delInfo&(jx|Bl))>0}get deletedAcross(){return(this.delInfo&Bl)>0}}class Pt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Pt.empty)return Pt.empty}recover(e){let n=0,r=Sg(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+WT(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,m=a+i+(f<0?0:c);if(r)return m;let h=e==(n<0?a:d)?null:UT(l/3,e-a),g=e==a?jx:e==d?Dx:Bl;return(n<0?e!=a:e!=d)&&(g|=Ax),new Qd(m,g,h)}i+=c-u}return r?e+i:new Qd(e+i,0,null)}touches(e,n){let r=0,i=Sg(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Pt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Pt.empty:new Pt(e<0?[0,-e,0]:[0,0,e])}}Pt.empty=new Pt([]);class Gi{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Gi(this.maps,this.mirror,e,n)}copy(){return new Gi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Gi;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Qd(e,i,null)}}const Pc=Object.create(null);class at{getMap(){return Pt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Pc[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Pc)throw new RangeError("Duplicate use of step JSON ID "+e);return Pc[e]=n,n.prototype.jsonID=e,n}}class De{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new De(e,null)}static fail(e){return new De(null,e)}static fromReplace(e,n,r,i){try{return De.ok(e.replace(n,r,i))}catch(o){if(o instanceof Sa)return De.fail(o.message);throw o}}}function zh(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(zh(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return O.fromArray(r)}class ar extends at{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new I(zh(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return De.fromReplace(e,this.from,this.to,o)}invert(){return new En(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ar(n.pos,r.pos,this.mark)}merge(e){return e instanceof ar&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ar(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ar(n.from,n.to,e.markFromJSON(n.mark))}}at.jsonID("addMark",ar);class En extends at{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new I(zh(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return De.fromReplace(e,this.from,this.to,r)}invert(){return new ar(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new En(n.pos,r.pos,this.mark)}merge(e){return e instanceof En&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new En(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new En(n.from,n.to,e.markFromJSON(n.mark))}}at.jsonID("removeMark",En);class ur extends at{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return De.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return De.fromReplace(e,this.pos,this.pos+1,new I(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ur(this.pos,n.marks[i]);return new ur(this.pos,this.mark)}}return new uo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ur(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ur(n.pos,e.markFromJSON(n.mark))}}at.jsonID("addNodeMark",ur);class uo extends at{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return De.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return De.fromReplace(e,this.pos,this.pos+1,new I(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ur(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new uo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new uo(n.pos,e.markFromJSON(n.mark))}}at.jsonID("removeNodeMark",uo);class Be extends at{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Xd(e,this.from,this.to)?De.fail("Structure replace would overwrite content"):De.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Pt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Be(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Be(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Be)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?I.empty:new I(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Be(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?I.empty:new I(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Be(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Be(n.from,n.to,I.fromJSON(e,n.slice),!!n.structure)}}at.jsonID("replace",Be);class Ve extends at{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Xd(e,this.from,this.gapFrom)||Xd(e,this.gapTo,this.to)))return De.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return De.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?De.fromReplace(e,this.from,this.to,r):De.fail("Content does not fit in gap")}getMap(){return new Pt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ve(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Ve(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ve(n.from,n.to,n.gapFrom,n.gapTo,I.fromJSON(e,n.slice),n.insert,!!n.structure)}}at.jsonID("replaceAround",Ve);function Xd(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function KT(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),m=Math.min(u+a.nodeSize,n),h=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(h)||(s&&s.to==f&&s.mark.eq(d[g])?s.to=m:i.push(s=new En(f,m,d[g])));l&&l.to==f?l.to=m:o.push(l=new ar(f,m,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function JT(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Nu){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,n);for(let c=0;c<a.length;c++){let d=a[c],f;for(let m=0;m<i.length;m++){let h=i[m];h.step==o-1&&d.eq(i[m].style)&&(f=h)}f?(f.to=u,f.step=o):i.push({style:d,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>t.step(new En(s.from,s.to,s.style)))}function Ix(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let u=o.child(a),c=l+u.nodeSize,d=r.matchType(u.type);if(!d)s.push(new Be(l,c,I.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new En(l,c,u.marks[f]));if(i&&u.isText&&n.whitespace!="pre"){let f,m=/\r?\n|\r/g,h;for(;f=m.exec(u.text);)h||(h=new I(O.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new Be(l+f.index,l+f.index+f[0].length,h))}}l=c}if(!r.validEnd){let a=r.fillBefore(O.empty,!0);t.replace(l,l,new I(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function qT(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function wo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!qT(i,o,s))break}return null}function GT(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=O.empty,d=0;for(let h=o,g=!1;h>n;h--)g||r.index(h)>0?(g=!0,c=O.from(r.node(h).copy(c)),d++):a--;let f=O.empty,m=0;for(let h=o,g=!1;h>n;h--)g||i.after(h+1)<i.end(h)?(g=!0,f=O.from(i.node(h).copy(f)),m++):u++;t.step(new Ve(a,u,s,l,new I(c.append(f),d,m),c.size-d,!0))}function Fh(t,e,n=null,r=t){let i=YT(t,e),o=i&&QT(r,e);return o?i.map(kg).concat({type:e,attrs:n}).concat(o.map(kg)):null}function kg(t){return{type:t,attrs:null}}function YT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function QT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:s}function XT(t,e,n){let r=O.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=O.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Ve(i,o,i,o,new I(r,0,0),n.length,!0))}function ZT(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&nO(t.doc,t.mapping.slice(o).map(l),r)){let a=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!m?a=!1:!f&&m&&(a=!0)}a===!1&&tO(t,s,l,o),Ix(t,t.mapping.slice(o).map(l,1),r,void 0,a===null);let u=t.mapping.slice(o),c=u.map(l,1),d=u.map(l+s.nodeSize,1);return t.step(new Ve(c,d,c+1,d-1,new I(O.from(r.create(i,null,s.marks)),0,0),1,!0)),a===!0&&eO(t,s,l,o),!1}})}function eO(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function tO(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function nO(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function rO(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ve(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new I(O.from(s),0,0),1,!0))}function Yi(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(f,d.childCount),h=r&&r[c+1];h&&(m=m.replaceChild(0,h.type.create(h.attrs)));let g=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(m))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function iO(t,e,n=1,r){let i=t.doc.resolve(e),o=O.empty,s=O.empty;for(let l=i.depth,a=i.depth-n,u=n-1;l>a;l--,u--){o=O.from(i.node(l).copy(o));let c=r&&r[u];s=O.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}t.step(new Be(e,e,new I(o.append(s),n,n),!0))}function Dr(t,e){let n=t.resolve(e),r=n.index();return Lx(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Lx(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Tu(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&Lx(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function oO(t,e,n){let r=new Be(e-n,e+n,I.empty,!0);t.step(r)}function sO(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function _x(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let d=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Ou(t,e,n=e,r=I.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return zx(i,o,r)?new Be(e,n,r):new lO(i,o,r).fit()}function zx(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class lO{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=O.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=O.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new I(o,s,l);return e>-1?new Ve(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Be(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Rc(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(n==1&&(s?u.matchType(s.type)||(d=u.fillBefore(O.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Rc(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new I(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Rc(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new I(Ko(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new I(Ko(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));d=d.matchFragment(i)}let m=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let g=l.child(u),x=d.matchType(g.type);if(!x)break;u++,(u>1||a==0||g.content.size)&&(d=x,c.push(Fx(g.mark(f.allowedMarks(g.marks)),u==1?a:0,u==l.childCount?m:-1)))}let h=u==l.childCount;h||(m=-1),this.placed=Jo(this.placed,n,O.from(c)),this.frontier[n].match=d,h&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,x=l;g<m;g++){let y=x.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),x=y.content}this.unplaced=h?e==0?I.empty:new I(Ko(s.content,e-1,1),e-1,m<0?s.openEnd:e-1):new I(Ko(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Dc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Dc(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=Dc(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Jo(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Jo(this.placed,this.depth,O.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(O.empty,!0);n.childCount&&(this.placed=Jo(this.placed,this.frontier.length,n))}}function Ko(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ko(t.firstChild.content,e-1,n)))}function Jo(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Jo(t.lastChild.content,e-1,n)))}function Rc(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Fx(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Fx(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(O.empty,!0)))),t.copy(r)}function Dc(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!aO(n,o.content,s)?l:null}function aO(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function uO(t){return t.spec.defining||t.spec.definingForContent}function cO(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(zx(i,o,r))return t.step(new Be(e,n,r));let s=$x(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let f=i.depth,m=i.pos-1;f>0;f--,m--){let h=i.node(f).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(f)>-1?l=f:i.before(f)==m&&s.splice(1,0,-f)}let a=s.indexOf(l),u=[],c=r.openStart;for(let f=r.content,m=0;;m++){let h=f.firstChild;if(u.push(h),m==r.openStart)break;f=h.content}for(let f=c-1;f>=0;f--){let m=u[f],h=uO(m.type);if(h&&!m.sameMarkup(i.node(Math.abs(l)-1)))c=f;else if(h||!m.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let m=(f+c+1)%(r.openStart+1),h=u[m];if(h)for(let g=0;g<s.length;g++){let x=s[(g+a)%s.length],y=!0;x<0&&(y=!1,x=-x);let v=i.node(x-1),k=i.index(x-1);if(v.canReplaceWith(k,k,h.type,h.marks))return t.replace(i.before(x),y?o.after(x):n,new I(Bx(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let m=s[f];m<0||(e=i.before(m),n=o.after(m))}}function Bx(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Bx(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(O.empty,!0))}return t}function dO(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=sO(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new I(O.from(r),0,0))}function fO(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=$x(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function $x(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Qi extends at{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return De.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return De.fromReplace(e,this.pos,this.pos+1,new I(O.from(i),0,n.isLeaf?0:1))}getMap(){return Pt.empty}invert(e){return new Qi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Qi(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Qi(n.pos,n.attr,n.value)}}at.jsonID("attr",Qi);class As extends at{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return De.ok(r)}getMap(){return Pt.empty}invert(e){return new As(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new As(n.attr,n.value)}}at.jsonID("docAttr",As);let co=class extends Error{};co=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};co.prototype=Object.create(Error.prototype);co.prototype.constructor=co;co.prototype.name="TransformError";class hO{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Gi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new co(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=I.empty){let i=Ou(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new I(O.from(r),0,0))}delete(e,n){return this.replace(e,n,I.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return cO(this,e,n,r),this}replaceRangeWith(e,n,r){return dO(this,e,n,r),this}deleteRange(e,n){return fO(this,e,n),this}lift(e,n){return GT(this,e,n),this}join(e,n=1){return oO(this,e,n),this}wrap(e,n){return XT(this,e,n),this}setBlockType(e,n=e,r,i=null){return ZT(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return rO(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Qi(e,n,r)),this}setDocAttribute(e,n){return this.step(new As(e,n)),this}addNodeMark(e,n){return this.step(new ur(e,n)),this}removeNodeMark(e,n){if(!(n instanceof le)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new uo(e,n)),this}split(e,n=1,r){return iO(this,e,n,r),this}addMark(e,n,r){return KT(this,e,n,r),this}removeMark(e,n,r){return JT(this,e,n,r),this}clearIncompatible(e,n,r){return Ix(this,e,n,r),this}}const jc=Object.create(null);class q{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new pO(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=I.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?I.empty:n),l==0&&Cg(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Cg(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new K(e):bi(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?bi(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):bi(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new fn(e.node(0))}static atStart(e){return bi(e,e,0,0,1)||new fn(e)}static atEnd(e){return bi(e,e,e.content.size,e.childCount,-1)||new fn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=jc[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in jc)throw new RangeError("Duplicate use of selection JSON ID "+e);return jc[e]=n,n.prototype.jsonID=e,n}getBookmark(){return K.between(this.$anchor,this.$head).getBookmark()}}q.prototype.visible=!0;class pO{constructor(e,n){this.$from=e,this.$to=n}}let wg=!1;function Eg(t){!wg&&!t.parent.inlineContent&&(wg=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class K extends q{constructor(e,n=e){Eg(e),Eg(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return q.near(r);let i=e.resolve(n.map(this.anchor));return new K(i.parent.inlineContent?i:r,r)}replace(e,n=I.empty){if(super.replace(e,n),n==I.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof K&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Pu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new K(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=q.findFrom(n,r,!0)||q.findFrom(n,-r,!0);if(o)n=o.$head;else return q.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(q.findFrom(e,-r,!0)||q.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new K(e,n)}}q.jsonID("text",K);class Pu{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Pu(e.map(this.anchor),e.map(this.head))}resolve(e){return K.between(e.resolve(this.anchor),e.resolve(this.head))}}class V extends q{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?q.near(o):new V(o)}content(){return new I(O.from(this.node),0,0)}eq(e){return e instanceof V&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Bh(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new V(e.resolve(n.anchor))}static create(e,n){return new V(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}V.prototype.visible=!1;q.jsonID("node",V);class Bh{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Pu(r,r):new Bh(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&V.isSelectable(r)?new V(n):q.near(n)}}class fn extends q{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=I.empty){if(n==I.empty){e.delete(0,e.doc.content.size);let r=q.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new fn(e)}map(e){return new fn(e)}eq(e){return e instanceof fn}getBookmark(){return mO}}q.jsonID("all",fn);const mO={map(){return this},resolve(t){return new fn(t)}};function bi(t,e,n,r,i,o=!1){if(e.inlineContent)return K.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&V.isSelectable(l))return V.create(t,n-(i<0?l.nodeSize:0))}else{let a=bi(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Cg(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Be||i instanceof Ve))return;let o=t.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),t.setSelection(q.near(t.doc.resolve(s),n))}const bg=1,bl=2,Mg=4;class gO extends hO{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|bg)&~bl,this.storedMarks=null,this}get selectionSet(){return(this.updated&bg)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=bl,this}ensureMarks(e){return le.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&bl)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~bl,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||le.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(q.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Mg,this}get scrolledIntoView(){return(this.updated&Mg)>0}}function Ng(t,e){return!e||!t?t:t.bind(e)}class qo{constructor(e,n,r){this.name=e,this.init=Ng(n.init,r),this.apply=Ng(n.apply,r)}}const yO=[new qo("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new qo("selection",{init(t,e){return t.selection||q.atStart(e.doc)},apply(t){return t.selection}}),new qo("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new qo("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Ac{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=yO.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new qo(r.key,r.spec.state,r))})}}class Bi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Bi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new gO(this)}static create(e){let n=new Ac(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Bi(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Ac(this.schema,e.plugins),r=n.fields,i=new Bi(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ac(e.schema,e.plugins),o=new Bi(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=ni.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=q.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=u.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function Vx(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Vx(i,e,{})),n[r]=i}return n}class en{constructor(e){this.spec=e,this.props={},e.props&&Vx(e.props,this,this.props),this.key=e.key?e.key.key:Hx("plugin")}getState(e){return e[this.key]}}const Ic=Object.create(null);function Hx(t){return t in Ic?t+"$"+ ++Ic[t]:(Ic[t]=0,t+"$")}class jr{constructor(e="key"){this.key=Hx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ye=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Is=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Zd=null;const jn=function(t,e,n){let r=Zd||(Zd=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},vO=function(){Zd=null},pi=function(t,e,n,r){return n&&(Tg(t,e,n,r,-1)||Tg(t,e,n,r,1))},xO=/^(img|br|input|textarea|hr)$/i;function Tg(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:kn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Gs(t)||xO.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ye(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?kn(t):0}else return!1}}function kn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function SO(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=kn(t)}else if(t.parentNode&&!Gs(t))e=Ye(t),t=t.parentNode;else return null}}function kO(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Gs(t))e=Ye(t)+1,t=t.parentNode;else return null}}function wO(t,e,n){for(let r=e==0,i=e==kn(t);r||i;){if(t==n)return!0;let o=Ye(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==kn(t)}}function Gs(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ru=function(t){return t.focusNode&&pi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Vr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function EO(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function CO(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Mn=typeof navigator<"u"?navigator:null,Og=typeof document<"u"?document:null,Ar=Mn&&Mn.userAgent||"",ef=/Edge\/(\d+)/.exec(Ar),Ux=/MSIE \d/.exec(Ar),tf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ar),Mt=!!(Ux||tf||ef),xr=Ux?document.documentMode:tf?+tf[1]:ef?+ef[1]:0,pn=!Mt&&/gecko\/(\d+)/i.test(Ar);pn&&+(/Firefox\/(\d+)/.exec(Ar)||[0,0])[1];const nf=!Mt&&/Chrome\/(\d+)/.exec(Ar),ft=!!nf,bO=nf?+nf[1]:0,pt=!Mt&&!!Mn&&/Apple Computer/.test(Mn.vendor),fo=pt&&(/Mobile\/\w+/.test(Ar)||!!Mn&&Mn.maxTouchPoints>2),Vt=fo||(Mn?/Mac/.test(Mn.platform):!1),MO=Mn?/Win/.test(Mn.platform):!1,an=/Android \d/.test(Ar),Ys=!!Og&&"webkitFontSmoothing"in Og.documentElement.style,NO=Ys?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function TO(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Rn(t,e){return typeof t=="number"?t:t[e]}function OO(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Pg(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=Is(s)){if(s.nodeType!=1)continue;let l=s,a=l==o.body,u=a?TO(o):OO(l),c=0,d=0;if(e.top<u.top+Rn(r,"top")?d=-(u.top-e.top+Rn(i,"top")):e.bottom>u.bottom-Rn(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+Rn(i,"top")-u.top:e.bottom-u.bottom+Rn(i,"bottom")),e.left<u.left+Rn(r,"left")?c=-(u.left-e.left+Rn(i,"left")):e.right>u.right-Rn(r,"right")&&(c=e.right-u.right+Rn(i,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{let f=l.scrollLeft,m=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let h=l.scrollLeft-f,g=l.scrollTop-m;e={left:e.left-h,top:e.top-g,right:e.right-h,bottom:e.bottom-g}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function PO(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Wx(t.dom)}}function Wx(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Is(r));return e}function RO({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Kx(n,r==0?0:r-e)}function Kx(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Ei=null;function DO(t){if(t.setActive)return t.setActive();if(Ei)return t.focus(Ei);let e=Wx(t);t.focus(Ei==null?{get preventScroll(){return Ei={preventScroll:!0},!0}}:void 0),Ei||(Ei=!1,Kx(e,0))}function Jx(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=jn(c).getClientRects();else continue;for(let m=0;m<f.length;m++){let h=f[m];if(h.top<=s&&h.bottom>=l){s=Math.max(h.bottom,s),l=Math.min(h.top,l);let g=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(g<r){n=c,r=g,i=g&&n.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,c.nodeType==1&&g&&(o=d+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!a&&h.left<=e.left&&h.right>=e.left&&(a=c,u={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=d+1)}}return!n&&a&&(n=a,i=u,r=0),n&&n.nodeType==3?jO(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Jx(n,i)}function jO(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=Xn(r,1);if(o.top!=o.bottom&&$h(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function $h(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function AO(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function IO(t,e,n){let{node:r,offset:i}=Jx(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function LO(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function qx(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if($h(e,u))return qx(s,e,u)}}if((o=(o+1)%r)==i)break}return t}function _O(t,e){let n=t.dom.ownerDocument,r,i=0,o=CO(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=t.dom.getBoundingClientRect();if(!$h(e,u)||(s=qx(t.dom,e,u),!s))return null}if(pt)for(let u=s;r&&u;u=Is(u))u.draggable&&(r=void 0);if(s=AO(s,e),r){if(pn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;Ys&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=LO(t,r,i,e))}l==null&&(l=IO(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Rg(t){return t.top<t.bottom||t.left<t.right}function Xn(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Rg(r))return r}return Array.prototype.find.call(n,Rg)||t.getBoundingClientRect()}const zO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Gx(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=Ys||pn;if(r.nodeType==3)if(s&&(zO.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=Xn(jn(r,i,i),n);if(pn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Xn(jn(r,i-1,i-1),-1);if(u.top==a.top){let c=Xn(jn(r,i,i+1),-1);if(c.top!=a.top)return Bo(c,c.left<u.left)}}return a}else{let a=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(a--,c=1):n<0?a--:u++,Bo(Xn(jn(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==kn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Lc(a.getBoundingClientRect(),!1)}if(o==null&&i<kn(r)){let a=r.childNodes[i];if(a.nodeType==1)return Lc(a.getBoundingClientRect(),!0)}return Lc(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==kn(r))){let a=r.childNodes[i-1],u=a.nodeType==3?jn(a,kn(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return Bo(Xn(u,1),!1)}if(o==null&&i<kn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?jn(a,0,s?0:1):a.nodeType==1?a:null:null;if(u)return Bo(Xn(u,-1),!0)}return Bo(Xn(r.nodeType==3?jn(r):r,-n),n>=0)}function Bo(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Lc(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Yx(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function FO(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Yx(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=Gx(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=jn(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const BO=/[\u0590-\u08ac]/;function $O(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return!BO.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:Yx(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:h,focusOffset:g}=t.domSelectionRange(),x=h&&!m.contains(h.nodeType==1?h:h.parentNode)||a==h&&u==g;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),x})}let Dg=null,jg=null,Ag=!1;function VO(t,e,n){return Dg==e&&jg==n?Ag:(Dg=e,jg=n,Ag=n=="up"||n=="down"?FO(t,e,n):$O(t,e,n))}const qt=0,Ig=1,Gr=2,Nn=3;class Qs{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=qt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ye(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof Xx){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Qx&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Ye(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Ye(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],u=s+a.size;if(i==-1&&e<=u){let c=s+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=s;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Ye(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=Ye(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let f=0,m=0;f<this.children.length;f++){let h=this.children[f],g=m+h.size;if(o>m&&s<g)return h.setSelection(e-m-h.border,n-m-h.border,r,i);m=g}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.getSelection(),c=!1;if((pn||pt)&&e==n){let{node:f,offset:m}=l;if(f.nodeType==3){if(c=!!(m&&f.nodeValue[m-1]==`
`),c&&m==f.nodeValue.length)for(let h=f,g;h;h=h.parentNode){if(g=h.nextSibling){g.nodeName=="BR"&&(l=a={node:g.parentNode,offset:Ye(g)+1});break}let x=h.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let h=f.childNodes[m-1];c=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(pn&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||c&&pt)&&pi(l.node,l.offset,u.anchorNode,u.anchorOffset)&&pi(a.node,a.offset,u.focusNode,u.focusOffset))return;let d=!1;if((u.extend||e==n)&&!c){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let m=l;l=a,a=m}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Gr:Ig,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Nn:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Gr:Nn}r=s}this.dirty=Gr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Gr:Ig;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Qx extends Qs{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==qt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class HO extends Qs{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class mi extends Qs{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=wn.renderSpec(document,n.type.spec.toDOM(n,r))),new mi(e,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&Nn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Nn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=qt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=qt}}slice(e,n,r){let i=mi.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=sf(o,n,s,r)),e>0&&(o=sf(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}}class Sr extends Qs{constructor(e,n,r,i,o,s,l,a,u){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,u=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=wn.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=tS(c,r,n),u?a=new UO(e,n,r,i,c,d||null,f,u,o,s+1):n.isText?new Du(e,n,r,i,c,f,o):new Sr(e,n,r,i,c,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>O.empty)}return e}matchesNode(e,n,r){return this.dirty==qt&&e.eq(this.node)&&of(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new KO(this,s&&s.node,e);GO(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?le.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let m;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(m=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,d,m,e)||a.updateNextNode(u,c,d,e,f,i)||a.addNode(u,c,d,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Gr)&&(s&&this.protectLocalComposition(e,s),Zx(this.contentDOM,this.children,e),fo&&YO(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof K)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=QO(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new HO(this,o,n,i);e.input.compositionNodes.push(s),this.children=sf(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Nn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=qt}updateOuterDeco(e){if(of(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=eS(this.dom,this.nodeDOM,rf(this.outerDeco,this.node,n),rf(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Lg(t,e,n,r,i){tS(r,e,t);let o=new Sr(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Du extends Sr{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Nn||this.dirty!=qt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=qt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=qt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Du(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Nn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Xx extends Qs{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==qt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class UO extends Sr{constructor(e,n,r,i,o,s,l,a,u,c){super(e,n,r,i,o,s,l,u,c),this.spec=a}update(e,n,r,i){if(this.dirty==Nn)return!1;if(this.spec.update){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Zx(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=_g(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof mi){let a=r?r.previousSibling:t.lastChild;Zx(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=_g(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ds=function(t){t&&(this.nodeName=t)};ds.prototype=Object.create(null);const Yr=[new ds];function rf(t,e,n){if(t.length==0)return Yr;let r=n?Yr[0]:new ds,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new ds(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new ds(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function eS(t,e,n,r){if(n==Yr&&r==Yr)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Yr[0]),i=a}WO(i,l||Yr[0],s)}return i}function WO(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function tS(t,e,n){return eS(t,t,Yr,rf(e,n,t.nodeType!=1))}function of(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function _g(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class KO{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=JO(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=qt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=mi.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Nn&&s.dom==s.contentDOM&&(s.dirty=Gr),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Sr){let u=this.preMatch.matched.get(a);if(u!=null&&u!=o)return!1;let c=a.dom,d,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Nn&&of(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,s)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Gr,d.updateChildren(i,s+1),d.dirty=qt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let l=Sr.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=Sr.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Qx(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof mi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Du)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((pt||ft)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Xx(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function JO(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof mi)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function qO(t,e){return t.type.side-e.type.side}function GO(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){let c,d;for(;s<i.length&&i[s].to==o;){let x=i[s++];x.widget&&(c?(d||(d=[c])).push(x):c=x)}if(c)if(d){d.sort(qO);for(let x=0;x<d.length;x++)n(d[x],u,!!a)}else n(c,u,!!a);let f,m;if(a)m=-1,f=a,a=null;else if(u<t.childCount)m=u,f=t.child(u++);else break;for(let x=0;x<l.length;x++)l[x].to<=o&&l.splice(x--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let h=o+f.nodeSize;if(f.isText){let x=h;s<i.length&&i[s].from<x&&(x=i[s].from);for(let y=0;y<l.length;y++)l[y].to<x&&(x=l[y].to);x<h&&(a=f.cut(x-o),f=f.cut(0,x-o),h=x,m=-1)}else for(;s<i.length&&i[s].to<h;)s++;let g=f.isInline&&!f.isLeaf?l.filter(x=>!x.inline):l.slice();r(f,g,e.forChild(o,f),m),o=h}}function YO(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function QO(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function sf(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],u=l,c=l+=a.size;u>=n||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(a.slice(n-u,a.size,r)))}return o}function Vh(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(Ru(n)){for(a=l;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&V.isSelectable(c)&&i.parent&&!(c.isInline&&wO(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;u=new V(s==d?l:r.resolve(d))}}else{let c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null;a=r.resolve(c)}if(!u){let c=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;u=Hh(t,a,l,c)}return u}function nS(t){return t.editable?t.hasFocus():iS(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Fn(t,e=!1){let n=t.state.selection;if(rS(t,n),!!nS(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ft){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&pi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)ZO(t);else{let{anchor:r,head:i}=n,o,s;zg&&!(n instanceof K)&&(n.$from.parent.inlineContent||(o=Fg(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Fg(t,n.to))),t.docView.setSelection(r,i,t.root,e),zg&&(o&&Bg(o),s&&Bg(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&XO(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const zg=pt||ft&&bO<63;function Fg(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(pt&&i&&i.contentEditable=="false")return _c(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return _c(i);if(o)return _c(o)}}function _c(t){return t.contentEditable="true",pt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Bg(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function XO(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!nS(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function ZO(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,Ye(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Mt&&xr<=11&&(r.disabled=!0,r.disabled=!1)}function rS(t,e){if(e instanceof V){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&($g(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else $g(t)}function $g(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Hh(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||K.between(e,n,r)}function Vg(t){return t.editable&&!t.hasFocus()?!1:iS(t)}function iS(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function eP(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return pi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function lf(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&q.findFrom(o,e)}function tr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Hg(t,e,n){let r=t.state.selection;if(r instanceof K)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return tr(t,new K(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=lf(t.state,e);return i&&i instanceof V?tr(t,i):!1}else if(!(Vt&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?V.isSelectable(o)?tr(t,new V(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Ys?tr(t,new K(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof V&&r.node.isInline)return tr(t,new K(e>0?r.$to:r.$from));{let i=lf(t.state,e);return i?tr(t,i):!1}}}function Ma(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function fs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ci(t,e){return e<0?tP(t):nP(t)}function tP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(pn&&n.nodeType==1&&r<Ma(n)&&fs(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(fs(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(oS(n))break;{let l=n.previousSibling;for(;l&&fs(l,-1);)i=n.parentNode,o=Ye(l),l=l.previousSibling;if(l)n=l,r=Ma(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?af(t,n,r):i&&af(t,i,o)}function nP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Ma(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(fs(l,1))o=n,s=++r;else break}else{if(oS(n))break;{let l=n.nextSibling;for(;l&&fs(l,1);)o=l.parentNode,s=Ye(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Ma(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&af(t,o,s)}function oS(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function rP(t,e){for(;t&&e==t.childNodes.length&&!Gs(t);)e=Ye(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function iP(t,e){for(;t&&!e&&!Gs(t);)e=Ye(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function af(t,e,n){if(e.nodeType!=3){let o,s;(s=rP(e,n))?(e=s,n=0):(o=iP(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(Ru(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Fn(t)},50)}function Ug(t,e){let n=t.state.doc.resolve(e);if(!(ft||MO)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Wg(t,e,n){let r=t.state.selection;if(r instanceof K&&!r.empty||n.indexOf("s")>-1||Vt&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=lf(t.state,e);if(s&&s instanceof V)return tr(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof fn?q.near(s,e):q.findFrom(s,e);return l?tr(t,l):!1}return!1}function Kg(t,e){if(!(t.state.selection instanceof K))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Jg(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function oP(t){if(!pt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Jg(t,r,"true"),setTimeout(()=>Jg(t,r,"false"),20)}return!1}function sP(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function lP(t,e){let n=e.keyCode,r=sP(e);if(n==8||Vt&&n==72&&r=="c")return Kg(t,-1)||Ci(t,-1);if(n==46&&!e.shiftKey||Vt&&n==68&&r=="c")return Kg(t,1)||Ci(t,1);if(n==13||n==27)return!0;if(n==37||Vt&&n==66&&r=="c"){let i=n==37?Ug(t,t.state.selection.from)=="ltr"?-1:1:-1;return Hg(t,i,r)||Ci(t,i)}else if(n==39||Vt&&n==70&&r=="c"){let i=n==39?Ug(t,t.state.selection.from)=="ltr"?1:-1:1;return Hg(t,i,r)||Ci(t,i)}else{if(n==38||Vt&&n==80&&r=="c")return Wg(t,-1,r)||Ci(t,-1);if(n==40||Vt&&n==78&&r=="c")return oP(t)||Wg(t,1,r)||Ci(t,1);if(r==(Vt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function sS(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=t.someProp("clipboardSerializer")||wn.fromSchema(t.state.schema),l=fS(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=dS[u.nodeName.toLowerCase()]);){for(let m=c.length-1;m>=0;m--){let h=l.createElement(c[m]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function lS(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new I(O.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):I.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:m}=t.state,h=wn.fromSchema(m);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let x=s.appendChild(document.createElement("p"));g&&x.appendChild(h.serializeNode(m.text(g,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=cP(n),Ys&&dP(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||ao.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!aP.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=fP(qg(l,+c[1],+c[2]),c[4]);else if(l=I.maxOpen(uP(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let m=l.content.firstChild;d<l.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=l.content.lastChild;f<l.openEnd&&!m.type.spec.isolating;f++,m=m.lastChild);l=qg(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const aP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function uP(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&uS(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=cS(s[s.length-1],o.length));let c=aS(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return O.from(s)}return t}function aS(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,O.from(t));return t}function uS(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=uS(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(O.from(aS(n,t,i+1))))}}function cS(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,cS(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(O.empty,!0);return t.copy(n.append(r))}function uf(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=uf(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(O.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function qg(t,e,n){return e<t.openStart&&(t=new I(uf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new I(uf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const dS={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Gg=null;function fS(){return Gg||(Gg=document.implementation.createHTMLDocument("title"))}function cP(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=fS().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&dS[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function dP(t){let e=t.querySelectorAll(ft?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function fP(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=O.from(a.create(r[l+1],i)),o++,s++}return new I(i,o,s)}const mt={},gt={},hP={touchstart:!0,touchmove:!0};class pP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function mP(t){for(let e in mt){let n=mt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{yP(t,r)&&!Uh(t,r)&&(t.editable||!(r.type in gt))&&n(t,r)},hP[e]?{passive:!0}:void 0)}pt&&t.dom.addEventListener("input",()=>null),cf(t)}function cr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function gP(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function cf(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Uh(t,r))})}function Uh(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function yP(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function vP(t,e){!Uh(t,e)&&mt[e.type]&&(t.editable||!(e.type in gt))&&mt[e.type](t,e)}gt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!pS(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(an&&ft&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),fo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Vr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||lP(t,n)?n.preventDefault():cr(t,"key")};gt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};gt.keypress=(t,e)=>{let n=e;if(pS(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Vt&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof K)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function ju(t){return{left:t.clientX,top:t.clientY}}function xP(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Wh(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Xi(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function SP(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&V.isSelectable(r)?(Xi(t,new V(n),"pointer"),!0):!1}function kP(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof V&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(V.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Xi(t,V.create(t.state.doc,i),"pointer"),!0):!1}function wP(t,e,n,r,i){return Wh(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?kP(t,n):SP(t,n))}function EP(t,e,n,r){return Wh(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function CP(t,e,n,r){return Wh(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||bP(t,n,r)}function bP(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Xi(t,K.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Xi(t,K.create(r,l+1,l+1+s.content.size),"pointer");else if(V.isSelectable(s))Xi(t,V.create(r,l),"pointer");else continue;return!0}}function Kh(t){return Na(t)}const hS=Vt?"metaKey":"ctrlKey";mt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Kh(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&xP(n,t.input.lastClick)&&!n[hS]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(ju(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new MP(t,s,n,!!r)):(o=="doubleClick"?EP:CP)(t,s.pos,s.inside,n)?n.preventDefault():cr(t,"pointer"))};class MP{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[hS],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof V&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&pn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),cr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Fn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ju(e))),this.updateAllowDefault(e),this.allowDefault||!n?cr(this.view,"pointer"):wP(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||pt&&this.mightDrag&&!this.mightDrag.node.isAtom||ft&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Xi(this.view,q.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):cr(this.view,"pointer")}move(e){this.updateAllowDefault(e),cr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}mt.touchstart=t=>{t.input.lastTouch=Date.now(),Kh(t),cr(t,"pointer")};mt.touchmove=t=>{t.input.lastTouch=Date.now(),cr(t,"pointer")};mt.contextmenu=t=>Kh(t);function pS(t,e){return t.composing?!0:pt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const NP=an?5e3:-1;gt.compositionstart=gt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Na(t,!0),t.markCursor=null;else if(Na(t),pn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){t.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}mS(t,NP)};gt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,mS(t,20))};function mS(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Na(t),e))}function gS(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=OP());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function TP(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=SO(e.focusNode,e.focusOffset),r=kO(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function OP(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Na(t,e=!1){if(!(an&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),gS(t),e||t.docView&&t.docView.dirty){let n=Vh(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function PP(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ls=Mt&&xr<15||fo&&NO<604;mt.copy=gt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Ls?null:n.clipboardData,s=r.content(),{dom:l,text:a}=sS(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):PP(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function RP(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function DP(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?_s(t,r.value,null,i,e):_s(t,r.textContent,r.innerHTML,i,e)},50)}function _s(t,e,n,r,i){let o=lS(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||I.empty)))return!0;if(!o)return!1;let s=RP(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function yS(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}gt.paste=(t,e)=>{let n=e;if(t.composing&&!an)return;let r=Ls?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&_s(t,yS(r),r.getData("text/html"),i,n)?n.preventDefault():DP(t,n)};class vS{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const xS=Vt?"altKey":"ctrlKey";mt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(ju(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof V?i.to-1:i.to))){if(r&&r.mightDrag)s=V.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=V.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:u,slice:c}=sS(t,l);n.dataTransfer.clearData(),n.dataTransfer.setData(Ls?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ls||n.dataTransfer.setData("text/plain",u),t.dragging=new vS(c,!n[xS],s)};mt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};gt.dragover=gt.dragenter=(t,e)=>e.preventDefault();gt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(ju(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",h=>{s=h(s,t)}):s=lS(t,yS(n.dataTransfer),Ls?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[xS]);if(t.someProp("handleDrop",h=>h(t,n,s||I.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?_x(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=t.state.tr;if(l){let{node:h}=r;h?h.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(f))return;let m=u.doc.resolve(c);if(d&&V.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new V(m));else{let h=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((g,x,y,v)=>h=v),u.setSelection(Hh(t,m,u.doc.resolve(h)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};mt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Fn(t)},20))};mt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};mt.beforeinput=(t,e)=>{if(ft&&an&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Vr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in gt)mt[t]=gt[t];function zs(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ta{constructor(e,n){this.toDOM=e,this.spec=n||ri,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Kt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ta&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&zs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class kr{constructor(e,n){this.attrs=e,this.spec=n||ri}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Kt(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof kr&&zs(this.attrs,e.attrs)&&zs(this.spec,e.spec)}static is(e){return e.type instanceof kr}destroy(){}}class Jh{constructor(e,n){this.attrs=e,this.spec=n||ri}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Kt(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Jh&&zs(this.attrs,e.attrs)&&zs(this.spec,e.spec)}destroy(){}}class Kt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Kt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Kt(e,e,new Ta(n,r))}static inline(e,n,r,i){return new Kt(e,n,new kr(r,i))}static node(e,n,r,i){return new Kt(e,n,new Jh(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof kr}get widget(){return this.type instanceof Ta}}const Mi=[],ri={};class Le{constructor(e,n){this.local=e.length?e:Mi,this.children=n.length?n:Mi}static create(e,n){return n.length?Oa(n,e,0,ri):it}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==it||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ri)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?jP(this.children,s||[],e,n,r,i,o):s?new Le(s.sort(ii),Mi):it}add(e,n){return n.length?this==it?Le.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=kS(n,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,Oa(c,l,u+1,ri)),o+=3}});let s=SS(o?wS(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Le(s.length?this.local.concat(s).sort(ii):this.local,i||this.children)}remove(e){return e.length==0||this==it?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=it?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Le(i,r):it}forChild(e,n){if(this==it)return this;if(n.isLeaf)return Le.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof kr){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new Le(i.sort(ii),Mi);return r?new or([l,r]):l}return r||it}eq(e){if(this==e)return!0;if(!(e instanceof Le)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return qh(this.localsInner(e))}localsInner(e){if(this==it)return Mi;if(e.inlineContent||!this.local.some(kr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof kr||n.push(this.local[r]);return n}}Le.empty=new Le([],[]);Le.removeOverlap=qh;const it=Le.empty;class or{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ri));return or.from(r)}forChild(e,n){if(n.isLeaf)return Le.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=it&&(o instanceof or?r=r.concat(o.members):r.push(o))}return or.from(r)}eq(e){if(!(e instanceof or)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?qh(r?n:n.sort(ii)):Mi}static from(e){switch(e.length){case 0:return it;case 1:return e[0];default:return new or(e.every(n=>n instanceof Le)?e:e.reduce((n,r)=>n.concat(r instanceof Le?r:r.members),[]))}}}function jP(t,e,n,r,i,o,s){let l=t.slice();for(let u=0,c=o;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,m,h,g)=>{let x=g-h-(m-f);for(let y=0;y<l.length;y+=3){let v=l[y+1];if(v<0||f>v+c-d)continue;let k=l[y]+c-d;m>=k?l[y+1]=f<=k?-2:-1:f>=c&&x&&(l[y]+=x,l[y+1]+=x)}d+=x}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=n.map(t[u]+o),d=c-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+o,-1),m=f-i,{index:h,offset:g}=r.content.findIndex(d),x=r.maybeChild(h);if(x&&g==d&&g+x.nodeSize==m){let y=l[u+2].mapInner(n,x,c+1,t[u]+o+1,s);y!=it?(l[u]=d,l[u+1]=m,l[u+2]=y):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=AP(l,t,e,n,i,o,s),c=Oa(u,r,0,s);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let m=c.children[d];for(;f<l.length&&l[f]<m;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new Le(e.sort(ii),l)}function SS(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Kt(i.from+e,i.to+e,i.type))}return n}function AP(t,e,n,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,i,u);d?n.push(d):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function kS(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function wS(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Oa(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let u=kS(t,l,a+n);if(u){o=!0;let c=Oa(u,l,n+a+1,r);c!=it&&i.push(a,a+l.nodeSize,c)}});let s=SS(o?wS(t):t,-n).sort(ii);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new Le(s,i):it}function ii(t,e){return t.from-e.from||t.to-e.to}function qh(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Yg(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Yg(e,i,r.copy(o.from,r.to)));break}}}return e}function Yg(t,e,n){for(;e<t.length&&ii(n,t[e])>0;)e++;t.splice(e,0,n)}function zc(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=it&&e.push(r)}),t.cursorWrapper&&e.push(Le.create(t.state.doc,[t.cursorWrapper.deco])),or.from(e)}const IP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},LP=Mt&&xr<=11;class _P{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class zP{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _P,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Mt&&xr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),LP&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,IP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Vg(this.view)){if(this.suppressingSelectionUpdates)return Fn(this.view);if(Mt&&xr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&pi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Is(o))n.add(o);for(let o=e.anchorNode;o;o=Is(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Vg(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(pn&&a.length){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let m=f.parentNode;m&&m.nodeName=="LI"&&(!d||$P(e,d)!=m)&&f.remove()}}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ru(r)&&(u=Vh(e))&&u.eq(q.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Fn(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),FP(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Fn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)n.push(e.addedNodes[c]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Mt&&xr<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?Ye(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Ye(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Qg=new WeakMap,Xg=!1;function FP(t){if(!Qg.has(t)&&(Qg.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=pn,Xg)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Xg=!0}}function Zg(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return pi(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function BP(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Zg(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Zg(t,n):null}function $P(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function VP(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],Ru(a)||u.push({node:a.focusNode,offset:a.focusOffset})),ft&&t.input.lastKeyCode===8)for(let x=o;x>i;x--){let y=r.childNodes[x-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){o=x;break}if(!v||v.size)break}let d=t.state.doc,f=t.someProp("domParser")||ao.fromSchema(t.state.schema),m=d.resolve(s),h=null,g=f.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:o,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:HP,context:m});if(u&&u[0].pos!=null){let x=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=x),h={anchor:x+s,head:y+s}}return{doc:g,sel:h,from:s,to:l}}function HP(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(pt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||pt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const UP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function WP(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let D=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,F=Vh(t,D);if(F&&!t.state.selection.eq(F)){if(ft&&an&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",Ae=>Ae(t,Vr(13,"Enter"))))return;let ee=t.state.tr.setSelection(F);D=="pointer"?ee.setMeta("pointer",!0):D=="key"&&ee.scrollIntoView(),o&&ee.setMeta("composition",o),t.dispatch(ee)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=VP(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,m="end"):(f=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let h=qP(d.content,u.doc.content,u.from,f,m);if((fo&&t.input.lastIOSEnter>Date.now()-225||an)&&i.some(D=>D.nodeType==1&&!UP.test(D.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",D=>D(t,Vr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof K&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let D=ey(t,t.state.doc,u.sel);if(D&&!D.eq(t.state.selection)){let F=t.state.tr.setSelection(D);o&&F.setMeta("composition",o),t.dispatch(F)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof K&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),Mt&&xr<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>u.from&&u.doc.textBetween(h.start-u.from-1,h.start-u.from+1)=="  "&&(h.start--,h.endA--,h.endB--);let g=u.doc.resolveNoCache(h.start-u.from),x=u.doc.resolveNoCache(h.endB-u.from),y=c.resolve(h.start),v=g.sameParent(x)&&g.parent.inlineContent&&y.end()>=h.endA,k;if((fo&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!v&&g.pos<u.doc.content.size&&!g.sameParent(x)&&(k=q.findFrom(u.doc.resolve(g.pos+1),1,!0))&&k.head==x.pos)&&t.someProp("handleKeyDown",D=>D(t,Vr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&JP(c,h.start,h.endA,g,x)&&t.someProp("handleKeyDown",D=>D(t,Vr(8,"Backspace")))){an&&ft&&t.domObserver.suppressSelectionUpdates();return}ft&&an&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),an&&!v&&g.start()!=x.start()&&x.parentOffset==0&&g.depth==x.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==h.endA&&(h.endB-=2,x=u.doc.resolveNoCache(h.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(D){return D(t,Vr(13,"Enter"))})},20));let S=h.start,b=h.endA,N,M,R;if(v){if(g.pos==x.pos)Mt&&xr<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Fn(t),20)),N=t.state.tr.delete(S,b),M=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(R=KP(g.parent.content.cut(g.parentOffset,x.parentOffset),y.parent.content.cut(y.parentOffset,h.endA-y.start()))))N=t.state.tr,R.type=="add"?N.addMark(S,b,R.mark):N.removeMark(S,b,R.mark);else if(g.parent.child(g.index()).isText&&g.index()==x.index()-(x.textOffset?0:1)){let D=g.parent.textBetween(g.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",F=>F(t,S,b,D)))return;N=t.state.tr.insertText(D,S,b)}}if(N||(N=t.state.tr.replace(S,b,u.doc.slice(h.start-u.from,h.endB-u.from))),u.sel){let D=ey(t,N.doc,u.sel);D&&!(ft&&an&&t.composing&&D.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(D.head==S||D.head==N.mapping.map(b)-1)||Mt&&D.empty&&D.head==S)&&N.setSelection(D)}M&&N.ensureMarks(M),o&&N.setMeta("composition",o),t.dispatch(N.scrollIntoView())}function ey(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Hh(t,e.resolve(n.anchor),e.resolve(n.head))}function KP(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(O.from(u).eq(t))return{mark:l,type:s}}function JP(t,e,n,r,i){if(n-e<=i.pos-r.pos||Fc(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Fc(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Fc(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Fc(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function qP(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&ty(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&ty(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function ty(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class GP{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new pP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(sy),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=iy(this),ry(this),this.nodeViews=oy(this),this.docView=Lg(this.state.doc,ny(this),zc(this),this.dom,this),this.domObserver=new zP(this,(r,i,o,s)=>WP(this,r,i,o,s)),this.domObserver.start(),mP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&cf(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(sy),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(gS(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=oy(this);QP(m,this.nodeViews)&&(this.nodeViews=m,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&cf(this),this.editable=iy(this),ry(this);let a=zc(this),u=ny(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(i.selection))&&(s=!0);let f=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&PO(this);if(s){this.domObserver.stop();let m=d&&(Mt||ft)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&YP(i.selection,e.selection);if(d){let h=ft?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=TP(this)),(o||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Lg(e.doc,u,a,this.dom,this)),h&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&eP(this))?Fn(this,m):(rS(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&RO(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof V){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Pg(this,n.getBoundingClientRect(),e)}else Pg(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new vS(e.slice,e.move,i<0?void 0:V.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Mt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&DO(this.dom),Fn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return _O(this,e)}coordsAtPos(e,n=1){return Gx(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return VO(this,n||this.state,e)}pasteHTML(e,n){return _s(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return _s(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(gP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,vO())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return vP(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return pt&&this.root.nodeType===11&&EO(this.dom.ownerDocument)==this.dom&&BP(this,e)||e}domSelection(){return this.root.getSelection()}}function ny(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Kt.node(0,t.state.doc.content.size,e)]}function ry(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Kt.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function iy(t){return!t.someProp("editable",e=>e(t.state)===!1)}function YP(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function oy(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function QP(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function sy(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var br={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Pa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},XP=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qe=0;Qe<10;Qe++)br[48+Qe]=br[96+Qe]=String(Qe);for(var Qe=1;Qe<=24;Qe++)br[Qe+111]="F"+Qe;for(var Qe=65;Qe<=90;Qe++)br[Qe]=String.fromCharCode(Qe+32),Pa[Qe]=String.fromCharCode(Qe);for(var Bc in br)Pa.hasOwnProperty(Bc)||(Pa[Bc]=br[Bc]);function eR(t){var e=XP&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ZP&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Pa:br)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const tR=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function nR(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))tR?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function rR(t){let e=Object.create(null);for(let n in t)e[nR(n)]=t[n];return e}function $c(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function iR(t){return new en({props:{handleKeyDown:ES(t)}})}function ES(t){let e=rR(t);return function(n,r){let i=eR(r),o,s=e[$c(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[$c(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=br[r.keyCode])&&o!=i){let l=e[$c(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const oR=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const sR=(t,e,n)=>{let r=CS(t,n);if(!r)return!1;let i=Gh(r);if(!i){let s=r.blockRange(),l=s&&wo(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&TS(t,i,e))return!0;if(r.parent.content.size==0&&(ho(o,"end")||V.isSelectable(o))){let s=Ou(t.doc,r.before(),r.after(),I.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(ho(o,"end")?q.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):V.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},lR=(t,e,n)=>{let r=CS(t,n);if(!r)return!1;let i=Gh(r);return i?bS(t,i,e):!1},aR=(t,e,n)=>{let r=MS(t,n);if(!r)return!1;let i=Yh(r);return i?bS(t,i,e):!1};function bS(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=Ou(t.doc,o,a,I.empty);if(!u||u.from!=o||u instanceof Be&&u.slice.size>=a-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(K.create(c.doc,o)),n(c.scrollIntoView())}return!0}function ho(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const uR=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Gh(r)}let s=o&&o.nodeBefore;return!s||!V.isSelectable(s)?!1:(e&&e(t.tr.setSelection(V.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Gh(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function MS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const cR=(t,e,n)=>{let r=MS(t,n);if(!r)return!1;let i=Yh(r);if(!i)return!1;let o=i.nodeAfter;if(TS(t,i,e))return!0;if(r.parent.content.size==0&&(ho(o,"start")||V.isSelectable(o))){let s=Ou(t.doc,r.before(),r.after(),I.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(ho(o,"start")?q.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):V.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},dR=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Yh(r)}let s=o&&o.nodeAfter;return!s||!V.isSelectable(s)?!1:(e&&e(t.tr.setSelection(V.create(t.doc,o.pos)).scrollIntoView()),!0)};function Yh(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const fR=(t,e)=>{let n=t.selection,r=n instanceof V,i;if(r){if(n.node.isTextblock||!Dr(t.doc,n.from))return!1;i=n.from}else if(i=Tu(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(V.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},hR=(t,e)=>{let n=t.selection,r;if(n instanceof V){if(n.node.isTextblock||!Dr(t.doc,n.to))return!1;r=n.to}else if(r=Tu(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},pR=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&wo(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},mR=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function NS(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const gR=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=NS(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(q.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},yR=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof fn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=NS(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(K.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},vR=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Yi(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&wo(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},xR=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(V.create(t.doc,i))),!0)};function SR(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Dr(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function TS(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(SR(t,e,n))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let d=e.pos+i.nodeSize,f=O.empty;for(let g=o.length-1;g>=0;g--)f=O.from(o[g].create(null,f));f=O.from(r.copy(f));let m=t.tr.step(new Ve(e.pos-1,d,e.pos,d,new I(f,1,0),o.length,!0)),h=d+2*o.length;Dr(m.doc,h)&&m.join(h),n(m.scrollIntoView())}return!0}let a=q.findFrom(e,1),u=a&&a.$from.blockRange(a.$to),c=u&&wo(u);if(c!=null&&c>=e.depth)return n&&n(t.tr.lift(u,c).scrollIntoView()),!0;if(l&&ho(i,"start",!0)&&ho(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let m=i,h=1;for(;!m.isTextblock;m=m.firstChild)h++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(n){let g=O.empty;for(let y=f.length-1;y>=0;y--)g=O.from(f[y].copy(g));let x=t.tr.step(new Ve(e.pos-f.length,e.pos+i.nodeSize,e.pos+h,e.pos+i.nodeSize-h,new I(g,f.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function OS(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(K.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const kR=OS(-1),wR=OS(1);function ER(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&Fh(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function ly(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function CR(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=!1,a=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);a=new wa(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new wa(i,n.doc.resolve(o.end(s.depth)),s.depth)),l=!0}let u=Fh(a,t,e,s);return u?(r&&r(bR(n.tr,s,u,l,t).scrollIntoView()),!0):!1}}function bR(t,e,n,r,i){let o=O.empty;for(let c=n.length-1;c>=0;c--)o=O.from(n[c].type.create(n[c].attrs,o));t.step(new Ve(e.start-(r?2:0),e.end,e.start,e.end,new I(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let l=n.length-s,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&Yi(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function MR(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?NR(e,n,t,o):TR(e,n,o):!0:!1}}function NR(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Ve(o-1,s,o,s,new I(O.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new wa(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=wo(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(o,-1)-1;return Dr(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function TR(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,h=n.endIndex-1,g=n.startIndex;h>g;h--)m-=i.child(h).nodeSize,r.delete(m-1,m+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,s.content.append(a?O.empty:O.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new Ve(d-(l?1:0),f+(a?1:0),d+1,f-1,new I((l?O.empty:O.from(i.copy(O.empty))).append(a?O.empty:O.from(i.copy(O.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function OR(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=O.from(u?t.create():null),d=new I(O.from(t.create(null,O.from(l.type.create(null,c)))),u?3:1,0),f=o.start,m=o.end;n(e.tr.step(new Ve(f-(u?3:1),m,f,m,d,1,!0)).scrollIntoView())}return!0}}function Au(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class Iu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const d=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,u=e||o.tr,c=()=>(!a&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,m])=>[f,(...g)=>{const x=this.buildProps(u,n),y=m(...g)(x);return l.push(y),d}])),run:c};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Au({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class PR{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function _(t,e,n){return t.config[e]===void 0&&t.parent?_(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?_(t.parent,e,n):null}):t.config[e]}function Lu(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function PS(t){const e=[],{nodeExtensions:n,markExtensions:r}=Lu(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=_(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,m])=>{e.push({type:d,name:f,attribute:{...o,...m}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=_(s,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:c,attribute:f})})}),e}function Ue(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Te(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?o.split(" "):[],a=r[i]?r[i].split(" "):[],u=l.filter(c=>!a.includes(c));r[i]=[...a,...u].join(" ")}else i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function df(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Te(n,r),{})}function RS(t){return typeof t=="function"}function J(t,e=void 0,...n){return RS(t)?e?t.bind(e)(...n):t(...n):t}function RR(t={}){return Object.keys(t).length===0&&t.constructor===Object}function DR(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function ay(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):DR(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function uy(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&RR(n)?!1:n!=null))}function jR(t,e){var n;const r=PS(t),{nodeExtensions:i,markExtensions:o}=Lu(t),s=(n=i.find(u=>_(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(u=>{const c=r.filter(y=>y.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((y,v)=>{const k=_(v,"extendNodeSchema",d);return{...y,...k?k(u):{}}},{}),m=uy({...f,content:J(_(u,"content",d)),marks:J(_(u,"marks",d)),group:J(_(u,"group",d)),inline:J(_(u,"inline",d)),atom:J(_(u,"atom",d)),selectable:J(_(u,"selectable",d)),draggable:J(_(u,"draggable",d)),code:J(_(u,"code",d)),defining:J(_(u,"defining",d)),isolating:J(_(u,"isolating",d)),attrs:Object.fromEntries(c.map(y=>{var v;return[y.name,{default:(v=y==null?void 0:y.attribute)===null||v===void 0?void 0:v.default}]}))}),h=J(_(u,"parseHTML",d));h&&(m.parseDOM=h.map(y=>ay(y,c)));const g=_(u,"renderHTML",d);g&&(m.toDOM=y=>g({node:y,HTMLAttributes:df(y,c)}));const x=_(u,"renderText",d);return x&&(m.toText=x),[u.name,m]})),a=Object.fromEntries(o.map(u=>{const c=r.filter(x=>x.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((x,y)=>{const v=_(y,"extendMarkSchema",d);return{...x,...v?v(u):{}}},{}),m=uy({...f,inclusive:J(_(u,"inclusive",d)),excludes:J(_(u,"excludes",d)),group:J(_(u,"group",d)),spanning:J(_(u,"spanning",d)),code:J(_(u,"code",d)),attrs:Object.fromEntries(c.map(x=>{var y;return[x.name,{default:(y=x==null?void 0:x.attribute)===null||y===void 0?void 0:y.default}]}))}),h=J(_(u,"parseHTML",d));h&&(m.parseDOM=h.map(x=>ay(x,c)));const g=_(u,"renderHTML",d);return g&&(m.toDOM=x=>g({mark:x,HTMLAttributes:df(x,c)})),[u.name,m]}));return new LT({topNode:s,nodes:l,marks:a})}function Vc(t,e){return e.nodes[t]||e.marks[t]||null}function cy(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const AR=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,u;const c=((u=(a=i.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=c.slice(0,Math.max(0,r-o))}),n};function Qh(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class _u{constructor(e){this.find=e.find,this.handler=e.handler}}const IR=(t,e)=>{if(Qh(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Ml(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=AR(u)+o;return s.forEach(f=>{if(c)return;const m=IR(d,f.find);if(!m)return;const h=a.state.tr,g=Au({state:a.state,transaction:h}),x={from:r-(m[0].length-o.length),to:i},{commands:y,chain:v,can:k}=new Iu({editor:n,state:g});f.handler({state:g,range:x,match:m,commands:y,chain:v,can:k})===null||!h.steps.length||(h.setMeta(l,{transform:h,from:r,to:i,text:o}),a.dispatch(h),c=!0)}),c}function LR(t){const{editor:e,rules:n}=t,r=new en({state:{init(){return null},apply(i,o){const s=i.getMeta(r);if(s)return s;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{const{from:u,text:c}=l,d=u+c.length;Ml({editor:e,from:u,to:d,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return Ml({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Ml({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Ml({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function _R(t){return typeof t=="number"}class zR{constructor(e){this.find=e.find,this.handler=e.handler}}const FR=(t,e,n)=>{if(Qh(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function BR(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:u,can:c}=new Iu({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(m,h)=>{if(!m.isTextblock||m.type.spec.code)return;const g=Math.max(r,h),x=Math.min(i,h+m.content.size),y=m.textBetween(g-h,x-h,void 0,"￼");FR(y,o.find,s).forEach(k=>{if(k.index===void 0)return;const S=g+k.index+1,b=S+k[0].length,N={from:n.tr.mapping.map(S),to:n.tr.mapping.map(b)},M=o.handler({state:n,range:N,match:k,commands:a,chain:u,can:c,pasteEvent:s,dropEvent:l});d.push(M)})}),d.every(m=>m!==null)}const $R=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function VR(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l=typeof DragEvent<"u"?new DragEvent("drop"):null;const a=({state:c,from:d,to:f,rule:m,pasteEvt:h})=>{const g=c.tr,x=Au({state:c,transaction:g});if(!(!BR({editor:e,state:x,from:Math.max(d-1,0),to:f.b-1,rule:m,pasteEvent:h,dropEvent:l})||!g.steps.length))return l=typeof DragEvent<"u"?new DragEvent("drop"):null,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g};return n.map(c=>new en({view(d){const f=m=>{var h;r=!((h=d.dom.parentElement)===null||h===void 0)&&h.contains(m.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(o=r===d.dom.parentElement,l=f,!1),paste:(d,f)=>{var m;const h=(m=f.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=f,i=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,m)=>{const h=d[0],g=h.getMeta("uiEvent")==="paste"&&!i,x=h.getMeta("uiEvent")==="drop"&&!o,y=h.getMeta("applyPasteRules"),v=!!y;if(!g&&!x&&!v)return;if(v){const{from:b,text:N}=y,M=b+N.length,R=$R(N);return a({rule:c,state:m,from:b,to:{b:M},pasteEvt:R})}const k=f.doc.content.findDiffStart(m.doc.content),S=f.doc.content.findDiffEnd(m.doc.content);if(!(!_R(k)||!S||k===S.b))return a({rule:c,state:m,from:k,to:S,pasteEvt:s})}}))}function HR(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class $i{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=$i.resolve(e),this.schema=jR(this.extensions,n),this.setupExtensions()}static resolve(e){const n=$i.sort($i.flatten(e)),r=HR(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=_(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=_(r,"priority")||100,s=_(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Vc(n.name,this.schema)},i=_(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=$i.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Vc(s.name,this.schema)},a=[],u=_(s,"addKeyboardShortcuts",l);let c={};if(s.type==="mark"&&s.config.exitable&&(c.ArrowRight=()=>Qt.handleExit({editor:e,mark:s})),u){const g=Object.fromEntries(Object.entries(u()).map(([x,y])=>[x,()=>y({editor:e})]));c={...c,...g}}const d=iR(c);a.push(d);const f=_(s,"addInputRules",l);cy(s,e.options.enableInputRules)&&f&&r.push(...f());const m=_(s,"addPasteRules",l);cy(s,e.options.enablePasteRules)&&m&&i.push(...m());const h=_(s,"addProseMirrorPlugins",l);if(h){const g=h();a.push(...g)}return a}).flat();return[LR({editor:e,rules:r}),...VR({editor:e,rules:i}),...o]}get attributes(){return PS(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Lu(this.extensions);return Object.fromEntries(n.filter(r=>!!_(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ue(r.name,this.schema)},s=_(r,"addNodeView",o);if(!s)return[];const l=(a,u,c,d)=>{const f=df(a,i);return s()({editor:e,node:a,getPos:c,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Vc(e.name,this.schema)};e.type==="mark"&&(!((n=J(_(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=_(e,"onBeforeCreate",r),o=_(e,"onCreate",r),s=_(e,"onUpdate",r),l=_(e,"onSelectionUpdate",r),a=_(e,"onTransaction",r),u=_(e,"onFocus",r),c=_(e,"onBlur",r),d=_(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}function UR(t){return Object.prototype.toString.call(t).slice(8,-1)}function Hc(t){return UR(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function zu(t,e){const n={...t};return Hc(t)&&Hc(e)&&Object.keys(e).forEach(r=>{Hc(e[r])?r in t?n[r]=zu(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class Nt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(_(this,"addOptions",{name:this.name}))),this.storage=J(_(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Nt(e)}configure(e={}){const n=this.extend();return n.parent=this.parent,n.options=zu(this.options,e),n.storage=J(_(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Nt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=J(_(n,"addOptions",{name:n.name})),n.storage=J(_(n,"addStorage",{name:n.name,options:n.options})),n}}function DS(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,u,c,d)=>{var f;a.isBlock&&u>r&&(l+=o);const m=s==null?void 0:s[a.type.name];if(m)return c&&(l+=m({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u))}),l}function jS(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const WR=Nt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new en({key:new jr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=jS(n);return DS(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),KR=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),JR=(t=!1)=>({commands:e})=>e.setContent("",t),qR=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),m=d.blockRange(f);if(!m)return;const h=wo(m);if(l.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,g)}(h||h===0)&&e.lift(m,h)})}),!0},GR=t=>e=>t(e),YR=()=>({state:t,dispatch:e})=>yR(t,e),QR=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new K(r.doc.resolve(s-1))),!0},XR=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},ZR=t=>({tr:e,state:n,dispatch:r})=>{const i=Ue(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),u=o.after(s);e.delete(a,u).scrollIntoView()}return!0}return!1},e2=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},t2=()=>({state:t,dispatch:e})=>oR(t,e),n2=()=>({commands:t})=>t.keyboardShortcut("Enter"),r2=()=>({state:t,dispatch:e})=>gR(t,e);function Ra(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Qh(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function ff(t,e,n={}){return t.find(r=>r.type===e&&Ra(r.attrs,n))}function i2(t,e,n={}){return!!ff(t,e,n)}function Xh(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=ff([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,l=o+1,a=s+r.node.nodeSize;for(ff([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&i2([...t.parent.child(l).marks],e,n);)a+=t.parent.child(l).nodeSize,l+=1;return{from:s,to:a}}function Ir(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const o2=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Ir(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:u,to:c}=l;if(i){const d=Xh(a,o,e);if(d&&d.from<=u&&d.to>=c){const f=K.create(s,d.from,d.to);n.setSelection(f)}}return!0},s2=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function AS(t){return t instanceof K}function Qr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function IS(t,e=null){if(!e)return null;const n=q.atStart(t),r=q.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?K.create(t,Qr(0,i,o),Qr(t.content.size,i,o)):K.create(t,Qr(e,i,o),Qr(e,i,o))}function Zh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const l2=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{Zh()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!AS(n.state.selection))return s(),!0;const l=IS(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},a2=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),u2=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),LS=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&LS(r)}return t};function dy(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return LS(n)}function Da(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{return Array.isArray(t)&&t.length>0?O.fromArray(t.map(s=>e.nodeFromJSON(s))):e.nodeFromJSON(t)}catch(o){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Da("",e,n)}if(i){const o=ao.fromSchema(e);return n.slice?o.parseSlice(dy(t),n.parseOptions).content:o.parse(dy(t),n.parseOptions)}return Da("",e,n)}function c2(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Be||i instanceof Ve))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,u,c)=>{s===0&&(s=c)}),t.setSelection(q.near(t.doc.resolve(s),n))}const d2=t=>t.toString().startsWith("<"),f2=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const s=Da(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(s.toString()==="<>")return!0;let{from:l,to:a}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,c=!0;if((d2(s)?s:[s]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,c=c?m.isBlock:!1}),l===a&&c){const{parent:m}=r.doc.resolve(l);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(l-=1,a+=1)}let f;u?(Array.isArray(e)?f=e.map(m=>m.text||"").join(""):typeof e=="object"&&e&&e.text?f=e.text:f=e,r.insertText(f,l,a)):(f=s,r.replaceWith(l,a,f)),n.updateSelection&&c2(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:f})}return!0},h2=()=>({state:t,dispatch:e})=>fR(t,e),p2=()=>({state:t,dispatch:e})=>hR(t,e),m2=()=>({state:t,dispatch:e})=>sR(t,e),g2=()=>({state:t,dispatch:e})=>cR(t,e),y2=()=>({tr:t,state:e,dispatch:n})=>{try{const r=Tu(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},v2=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Tu(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},x2=()=>({state:t,dispatch:e})=>lR(t,e),S2=()=>({state:t,dispatch:e})=>aR(t,e);function _S(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function k2(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Zh()||_S()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const w2=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=k2(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Fs(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Ue(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const m=Math.max(r,f),h=Math.min(i,f+d.nodeSize);l.push({node:d,from:m,to:h})});const a=i-r,u=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>Ra(d.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}const E2=(t,e={})=>({state:n,dispatch:r})=>{const i=Ue(t,n.schema);return Fs(n,i,e)?pR(n,r):!1},C2=()=>({state:t,dispatch:e})=>vR(t,e),b2=t=>({state:e,dispatch:n})=>{const r=Ue(t,e.schema);return MR(r)(e,n)},M2=()=>({state:t,dispatch:e})=>mR(t,e);function Fu(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function fy(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const N2=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Fu(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Ue(t,r.schema)),l==="mark"&&(s=Ir(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,fy(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(d=>{s===d.type&&n.addMark(c,c+u.nodeSize,s.create(fy(d.attrs,e)))})})}),!0):!1},T2=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),O2=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),P2=()=>({state:t,dispatch:e})=>uR(t,e),R2=()=>({state:t,dispatch:e})=>dR(t,e),D2=()=>({state:t,dispatch:e})=>xR(t,e),j2=()=>({state:t,dispatch:e})=>wR(t,e),A2=()=>({state:t,dispatch:e})=>kR(t,e);function zS(t,e,n={}){return Da(t,e,{slice:!1,parseOptions:n})}const I2=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,l=zS(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,l).setMeta("preventUpdate",!e),!0};function Xs(t,e){const n=Ir(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function L2(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function _2(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function ep(t){return e=>_2(e.$from,t)}function z2(t,e){const n=wn.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function F2(t,e){const n={from:0,to:t.content.size};return DS(t,n,e)}function B2(t,e){const n=Ue(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function $2(t,e){const n=Fu(typeof e=="string"?e:e.name,t.schema);return n==="node"?B2(t,e):n==="mark"?Xs(t,e):{}}function FS(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t-1),s=Xh(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function $l(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function hf(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Ir(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>Ra(d.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const m=d.pos,h=f.pos;t.doc.nodesBetween(m,h,(g,x)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(m,x),v=Math.min(h,x+g.nodeSize),k=v-y;s+=k,l.push(...g.marks.map(S=>({mark:S,from:y,to:v})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>Ra(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=s}function V2(t,e,n={}){if(!e)return Fs(t,null,n)||hf(t,null,n);const r=Fu(e,t.schema);return r==="node"?Fs(t,e,n):r==="mark"?hf(t,e,n):!1}function hy(t,e){const{nodeExtensions:n}=Lu(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=J(_(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function H2(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function U2(t,e,n){var r;const{selection:i}=e;let o=null;if(AS(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const m=!f||f.type.allowsMarkType(n),h=!!n.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(n));u=m&&h}return!u}),u})}const W2=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Ir(t,r.schema);if(i)if(s){const u=Xs(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,m)=>{const h=Math.max(m,c),g=Math.min(m+f.nodeSize,d);f.marks.find(y=>y.type===a)?f.marks.forEach(y=>{a===y.type&&n.addMark(h,g,a.create({...y.attrs,...e}))}):n.addMark(h,g,a.create(e))})});return U2(r,n,a)},K2=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),J2=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Ue(t,n.schema);return o.isTextblock?i().command(({commands:s})=>ly(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>ly(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},q2=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Qr(t,0,r.content.size),o=V.create(r,i);e.setSelection(o)}return!0},G2=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=K.atStart(r).from,l=K.atEnd(r).to,a=Qr(i,s,l),u=Qr(o,s,l),c=K.create(r,a,u);e.setSelection(c)}return!0},Y2=t=>({state:e,dispatch:n})=>{const r=Ue(t,e.schema);return OR(r)(e,n)};function py(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const Q2=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,u=i.extensionManager.attributes,c=$l(u,l.node().type.name,l.node().attrs);if(o instanceof V&&o.node.isBlock)return!l.parentOffset||!Yi(s,l.pos)?!1:(r&&(t&&py(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(r){const d=a.parentOffset===a.parent.content.size;o instanceof K&&e.deleteSelection();const f=l.depth===0?void 0:L2(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=d&&f?[{type:f,attrs:c}]:void 0,h=Yi(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!h&&Yi(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(h=!0,m=f?[{type:f,attrs:c}]:void 0),h&&(e.split(e.mapping.map(l.pos),1,m),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const g=e.mapping.map(l.before()),x=e.doc.resolve(g);l.node(-1).canReplaceWith(x.index(),x.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&py(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},X2=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;const s=Ue(t,n.schema),{$from:l,$to:a}=n.selection,u=n.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(a))return!1;const c=l.node(-1);if(c.type!==s)return!1;const d=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==s||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let x=O.empty;const y=l.index(-1)?1:l.index(-2)?2:3;for(let M=l.depth-y;M>=l.depth-3;M-=1)x=O.from(l.node(M).copy(x));const v=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k=$l(d,l.node().type.name,l.node().attrs),S=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(k))||void 0;x=x.append(O.from(s.createAndFill(null,S)||void 0));const b=l.before(l.depth-(y-1));e.replace(b,l.after(-v),new I(x,4-y,0));let N=-1;e.doc.nodesBetween(b,e.doc.content.size,(M,R)=>{if(N>-1)return!1;M.isTextblock&&M.content.size===0&&(N=R+1)}),N>-1&&e.setSelection(K.near(e.doc.resolve(N))),e.scrollIntoView()}return!0}const f=a.pos===l.end()?c.contentMatchAt(0).defaultType:null,m=$l(d,c.type.name,c.attrs),h=$l(d,l.node().type.name,l.node().attrs);e.delete(l.pos,a.pos);const g=f?[{type:s,attrs:m},{type:f,attrs:h}]:[{type:s,attrs:m}];if(!Yi(e.doc,l.pos,2))return!1;if(r){const{selection:x,storedMarks:y}=n,{splittableMarks:v}=i.extensionManager,k=y||x.$to.parentOffset&&x.$from.marks();if(e.split(l.pos,2,g).scrollIntoView(),!k||!r)return!0;const S=k.filter(b=>v.includes(b.type.name));e.ensureMarks(S)}return!0},Uc=(t,e)=>{const n=ep(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Dr(t.doc,n.pos)&&t.join(n.pos),!0},Wc=(t,e)=>{const n=ep(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Dr(t.doc,r)&&t.join(r),!0},Z2=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,m=Ue(t,s.schema),h=Ue(e,s.schema),{selection:g,storedMarks:x}=s,{$from:y,$to:v}=g,k=y.blockRange(v),S=x||g.$to.parentOffset&&g.$from.marks();if(!k)return!1;const b=ep(N=>hy(N.type.name,d))(g);if(k.depth>=1&&b&&k.depth-b.depth<=1){if(b.node.type===m)return u.liftListItem(h);if(hy(b.node.type.name,d)&&m.validContent(b.node.content)&&l)return a().command(()=>(o.setNodeMarkup(b.pos,m),!0)).command(()=>Uc(o,m)).command(()=>Wc(o,m)).run()}return!n||!S||!l?a().command(()=>c().wrapInList(m,r)?!0:u.clearNodes()).wrapInList(m,r).command(()=>Uc(o,m)).command(()=>Wc(o,m)).run():a().command(()=>{const N=c().wrapInList(m,r),M=S.filter(R=>f.includes(R.type.name));return o.ensureMarks(M),N?!0:u.clearNodes()}).wrapInList(m,r).command(()=>Uc(o,m)).command(()=>Wc(o,m)).run()},eD=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Ir(t,r.schema);return hf(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},tD=(t,e,n={})=>({state:r,commands:i})=>{const o=Ue(t,r.schema),s=Ue(e,r.schema);return Fs(r,o,n)?i.setNode(s):i.setNode(o,n)},nD=(t,e={})=>({state:n,commands:r})=>{const i=Ue(t,n.schema);return Fs(n,i,e)?r.lift(i):r.wrapIn(i,e)},rD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},iD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},oD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Ir(t,r.schema),{$from:u,empty:c,ranges:d}=l;if(!i)return!0;if(c&&s){let{from:f,to:m}=l;const h=(o=u.marks().find(x=>x.type===a))===null||o===void 0?void 0:o.attrs,g=Xh(u,a,h);g&&(f=g.from,m=g.to),n.removeMark(f,m,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},sD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Fu(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Ue(t,r.schema)),l==="mark"&&(s=Ir(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;r.doc.nodesBetween(u,c,(d,f)=>{o&&o===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),s&&d.marks.length&&d.marks.forEach(m=>{if(s===m.type){const h=Math.max(f,u),g=Math.min(f+d.nodeSize,c);n.addMark(h,g,s.create({...m.attrs,...e}))}})})}),!0):!1},lD=(t,e={})=>({state:n,dispatch:r})=>{const i=Ue(t,n.schema);return ER(i,e)(n,r)},aD=(t,e={})=>({state:n,dispatch:r})=>{const i=Ue(t,n.schema);return CR(i,e)(n,r)};var uD=Object.freeze({__proto__:null,blur:KR,clearContent:JR,clearNodes:qR,command:GR,createParagraphNear:YR,cut:QR,deleteCurrentNode:XR,deleteNode:ZR,deleteRange:e2,deleteSelection:t2,enter:n2,exitCode:r2,extendMarkRange:o2,first:s2,focus:l2,forEach:a2,insertContent:u2,insertContentAt:f2,joinUp:h2,joinDown:p2,joinBackward:m2,joinForward:g2,joinItemBackward:y2,joinItemForward:v2,joinTextblockBackward:x2,joinTextblockForward:S2,keyboardShortcut:w2,lift:E2,liftEmptyBlock:C2,liftListItem:b2,newlineInCode:M2,resetAttributes:N2,scrollIntoView:T2,selectAll:O2,selectNodeBackward:P2,selectNodeForward:R2,selectParentNode:D2,selectTextblockEnd:j2,selectTextblockStart:A2,setContent:I2,setMark:W2,setMeta:K2,setNode:J2,setNodeSelection:q2,setTextSelection:G2,sinkListItem:Y2,splitBlock:Q2,splitListItem:X2,toggleList:Z2,toggleMark:eD,toggleNode:tD,toggleWrap:nD,undoInputRule:rD,unsetAllMarks:iD,unsetMark:oD,updateAttributes:sD,wrapIn:lD,wrapInList:aD});const cD=Nt.create({name:"commands",addCommands(){return{...uD}}}),dD=Nt.create({name:"editable",addProseMirrorPlugins(){return[new en({key:new jr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),fD=Nt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new en({key:new jr("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),hD=Nt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:m}=d,h=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,g=h.parent.type.spec.isolating,x=d.pos-d.parentOffset,y=g&&h.parent.childCount===1?x===d.pos:q.atStart(u).from===f;return!c||!m.type.isTextblock||m.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Zh()||_S()?o:i},addProseMirrorPlugins(){return[new en({key:new jr("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(h=>h.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:o,to:s}=e.selection,l=q.atStart(e.doc).from,a=q.atEnd(e.doc).to;if(i||!(o===l&&s===a)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const d=n.tr,f=Au({state:n,transaction:d}),{commands:m}=new Iu({editor:this.editor,state:f});if(m.clearNodes(),!!d.steps.length)return d}})]}}),pD=Nt.create({name:"tabindex",addProseMirrorPlugins(){return[new en({key:new jr("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Hr{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Hr(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Hr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Hr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=this.pos+r+1,s=this.resolvedPos.doc.resolve(o);if(!i&&s.depth<=this.depth)return;const l=new Hr(s,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Hr(s,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const mD=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function gD(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let yD=class extends PR{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=gD(mD,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=RS(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[dD,WR.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),cD,fD,hD,pD]:[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new $i(i,this)}createCommandManager(){this.commandManager=new Iu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=zS(this.options.content,this.schema,this.options.parseOptions),n=IS(e,this.options.autofocus);this.view=new GP(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Bi.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return $2(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return V2(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return z2(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return F2(this.state.doc,{blockSeparator:n,textSerializers:{...jS(this.schema),...r}})}get isEmpty(){return H2(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Hr(n,this)}get $doc(){return this.$pos(0)}};function po(t){return new _u({find:t.find,handler:({state:e,range:n,match:r})=>{const i=J(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),u=n.from+l.indexOf(s),c=u+s.length;if(FS(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(g=>g===t.type&&g!==m.mark.type)).filter(m=>m.to>u).length)return null;c<n.to&&o.delete(c,n.to),u>n.from&&o.delete(n.from+a,u);const f=n.from+a+s.length;o.addMark(n.from+a,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function vD(t){return new _u({find:t.find,handler:({state:e,range:n,match:r})=>{const i=J(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=s+u;c>l?c=l:l=c+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(c,l,a)}else r[0]&&o.insert(s-1,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l));o.scrollIntoView()}})}function pf(t){return new _u({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=J(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Bs(t){return new _u({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=J(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),u=a&&Fh(a,t.type,o);if(!u)return null;if(s.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:m}=t.editor.extensionManager,h=f||d.$to.parentOffset&&d.$from.marks();if(h){const g=h.filter(x=>m.includes(x.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&Dr(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}class Qt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(_(this,"addOptions",{name:this.name}))),this.storage=J(_(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Qt(e)}configure(e={}){const n=this.extend();return n.options=zu(this.options,e),n.storage=J(_(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Qt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=J(_(n,"addOptions",{name:n.name})),n.storage=J(_(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const a=s.find(u=>(u==null?void 0:u.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class lt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(_(this,"addOptions",{name:this.name}))),this.storage=J(_(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new lt(e)}configure(e={}){const n=this.extend();return n.options=zu(this.options,e),n.storage=J(_(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new lt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=J(_(n,"addOptions",{name:n.name})),n.storage=J(_(n,"addStorage",{name:n.name,options:n.options})),n}}function mo(t){return new zR({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=J(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const c=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(FS(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(x=>x===t.type&&x!==h.mark.type)).filter(h=>h.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+c,d),u=n.from+c+l.length,s.addMark(n.from+c,u,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}const my=Qt.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Xs(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),xD=Nt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),mf=lt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Te(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),gy=Qt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),SD=/^\s*>\s$/,kD=lt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bs({find:SD,type:this.type})]}}),wD=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ED=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,CD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,bD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,MD=Qt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[po({find:wD,type:this.type}),po({find:CD,type:this.type})]},addPasteRules(){return[mo({find:ED,type:this.type}),mo({find:bD,type:this.type})]}}),ND=lt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Te(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),yy=Qt.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Xs(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),vy=/^\s*([-+*])\s$/,TD=lt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ND.name,this.editor.getAttributes(yy.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Bs({find:vy,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bs({find:vy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(yy.name),editor:this.editor})),[t]}}),OD=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,PD=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,RD=Qt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[po({find:OD,type:this.type})]},addPasteRules(){return[mo({find:PD,type:this.type})]}}),DD=/^```([a-z]+)?[\s\n]$/,jD=/^~~~([a-z]+)?[\s\n]$/,AD=lt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Te(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0||r.nodeAt(l)?!1:t.commands.exitCode()}}},addInputRules(){return[pf({find:DD,type:this.type,getAttributes:t=>({language:t[1]})}),pf({find:jD,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new en({key:new jr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s}=t.state;return t.state.selection.from===t.state.doc.nodeSize-(1+t.state.selection.$to.depth*2)?s.insert(t.state.selection.from-1,this.type.create({language:o})):s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(K.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),ID=lt.create({name:"doc",topNode:!0,content:"block+"});function LD(t={}){return new en({view(e){return new _D(e,t)}})}class _D{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let c=u.getBoundingClientRect(),d=l?c.bottom:c.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let l=i.getBoundingClientRect();o=l.left-i.scrollLeft,s=l.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=_x(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const zD=Nt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[LD(this.options)]}});class Ee extends q{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ee.valid(r)?new Ee(r):q.near(r)}content(){return I.empty}eq(e){return e instanceof Ee&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ee(e.resolve(n.pos))}getBookmark(){return new tp(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!FD(e)||!BD(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ee.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(Ee.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!V.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(Ee.valid(l))return l}return null}}}Ee.prototype.visible=!1;Ee.findFrom=Ee.findGapCursorFrom;q.jsonID("gapcursor",Ee);class tp{constructor(e){this.pos=e}map(e){return new tp(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ee.valid(n)?new Ee(n):q.near(n)}}function FD(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function BD(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function $D(){return new en({props:{decorations:WD,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ee.valid(n)?new Ee(n):null},handleClick:HD,handleKeyDown:VD,handleDOMEvents:{beforeinput:UD}}})}const VD=ES({ArrowLeft:Nl("horiz",-1),ArrowRight:Nl("horiz",1),ArrowUp:Nl("vert",-1),ArrowDown:Nl("vert",1)});function Nl(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof K){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Ee.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new Ee(u))),!0):!1}}function HD(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ee.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&V.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ee(r))),!0)}function UD(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ee))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=O.empty;for(let s=r.length-1;s>=0;s--)i=O.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new I(i,0,0));return o.setSelection(K.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function WD(t){if(!(t.selection instanceof Ee))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Le.create(t.doc,[Kt.widget(t.selection.head,e,{key:"gapcursor"})])}const KD=Nt.create({name:"gapCursor",addProseMirrorPlugins(){return[$D()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=J(_(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),JD=lt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Te(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&s){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),qD=lt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Te(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>pf({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ja=200,He=function(){};He.prototype.append=function(e){return e.length?(e=He.from(e),!this.length&&e||e.length<ja&&this.leafAppend(e)||this.length<ja&&e.leafPrepend(this)||this.appendInner(e)):this};He.prototype.prepend=function(e){return e.length?He.from(e).append(this):this};He.prototype.appendInner=function(e){return new GD(this,e)};He.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?He.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};He.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};He.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};He.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};He.from=function(e){return e instanceof He?e:e&&e.length?new BS(e):He.empty};var BS=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ja)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ja)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(He);He.empty=new BS([]);var GD=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(He);const YD=500;class un{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,c.push(d);return}if(i){c.push(new xn(d.map));let m=d.step.map(i.slice(o)),h;m&&s.maybeStep(m).doc&&(h=s.mapping.maps[s.mapping.maps.length-1],u.push(new xn(h,void 0,void 0,u.length+c.length))),o--,h&&i.appendMap(h,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new un(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new xn(e.mapping.maps[c],d,n),m;(m=a&&a.merge(f))&&(f=m,c?o.pop():l=l.slice(0,l.length-1)),o.push(f),n&&(s++,n=void 0),i||(a=f)}let u=s-r.depth;return u>XD&&(l=QD(l,u),s-=u),new un(l.append(o),s)}remapping(e,n){let r=new Gi;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new un(this.items.append(e.map(n=>new xn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let m=o.getMirror(--a);if(m==null)return;s=Math.min(s,m);let h=o.maps[m];if(f.step){let g=e.steps[m].invert(e.docs[m]),x=f.selection&&f.selection.map(o.slice(a+1,m));x&&l++,r.push(new xn(h,g,x))}else r.push(new xn(h))},i);let u=[];for(let f=n;f<s;f++)u.push(new xn(o.maps[f]));let c=this.items.slice(0,i).append(u).append(r),d=new un(c,l);return d.emptyItemCount()>YD&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=s.selection&&s.selection.map(n.slice(r));c&&o++;let d=new xn(u.invert(),a,c),f,m=i.length-1;(f=i.length&&i[m].merge(d))?i[m]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new un(He.from(i.reverse()),o)}}un.empty=new un(He.empty,0);function QD(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class xn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new xn(n.getMap().invert(),n,this.selection)}}}class nr{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const XD=20;function ZD(t,e,n,r){let i=n.getMeta(oi),o;if(i)return i.historyState;n.getMeta(nj)&&(t=new nr(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(oi))return s.getMeta(oi).redo?new nr(t.done.addTransform(n,void 0,r,Vl(e)),t.undone,xy(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new nr(t.done,t.undone.addTransform(n,void 0,r,Vl(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ej(n,t.prevRanges)),u=s?Kc(t.prevRanges,n.mapping):xy(n.mapping.maps[n.steps.length-1]);return new nr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Vl(e)),un.empty,u,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new nr(t.done.rebased(n,o),t.undone.rebased(n,o),Kc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new nr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Kc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ej(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function xy(t){let e=[];return t.forEach((n,r,i,o)=>e.push(i,o)),e}function Kc(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function tj(t,e,n){let r=Vl(e),i=oi.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new nr(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(oi,{redo:n,historyState:a})}let Jc=!1,Sy=null;function Vl(t){let e=t.plugins;if(Sy!=e){Jc=!1,Sy=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Jc=!0;break}}return Jc}const oi=new jr("history"),nj=new jr("closeHistory");function rj(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new en({key:oi,state:{init(){return new nr(un.empty,un.empty,null,0,-1)},apply(e,n,r){return ZD(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?VS:r=="historyRedo"?HS:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function $S(t,e){return(n,r)=>{let i=oi.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=tj(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const VS=$S(!1,!0),HS=$S(!0,!0),ij=Nt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>VS(t,e),redo:()=>({state:t,dispatch:e})=>HS(t,e)}},addProseMirrorPlugins(){return[rj(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),oj=lt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Te(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:o})=>{var s;if(o){const{$to:l}=i.selection,a=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?i.setSelection(K.create(i.doc,l.pos+1)):l.nodeAfter.isBlock?i.setSelection(V.create(i.doc,l.pos)):i.setSelection(K.create(i.doc,l.pos));else{const u=(s=l.parent.type.contentMatch.defaultType)===null||s===void 0?void 0:s.create();u&&(i.insert(a,u),i.setSelection(K.create(i.doc,a+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vD({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),sj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,aj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,uj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,cj=Qt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[po({find:sj,type:this.type}),po({find:aj,type:this.type})]},addPasteRules(){return[mo({find:lj,type:this.type}),mo({find:uj,type:this.type})]}}),dj=lt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Te(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ky=Qt.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Xs(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),wy=/^(\d+)\.\s$/,fj=lt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Te(this.options.HTMLAttributes,n),0]:["ol",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dj.name,this.editor.getAttributes(ky.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Bs({find:wy,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bs({find:wy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ky.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),hj=lt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),pj=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,mj=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gj=Qt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Te(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[po({find:pj,type:this.type})]},addPasteRules(){return[mo({find:mj,type:this.type})]}}),yj=lt.create({name:"text",group:"inline"}),vj=Nt.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,l,a,u,c,d,f,m,h,g,x,y;const v=[];return this.options.blockquote!==!1&&v.push(kD.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&v.push(MD.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&v.push(TD.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&v.push(RD.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(AD.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&v.push(ID.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&v.push(zD.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&v.push(KD.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&v.push(JD.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&v.push(qD.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&v.push(ij.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&v.push(oj.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&v.push(cj.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&v.push(mf.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&v.push(fj.configure((h=this.options)===null||h===void 0?void 0:h.orderedList)),this.options.paragraph!==!1&&v.push(hj.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&v.push(gj.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&v.push(yj.configure((y=this.options)===null||y===void 0?void 0:y.text)),v}}),xj=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Sj=({renderers:t})=>Ce.createElement(Ce.Fragment,null,Object.entries(t).map(([e,n])=>dh.createPortal(n.reactElement,n.element,e)));class kj extends Ce.Component{constructor(e){super(e),this.editorContentRef=Ce.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?Ks.flushSync(e):e()}setRenderer(e,n){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:n}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:n})=>{const r={...n};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Ce.createElement(Ce.Fragment,null,Ce.createElement("div",{ref:xj(n,this.editorContentRef),...r}),Ce.createElement(Sj,{renderers:this.state.renderers}))}}const wj=w.forwardRef((t,e)=>{const n=Ce.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ce.createElement(kj,{key:n,innerRef:e,...t})}),Ej=Ce.memo(wj);class Cj extends yD{constructor(){super(...arguments),this.contentComponent=null}}const bj=(t={},e=[])=>{const n=w.useRef(null),[,r]=w.useState({}),{onBeforeCreate:i,onBlur:o,onCreate:s,onDestroy:l,onFocus:a,onSelectionUpdate:u,onTransaction:c,onUpdate:d}=t,f=w.useRef(i),m=w.useRef(o),h=w.useRef(s),g=w.useRef(l),x=w.useRef(a),y=w.useRef(u),v=w.useRef(c),k=w.useRef(d);return w.useEffect(()=>{n.current&&(i&&(n.current.off("beforeCreate",f.current),n.current.on("beforeCreate",i),f.current=i),o&&(n.current.off("blur",m.current),n.current.on("blur",o),m.current=o),s&&(n.current.off("create",h.current),n.current.on("create",s),h.current=s),l&&(n.current.off("destroy",g.current),n.current.on("destroy",l),g.current=l),a&&(n.current.off("focus",x.current),n.current.on("focus",a),x.current=a),u&&(n.current.off("selectionUpdate",y.current),n.current.on("selectionUpdate",u),y.current=u),c&&(n.current.off("transaction",v.current),n.current.on("transaction",c),v.current=c),d&&(n.current.off("update",k.current),n.current.on("update",d),k.current=d))},[i,o,s,l,a,u,c,d,n.current]),w.useEffect(()=>{let S=!0;const b=new Cj(t);return n.current=b,n.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{S&&r({})})})}),()=>{S=!1,b.destroy()}},e),n.current},Mj=w.createContext({editor:null});Mj.Consumer;const Nj=w.createContext({onDragStart:void 0}),Tj=()=>w.useContext(Nj);Ce.forwardRef((t,e)=>{const{onDragStart:n}=Tj(),r=t.as||"div";return Ce.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function Oj({entry:t,content:e,setIsPreview:n}){const r=je(),i=re(a=>a.session.user),{closeModal:o}=Ke(),s=async a=>{a.preventDefault(),await r(wh({id:t.id,userId:i.id,notebookId:t.notebook_id,name:t.name,content:e,isPublic:t.is_public})),n("Edit Entry"),await o()},l=()=>{console.log("Discard changes"),n("Edit Entry"),o()};return p.jsx("div",{className:"entry-modal-main-container",children:p.jsxs("div",{className:"entry-modal-form-container",children:[p.jsx("h1",{className:"entry-modal-titles",children:"You have unsaved changes!"}),p.jsxs("div",{className:"modal",children:[p.jsx("div",{className:"entry-modal-label",children:"Would you like to save your changes before leaving?"}),p.jsx("div",{className:"entry-modal-label",children:"Any unsaved changes will be lost"})]}),p.jsxs("div",{className:"entry-modal-conformation-btn-container",children:[p.jsx("button",{className:"modal-button conformation-btn",onClick:s,children:"Submit Changes"}),p.jsx("button",{className:"modal-button conformation-btn",onClick:l,children:"Leave Without Saving"})]})]})})}function Pj(t){return Zt({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M6 5.925h1v2h-1v-1h-2v8h1v1h-3v-1h1v-8h-2v1h-1v-2h6zM16 2h-10v2.577h1v-1.577h4v12h-1v1h3v-1h-1v-12h4v1.577h1v-2.577h-1z"},child:[]}]})(t)}const Rj=({editor:t})=>{const[e,n]=w.useState(2),r=()=>{n(i=>i+1),e>=6&&n(2),console.log("size",e),t.chain().focus().toggleHeading({level:e}).run()};return t?p.jsxs("div",{id:"menuBar-container",children:[p.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),disabled:!t.can().chain().focus().toggleBold().run(),className:t.isActive("bold")?"is-active":"",children:p.jsx(tN,{})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),disabled:!t.can().chain().focus().toggleItalic().run(),className:t.isActive("italic")?"is-active":"",children:p.jsx(rN,{})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleStrike().run(),disabled:!t.can().chain().focus().toggleStrike().run(),className:t.isActive("strike")?"is-active":"",children:p.jsx(aN,{})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),className:t.isActive("heading",{level:1})?"is-active":"",children:p.jsx(nN,{})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:t.isActive("bulletList")?"is-active":"",children:p.jsx(oN,{})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:t.isActive("orderedList")?"is-active":"",children:p.jsx(iN,{})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleBlockquote().run(),className:t.isActive("blockquote")?"is-active":"",children:p.jsx(sN,{})}),p.jsx("input",{id:"color-input",type:"color",onInput:i=>t.chain().focus().setColor(i.target.value).run(),value:t.getAttributes("textStyle").color,"data-testid":"setColor"}),p.jsxs("div",{className:"font-changing-container",children:[p.jsx("button",{id:"font-size-x-sml",onClick:r,className:t.isActive("heading",{level:6})?"is-active":"",children:p.jsx(Pj,{})}),p.jsx("div",{className:"font-size-change",children:e===6?"small":e===2?"x-small":e===3?"x-large":e===4?"large":e===5?"medium":""})]}),p.jsx("button",{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().chain().focus().undo().run(),children:p.jsx(uN,{})}),p.jsx("button",{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().chain().focus().redo().run(),children:p.jsx(lN,{})})]}):null};function Dj({setIsPreview:t}){const{entryId:e}=ko(),n=re(h=>h.entries[parseInt(e)]),r=je(),[i,o]=w.useState(n.content),[s,l]=w.useState(!0),{setModalContent:a}=Ke();w.useEffect(()=>{i!==n.content&&l(!1)},[i,n]);const u=w.useRef(null),c=w.useCallback(h=>{document.removeEventListener("click",c,!0),n.content!==i&&(u.current.contains(h.target)||a(p.jsx(Oj,{entry:n,content:i,setIsPreview:t})))},[i,n,a,t]);document.addEventListener("click",c,!0);const d=[gy,xD.configure({types:[my.name,mf.name]}),my.configure({types:[mf.name]}),vj.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}})],f=bj({extensions:d,content:i,Underline:gy,onUpdate:({editor:h})=>{const g=h.getHTML();o(g)}}),m=async h=>(h&&h.preventDefault(),await r(wh({id:n.id,userId:n.user_id,notebookId:n.notebook_id,name:n.name,content:i,isPublic:n.is_public})),await r(Or()),l(!0),document.removeEventListener("click",c,!0));return p.jsx("div",{ref:u,className:"editentry-main-container",id:"edit-entry-ref",children:p.jsxs("div",{className:"editentry-main-container",children:[p.jsxs("div",{id:"entryedit-toolbar-container",children:[p.jsx("div",{children:p.jsx(Rj,{editor:f})}),p.jsxs("div",{id:"editentry-save-btn-container",children:[p.jsx("p",{children:s?"Saved":""}),p.jsx("button",{className:"modal-button entry-button",onClick:m,children:"Save"})]})]}),p.jsx("div",{className:"entry-content-container",children:p.jsx(Ej,{editor:f})})]})})}function jj({entry:t}){const e=je(),n=zt(),[r,i]=w.useState(" "),[o,s]=w.useState({}),{closeModal:l}=Ke();w.useEffect(()=>{const c={};r.length<=0&&i(" "),r.length>250&&(c.message="Message can not be more than 100 characters"),s(c)},[r]);const a=async c=>{if(c.preventDefault(),Object.values(o).length)return;const d=await e(xM({entryId:t.id,message:r}));d.name?s(d):(await e(Or()),n(`/public/${t.id}`),await l())},u=()=>{l()};return p.jsxs("div",{className:"post-modal-main-container",children:[p.jsx("h1",{className:"post-modal-titles",children:`Post "${t.name}" to the public feed?`}),p.jsxs("div",{className:"post-modal-form-container",children:[p.jsx("div",{className:"post-modal-label",children:"Would you like to include a message with your post?"}),p.jsx("div",{className:"post-modal-label-2",children:"This is not necessary, but it can help others understand what you are trying to acheive with your writing."}),p.jsx("textarea",{type:"text",rows:7,value:r,onChange:c=>i(c.target.value)}),p.jsx("p",{className:o.message?"post-modal-errors":"post-modal-no-errors",children:`${r.length}/250`})]}),p.jsxs("div",{className:"post-modal-conformation-btn-container",children:[p.jsx("button",{className:"modal-button conformation-btn",onClick:a,children:"Yes, Make Public"}),p.jsx("button",{className:"modal-button conformation-btn",onClick:u,children:"No, Keep Private"})]})]})}function Bu({post:t}){const e=je(),{closeModal:n}=Ke(),r=async()=>{await e(kM(t.post)),await e(Or()),await n()},i=()=>{n()};return p.jsxs("div",{id:"post-remove-modal-container",children:[p.jsx("h2",{children:`Are you sure you want to remove "${t==null?void 0:t.name}" from the public feed?`}),p.jsx("h4",{className:"post-remove-disclaimer",children:"Don't worry, all the comments on your post will stay with your entry so you can continue to have the advice of other members."}),p.jsxs("div",{id:"remove-post-button-container",children:[p.jsx("button",{className:"modal-button conformation-btn",onClick:r,children:"Yes, Remove Post"}),p.jsx("button",{className:"modal-button conformation-btn",onClick:i,children:"No, Keep Post Public"})]})]})}const np=()=>p.jsx("h1",{children:"Loading Page"});function Aj(){const{notebookId:t,entryId:e}=ko(),n=re(d=>d.entries[e]),[r,i]=w.useState(""),[o,s]=w.useState("Edit Entry"),[l,a]=w.useState(!1),u=re(d=>d.notebooks[t]);w.useEffect(()=>{n&&a(!0)},[n]),w.useEffect(()=>{n!=null&&n.name&&i(n.name)},[n]);const c=()=>{s(o==="Preview"?"Edit Entry":"Preview")};return p.jsx("div",{children:l?p.jsxs("div",{children:[p.jsxs("div",{id:"entrypage-entry-notebook-title",children:[p.jsx("h2",{children:`Notebook: ${u==null?void 0:u.name}`}),p.jsxs("div",{id:"entrypage-entrytitle-buttons",children:[p.jsx("h1",{children:`Entry: ${r}`}),p.jsxs("div",{className:"entrypage-button-container",children:[p.jsx("div",{className:"editentry-name-button",hidden:o==="Preview",children:p.jsx(qr,{buttonText:"Edit Name",modalComponent:p.jsx(gN,{entry:n})})}),p.jsx("button",{className:"modal-button entry-button",onClick:c,children:o}),n!=null&&n.is_public?p.jsx("div",{className:"editentry-name-button",hidden:o==="Preview",children:p.jsx(qr,{buttonText:"Set Private",hidden:o==="Preview",modalComponent:p.jsx(Bu,{post:n})})}):p.jsx("div",{className:"editentry-name-button",hidden:o==="Preview",children:p.jsx(qr,{buttonText:"Set Public",hidden:o==="Preview",modalComponent:p.jsx(jj,{entry:n})})}),p.jsx("div",{className:"editentry-name-button",hidden:o==="Preview",children:p.jsx(qr,{buttonText:"Delete",modalComponent:p.jsx(Wv,{entry:n})})})]})]})]}),p.jsx("h1",{className:"entrypage-underline"}),p.jsx("div",{children:o==="Preview"?p.jsx(Dj,{entry:n,setIsPreview:s}):p.jsx(kT,{entry:n})})]}):p.jsx(np,{})})}function Ij(){const t=re(s=>s.entries),e=re(s=>s.users),[n,r]=w.useState(Object.values(t).filter(s=>s.is_public===!0)),i=re(s=>s.session.user),o=zt();return w.useEffect(()=>{r(Object.values(t).filter(s=>s.is_public===!0))},[t]),p.jsxs("div",{children:[p.jsx("p",{children:"Read what others have written and give them advice.  Remember to be respectful."}),p.jsxs("div",{className:"public-post-title",children:[p.jsx("h1",{children:"Public Feed"}),p.jsx("h1",{children:"All Entries"})]}),p.jsx("div",{className:"public-post-content-container",children:n.map(s=>{var l,a;return p.jsxs("div",{className:"postfeed-post-container",children:[p.jsxs("div",{className:"post-name-and-user-container",children:[p.jsx("h3",{children:s.name}),p.jsxs("div",{className:"post-username-image-container",children:[p.jsx("img",{src:(l=e[s.user_id])==null?void 0:l.profile_image,className:"post-profile-image"}),p.jsx("h3",{children:(a=e[s.user_id])==null?void 0:a.username}),s.user_id===i.id?p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(vi,{}),modalComponent:p.jsx(Bu,{post:s})})}):""]})]}),p.jsx("div",{className:"small-post-container",onClick:()=>o(`/public/${s.id}`),children:p.jsx("div",{className:"small-post-content",children:_h(s.content.slice(0,s.content.indexOf("</p>")))})}),p.jsx("div",{className:"post-seporating-bottom-border"})]},s.id)})})]})}function Lj(){const{postId:t}=ko(),e=je(),n=re(m=>m.entries[t]),r=re(m=>m.users[n==null?void 0:n.user_id]),i=re(m=>m.users),o=re(m=>m.session.user),[s,l]=w.useState(""),[a,u]=w.useState([]),[c,d]=w.useState(!1);w.useEffect(()=>{const m=[...n.comments].reverse();u(m)},[n]),w.useEffect(()=>{n&&d(!0)},[n]);const f=async m=>{if(m.preventDefault(),s.length<=0||s.length>600)return;const h={userId:o.id,entryId:n.id,comment:s};l(""),await e(gM(h)),await e(Or())};if(c)return p.jsxs("div",{className:"public-post",children:[p.jsx("p",{className:"mini-page-title"}),p.jsxs("div",{className:"public-post-title",children:[p.jsx("h1",{children:"Public Feed"}),p.jsx("h1",{children:`${n==null?void 0:n.name} by ${r==null?void 0:r.username}`})]}),p.jsx("div",{className:"public-post-content-container",children:p.jsx("p",{className:"post-content",children:_h(n.content)})}),p.jsxs("div",{className:"public-post-message-container",children:[p.jsxs("div",{children:[p.jsx("p",{children:`Posted on: ${n==null?void 0:n.post.created_at.slice(0,17)}`}),p.jsx("h3",{children:`Message from ${r==null?void 0:r.username}:`})]}),p.jsx("div",{className:"message-container",children:p.jsx("p",{className:"message-element",children:n==null?void 0:n.post.message})})]}),p.jsx("div",{className:"space-maker-div"}),p.jsxs("form",{onSubmit:f,children:[p.jsxs("div",{className:"public-post-comment-form",children:[p.jsx("p",{className:"public-post-small-label",children:`Let ${r==null?void 0:r.username} know what you think about their writing!`}),p.jsx("div",{className:"public-post-comment-input-area",children:p.jsx("textarea",{type:"text",rows:4,cols:140,value:s,onChange:m=>l(m.target.value)})}),p.jsx("p",{className:s.length>600||s.length<=0?"post-comment-errors":"post-comment-no-errors",children:`${s.length}/600`})]}),p.jsx("div",{className:"post-comment-btn-container",children:p.jsx("button",{type:"submit",className:"modal-button",children:"Comment"})})]}),a.length?p.jsxs("div",{className:"publicpost-comment-container",children:[p.jsx("h2",{children:"Comments:"}),a.map(m=>{var h,g;return p.jsxs("div",{children:[p.jsxs("div",{className:"entrypage-comment-title",children:[p.jsxs("div",{className:"user-info-for-comment",children:[p.jsx("img",{src:(h=i[m.user_id])==null?void 0:h.profile_image}),p.jsx("div",{children:(g=i[m.user_id])==null?void 0:g.username})]}),p.jsxs("div",{children:[m.user_id===o.id?p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(qs,{}),modalComponent:p.jsx(hx,{comment:m})})}):"",p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(vi,{}),modalComponent:p.jsx(fx,{comment:m})})})]})]}),p.jsx("div",{className:"entrypage-comment",children:m.comment})]},m.id)})]}):p.jsx("h3",{children:"Be the first to leave a comment!"})]})}function US({post:t}){const e=je(),[n,r]=w.useState(t.post.message),[i,o]=w.useState({}),{closeModal:s}=Ke();w.useEffect(()=>{const a={};n.length>100&&(a.message="Message section must be 100 characters or less"),o(a)},[n]);const l=async a=>{a.preventDefault();const u={entryId:t.post.id,message:n},c=await e(SM(u));c.message?o(c):(r(""),await s())};return p.jsxs("div",{className:"post-modal-main-container",children:[p.jsx("h1",{className:"post-modal-titles",children:"Edit Post"}),p.jsxs("form",{onSubmit:l,children:[p.jsxs("div",{className:"post-modal-form-container",children:[p.jsx("label",{className:"post-modal-label",children:"Let others know a little about your writings intentions!"}),p.jsx("label",{className:"post-modal-label-2",children:"Keep it short and sweet, let your art speak for itself!"}),p.jsx("textarea",{value:n,rows:8,cols:50,onChange:a=>r(a.target.value),required:!0}),p.jsx("p",{className:i.message?"post-modal-errors":"post-modal-no-errors",children:`${n.length}/100`})]}),p.jsx("div",{className:"post-modal-conformation-btn-container",children:p.jsx("button",{type:"submit",className:"modal-button delete-comment-button",children:"Submit Changes"})})]})]})}function _j(){const t=re(l=>l.session.user),e=re(l=>l.entries),[n,r]=w.useState(Object.values(e).filter(l=>l.user_id===t.id&&l.is_public===!0)),[i,o]=w.useState(!1),s=zt();return w.useEffect(()=>{o(!!n)},[n]),w.useEffect(()=>{r(Object.values(e).filter(l=>l.user_id===t.id&&l.is_public===!0))},[e,t]),p.jsx("div",{children:i?p.jsxs("div",{children:[p.jsx("p",{className:"mini-page-title"}),p.jsx("h1",{id:"homepage-user-title",children:`${t==null?void 0:t.name}'s Posts`}),p.jsx("p",{className:"page-title-blocks",children:"Your Public Entries"}),p.jsx("div",{id:"homepage-notebook-card-container",children:n.length?n.map(l=>p.jsx("div",{children:p.jsxs("div",{className:"homepage-notebook-card",children:[p.jsxs("div",{className:"homepage-notebook-card-details",onClick:()=>s(`/public/${l==null?void 0:l.id}`),children:[p.jsx("div",{children:p.jsx("div",{children:l==null?void 0:l.name})}),p.jsx("div",{className:"notebook-about-section-container",children:p.jsx("div",{children:`${l==null?void 0:l.post.message}`})})]}),p.jsxs("div",{className:"notebook-edit-delete-container",children:[p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(qs,{}),modalComponent:p.jsx(US,{post:l})})}),p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(vi,{}),modalComponent:p.jsx(Bu,{post:l})})})]})]})},l==null?void 0:l.id)):p.jsx("div",{className:"no-public-posts",children:"You have not made any public posts yet."})})]}):p.jsx(np,{})})}function zj(){return p.jsx("div",{children:p.jsx("h1",{children:"Oh no! Something went wrong."})})}function Fj(){const t=re(l=>l.session.user),e=re(l=>l.entries),[n,r]=w.useState(Object.values(e).filter(l=>l.user_id===t.id&&l.is_public===!0&&l.comments.length>=1)),[i,o]=w.useState(""),s=zt();return w.useEffect(()=>{r(Object.values(e).filter(l=>l.user_id===t.id&&l.is_public===!0&&l.comments.length>=1))},[e,t]),w.useEffect(()=>{let l=Object.values(e).filter(u=>u.user_id!==t.id&&u.is_public==!0&&u.comments.length>=1),a=[];for(let u of l)for(let c of u.comments)c.user_id===t.id&&!a.includes(u)&&a.unshift(u);o(a)},[e,t]),p.jsxs("div",{children:[p.jsxs("div",{children:[p.jsx("p",{className:"mini-page-title"}),p.jsx("h1",{id:"homepage-user-title",children:`${t==null?void 0:t.name}'s Comments`}),p.jsx("p",{className:"comments-page-mini-title",children:"All of your entries others have commented on:"}),p.jsx("div",{id:"homepage-notebook-card-container",children:n.length?n.map(l=>p.jsx("div",{children:p.jsxs("div",{className:"homepage-notebook-card",children:[p.jsxs("div",{className:"homepage-notebook-card-details",onClick:()=>s(`/public/${l==null?void 0:l.id}`),children:[p.jsx("div",{children:p.jsx("div",{children:l==null?void 0:l.name})}),p.jsx("div",{className:"notebook-about-section-container",children:p.jsx("div",{children:`${l==null?void 0:l.post.message}`})})]}),p.jsxs("div",{className:"notebook-edit-delete-container",children:[p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(qs,{}),modalComponent:p.jsx(US,{post:l})})}),p.jsx("div",{className:"homepage-edit-notebook",children:p.jsx(jt,{itemText:p.jsx(vi,{}),modalComponent:p.jsx(Bu,{post:l})})})]})]})},l==null?void 0:l.id)):p.jsx("div",{className:"no-public-posts",children:"No one has commented on any of your posts yet."})})]}),p.jsxs("div",{children:[p.jsx("p",{className:"mini-page-title"}),p.jsx("p",{className:"comments-mini-page-title",children:"All public posts you have commented on:"}),p.jsx("div",{id:"homepage-notebook-card-container",children:i?i.map(l=>p.jsx("div",{children:p.jsx("div",{className:"homepage-notebook-card",children:p.jsxs("div",{className:"homepage-notebook-card-details",onClick:()=>s(`/public/${l==null?void 0:l.id}`),children:[p.jsx("div",{children:p.jsx("div",{children:l==null?void 0:l.name})}),p.jsx("div",{className:"notebook-about-section-container",children:p.jsx("div",{children:`${l==null?void 0:l.post.message}`})})]})})},l==null?void 0:l.id)):p.jsx("div",{className:"no-public-posts",children:"No one has commented on any of your posts yet."})})]})]})}const Bj=jb([{element:p.jsx(JM,{}),children:[{path:"/",element:p.jsx(hN,{})},{path:"/notebook/:notebookId",element:p.jsx(mN,{})},{path:"/notebook/:notebookId/entries/:entryId",element:p.jsx(Aj,{})},{path:"/public",element:p.jsx(Ij,{})},{path:"/public/:postId",element:p.jsx(Lj,{})},{path:"/public/user",element:p.jsx(_j,{})},{path:"/comments",element:p.jsx(Fj,{})},{path:"/loading",element:p.jsx(np,{})},{path:"*",element:p.jsx(zj,{})}]}]);const $j=$M();qc.createRoot(document.getElementById("root")).render(p.jsx(Ce.StrictMode,{children:p.jsx(yC,{store:$j,children:p.jsx(Vb,{router:Bj})})}));
